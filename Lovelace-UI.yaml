button_card_templates:
  header:
    template: Bordure
    color_type: card
    color: rgb(34, 35, 58)
    show_state: false
    show_icon: false
    styles:
      card:
        - background-color: rgba(34, 35, 58, 0.6)
        - font-size: 14px
        - font-weight: bold
        - height: 24px
        - padding: 3px
        - transform: translate(-0%, 12%)
        - box-shadow: 0px 0px 10px 3px var(--paper-item-icon-active-color)
  Bordure:
    style: |
      ha-card {
       background-color: ; /*DARKGRAY*/
       border: 1px solid rgba(245,245,245,0.2); /*GRAY*/
       border-radius: 10px;
       }
  chips:
    tap_action:
      action: more-info
    show_icon: false
    show_label: true
    show_name: false
    show_state: false
    styles:
      label:
        - justify-self: center
        - padding: 0px 6px
        - font-weight: bold
        - font-size: 14px
        - color: var(--text_on)
      img_cell:
        - width: 24px
      grid:
        - grid-template-areas: '''l'''
      card:
        - border-radius: 18px
        - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
        - height: 36px
        - width: auto
        - padding-left: 6px
        - padding-right: 6px
        - border-color: rgba(152, 167, 185, 0.2)
        - border-style: outset
    size: 80%
  icon_info:
    show_label: true
    size: 20px
    styles:
      card:
        - border-radius: var(--border-radius)
        - box-shadow: var(--box-shadow)
        - padding: 12px
      grid:
        - grid-template-areas: '"i n" "i l"'
        - grid-template-columns: min-content auto
        - grid-template-rows: min-content min-content
      icon:
        - color: rgba(var(--color-theme),0.2)
      img_cell:
        - background-color: rgba(var(--color-theme),0.05)
        - border-radius: 50%
        - place-self: center
        - width: 42px
        - height: 42px
      name:
        - align-self: end
        - justify-self: start
        - font-weight: bold
        - font-size: 14px
        - margin-left: 12px
      label:
        - justify-self: start
        - align-self: start
        - font-weight: bold
        - font-size: 12px
        - filter: opacity(40%)
        - margin-left: 12px
      state:
        - justify-self: start
        - align-self: start
        - font-weight: bold
        - font-size: 10px
        - filter: opacity(40%)
        - margin-left: 12px
  icon_info_bg:
    show_label: true
    size: 20px
    custom_fields:
      notification: |
        [[[
          if (entity.state =='unavailable'){
            return `<ha-icon icon="mdi:alert-outline" style="width: 12px; height: 12px; color: red;"></ha-icon>`
          }
        ]]]
    state:
      - styles:
          custom_fields:
            notification:
              - position: absolute
        value: unavailable
    styles:
      card:
        - border-radius: var(--border-radius)
        - box-shadow: var(--box-shadow)
        - padding: 12px
      grid:
        - grid-template-areas: '"i n" "i l"'
        - grid-template-columns: min-content auto
        - grid-template-rows: min-content min-content
      icon:
        - color: rgba(var(--color-theme),0.2)
      img_cell:
        - background-color: rgba(var(--color-theme),0.05)
        - border-radius: 50%
        - place-self: center
        - width: 42px
        - height: 42px
      name:
        - align-self: end
        - justify-self: start
        - font-weight: bold
        - font-size: 14px
        - margin-left: 12px
      label:
        - justify-self: start
        - align-self: start
        - font-weight: bold
        - font-size: 12px
        - filter: opacity(40%)
        - margin-left: 12px
      state:
        - justify-self: start
        - align-self: start
        - font-weight: bold
        - font-size: 10px
        - filter: opacity(40%)
        - margin-left: 12px
  light:
    icon: hue:bulb-sultan
    state:
      - value: 'on'
        styles:
          card:
            - box-shadow: 0px 0px 9px 3px var(--button-card-light-color)
            - color: var(--button-card-light-color)
    tap_action:
      action: toggle
    hold_action:
      action: more-info
  card_power_outlet:
    state:
      - value: 'on'
        icon: mdi:power-plug-outline
        label: Prise allumé
        styles:
          icon:
            - color: green
          img_cell:
            - background-color: '#D5F5E3'
      - value: 'off'
        icon: mdi:power-plug-off-outline
        label: Prise éteinte
        styles:
          icon:
            - color: red
          img_cell:
            - background-color: '#FADBD8'
    template:
      - icon_info_bg
  temp_hum:
    template:
      - icon_info_bg
    triggers_update: all
    label: |
      [[[
        var unit = entity.attributes.unit_of_measurement != null ? " " + entity.attributes.unit_of_measurement : ""
         if (entity.state == "idle") {
          } else {
          return entity.state + unit;
        }
      ]]]
  saison:
    state:
      - value: winter
        entity_picture: /local/lovelace/images/icon/season/winter.png
      - value: summer
        entity_picture: /local/lovelace/images/icon/season/summer.png
      - value: autumn
        entity_picture: /local/lovelace/images/icon/season/autumn.png
      - value: spring
        entity_picture: /local/lovelace/images/icon/season/spring.png
  temperature:
    state:
      - value: 19
        operator: <
        styles:
          icon:
            - color: blue
          img_cell:
            - background-color: '#D6EAF8'
      - value: 24
        operator: '>'
        styles:
          icon:
            - color: red
          img_cell:
            - background-color: '#FADBD8'
      - value: 24
        operator: <=
        styles:
          icon:
            - color: green
          img_cell:
            - background-color: '#D5F5E3'
  humidite:
    state:
      - value: 45
        operator: <
        styles:
          icon:
            - color: blue
          img_cell:
            - background-color: '#D6EAF8'
      - value: 66
        operator: '>'
        styles:
          icon:
            - color: red
          img_cell:
            - background-color: '#FADBD8'
      - value: 66
        operator: <=
        styles:
          icon:
            - color: green
          img_cell:
            - background-color: '#D5F5E3'
  Pollens:
    state:
      - value: unknown
        operator: '=='
        color: black
      - value: 1
        operator: '=='
        color: '#75f94c'
      - value: 2
        operator: '=='
        color: '#FFCE33'
      - value: 3
        operator: '=='
        color: '#FFAF33'
      - value: 4
        operator: '=='
        color: '#EC7063'
      - value: 5
        operator: '=='
        color: '#FF5733'
  lux:
    state:
      - value: 100
        operator: <
        styles:
          icon:
            - color: red
          img_cell:
            - background-color: '#FADBD8'
      - value: 101
        operator: '>'
        styles:
          icon:
            - color: green
          img_cell:
            - background-color: '#D5F5E3'
  tgtg:
    state:
      - value: 1
        operator: <
        styles:
          icon:
            - color: red
          img_cell:
            - background-color: '#FADBD8'
      - value: 1
        operator: '>='
        styles:
          icon:
            - color: green
          img_cell:
            - background-color: '#D5F5E3'
  vide:
    styles:
      card:
        - background-color: rgba(0,0,0,0)
        - box-shadow: none
        - height: 0px
        - pointer-events: none
  porte:
    state:
      - value: 'on'
        icon: mdi:door-open
        label: Porte Ouverte
        styles:
          icon:
            - color: red
          img_cell:
            - background-color: '#FADBD8'
      - value: 'off'
        icon: mdi:door-closed
        label: Porte Fermée
        styles:
          icon:
            - color: green
          img_cell:
            - background-color: '#D5F5E3'
  fenetre:
    state:
      - value: 'on'
        icon: mdi:window-open-variant
        label: Fenêtre Ouverte
        styles:
          icon:
            - color: red
          img_cell:
            - background-color: '#FADBD8'
      - value: 'off'
        icon: mdi:window-closed-variant
        label: Fenêtre Fermée
        styles:
          icon:
            - color: green
          img_cell:
            - background-color: '#D5F5E3'
  incendie:
    state:
      - value: 'on'
        icon: mdi:fire
        label: Incendie !
        styles:
          icon:
            - color: red
          img_cell:
            - background-color: '#FADBD8'
      - value: 'off'
        icon: mdi:fire-off
        label: RAS
        styles:
          icon:
            - color: green
          img_cell:
            - background-color: '#D5F5E3'
  binary_sensor:
    show_last_changed: true
    state:
      - value: 'on'
        icon: mdi:motion-sensor
        styles:
          icon:
            - color: red
          img_cell:
            - background-color: '#FADBD8'
      - value: 'off'
        icon: mdi:motion-sensor-off
        styles:
          icon:
            - color: green
          img_cell:
            - background-color: '#D5F5E3'
  wifi:
    state:
      - value: 'off'
        icon: mdi:wifi-off
        label: Wifi coupé
        styles:
          icon:
            - color: red
            - background-color: '#FADBD8'
            - width: 32px
      - value: 'on'
        icon: mdi:wifi
        label: Wifi
        styles:
          icon:
            - color: green
            - background-color: '#D5F5E3'
            - width: 32px
  media:
    label: |-
      [[[ if (entity.state =='off'){
            return "Off";
          }else{
            return entity.state;
          }
      ]]]
    icon: |
      [[[
          var application = entity.attributes.app_name;
          var icon = 'mdi:speaker';
          if(application == 'Spotify'){
            var icon = 'mdi:spotify';
          } else if(application == 'Google Podcasts'){
            var icon = 'mdi:google-podcast';
          } else if(application == 'Plex'){
            var icon = 'mdi:plex';
          }
          return icon ;
      ]]]
    styles:
      label:
        - opacity: '0.6'
      icon:
        - color: rgba(var(--color-theme),0.2)
      img_cell:
        - background-color: rgba(var(--color-theme),0.02)
      card:
        - background-blend-mode: multiply
        - background: |
            [[[
              var image = entity.attributes.entity_picture_local;
              var bg = entity.attributes.entity_picture_local;
              if (image == null){
                var bg = '';
              } else{
                var bg = 'center / cover url(' + image + ') rgba(0, 0, 0, 0.15)';
              }
              return bg;
            ]]]
    state:
      - operator: template
        value: |
          [[[
            return entity.state !='off'
          ]]]
        label: |
          [[[
            return entity.attributes.media_album_name;
          ]]]
        styles:
          label:
            - color: rgba(var(--color-theme),0.2)
            - filter: opacity(10%)
          img_cell:
            - background-color: rgba(var(--color-theme),0.2)
          icon:
            - color: rgba(var(--color-theme),0.2)
  media_mini_album:
    label: |-
      [[[ if (entity.state =='off'){
            return "Off";
          }else{
            return entity.state;
          }
      ]]]
    styles:
      icon:
        - color: rgba(var(--color-theme),0.2)
      img_cell:
        - background-color: rgba(var(--color-theme),0.05)
    state:
      - operator: template
        value: |
          [[[
            return entity.state !='off'
          ]]]
        name: |
          [[[
            return entity.attributes.media_title;
          ]]]
        label: |
          [[[
            return entity.attributes.media_album_name;
          ]]]
        styles:
          img_cell:
            - background: |
                [[[
                  var image = entity.attributes.entity_picture;
                  return 'center / cover url(' + image + ')';
                ]]]
          icon:
            - color: 0px 0px 9px 3px var(--button-card-light-color-no-temperature)
  personnes:
    show_label: true
    label: |
      [[[
        if (entity.state == 'home'){
          return "Domicile";
        }
        else if (entity.state == 'not_home'){
          return "En Balade";
        }else{
          return entity.state; //dans une zone
        }
      ]]]
    styles:
      entity_picture:
        - transform: scale(2)
      custom_fields:
        notification:
          - transform: scale(1.3)
          - border-radius: 50%
          - position: absolute
          - right: 8px
          - top: 8px
          - height: 16px
          - width: 16px
          - border: 2px solid var(--card-background-color)
          - font-size: 12px
          - line-height: 14px
          - background-color: |
              [[[
                if (entity.state == 'home'){
                  return "rgba(var(--couleur-bleu),1)";
                }else{
                  return "rgba(var(--couleur-vert),1)";
                }
              ]]]
    custom_fields:
      notification: |
        [[[
          var icon = "" ;
          if (entity.state == 'home'){
            icon="mdi:home-variant"
          }else{
              icon="mdi:pine-tree"
          }
          return `<ha-icon icon="${icon}" style="width: 10px; height: 10px; color: white;"></ha-icon>`
        ]]]
  popup_map:
    variables:
      gps: google_maps
    tap_action:
      action: fire-dom-event
      browser_mod:
        command: call-service
        service: browser_mod.popup
        service_data:
          deviceID:
            - this
          title: '[[[ return( "Position de " +  entity.attributes.friendly_name); ]]]'
          style:
            $: |
              .mdc-dialog {
                backdrop-filter: blur(5px) !important;
                -webkit-backdrop-filter: blur(5px) !important;
              }
            .: |
              mwc-icon-button ha-icon {
                font-size: 0;
              }
              .content{padding: 0 10px 10px 10px}
          card:
            type: vertical-stack
            cards:
              - template:
                  - map_card
                type: custom:button-card
                entity: '[[[ return entity.entity_id ]]]'
              - type: entities
                show_header_toggle: false
                entities:
                  - type: weblink
                    name: |
                      [[[
                        if (variables.gps.toUpperCase() == 'GOOGLE_MAPS'){
                          var gps = "(via Google Maps)"
                        }
                        else if (variables.gps.toUpperCase() == 'WAZE'){
                          var gps = "(via Waze)"
                        }
                        return('Itinéraire vers ' + entity.attributes.friendly_name + ' ' + gps);
                      ]]]
                    icon: mdi:map-marker-path
                    url: |
                      [[[
                        if (variables.gps.toUpperCase() == 'GOOGLE_MAPS'){
                          return('https://maps.google.com/maps?q='+entity.attributes.latitude+','+entity.attributes.longitude+'&t=&z=15');
                        }
                        else if (variables.gps.toUpperCase() == 'WAZE'){
                          return('waze://?ll='+entity.attributes.latitude+','+entity.attributes.longitude+'&z=15&navigate=yes');
                        }
                      ]]]
  map_card:
    show_name: false
    show_icon: false
    styles:
      card:
        - border-radius: 20px
        - box-shadow: var(--box-shadow)
        - padding: 12px
      grid:
        - grid-template-areas: '"item1"'
        - grid-template-columns: 1fr
        - grid-template-rows: min-content  min-content
        - row-gap: 12px
    custom_fields:
      item1:
        card:
          type: iframe
          url: |-
            [[[
              var lat = entity.attributes.latitude
              var long = entity.attributes.longitude
              return `https://maps.google.com/maps?q=${lat},${long}&t=&z=13&ie=UTF8&iwloc=&output=embed`
            ]]]
          aspect_ratio: 96%
  camera_live:
    show_label: false
    show_icon: false
    show_name: false
    styles:
      grid:
        - grid-template-areas: '"item1"'
    custom_fields:
      item1:
        card:
          camera_image: '[[[ return entity.entity_id ]]]'
          camera_view: live
          entity: '[[[ return entity.entity_id ]]]'
          show_name: false
          show_state: false
          type: picture-entity
  tuile_neutre:
    tap_action:
      action: more-info
    show-name: false
    styles:
      card:
        - border-radius: 20px
        - box-shadow: var(--box-shadow)
        - padding: 12px
  sidebar:
    entity: weather.nantes
    show_entity_picture: true
    show_name: false
    entity_picture: |
      [[[
            if ((states['weather.nantes'].state == 'sunny') && (states['sun.sun'].state == 'above_horizon'))
              return "/local/lovelace/images/icon/weather/clear-day.svg";
             if ((states['weather.nantes'].state == 'sunny') || (entity.state == 'clear-night') && (states['sun.sun'].state == 'below_horizon'))
              return "/local/lovelace/images/icon/weather/clear-night.svg";   
             if (states['weather.nantes'].state == 'fog')
              return "/local/lovelace/images/icon/weather/fog.svg";     
             if ((states['weather.nantes'].state == 'partlycloudy') && (states['sun.sun'].state == 'above_horizon'))
              return "/local/lovelace/images/icon/weather/partly-cloudy-day.svg";                      
             if ((states['weather.nantes'].state == 'partlycloudy') && (states['sun.sun'].state == 'below_horizon'))
              return "/local/lovelace/images/icon/weather/partly-cloudy-night.svg";    
             if (states['weather.nantes'].state == 'rainy')
              return "/local/lovelace/images/icon/weather/rain.svg";                  
             if (states['weather.nantes'].state == 'sleet')
              return "/local/lovelace/images/icon/weather/sleet.svg";         
             if (states['weather.nantes'].state == 'snow')
              return "/local/lovelace/images/icon/weather/snow.svg";  
             if (states['weather.nantes'].state == 'cloudy')
              return "/local/lovelace/images/icon/weather/cloudy.svg";    
            else (states['weather.nantes'].state == 'wind')
              return "/local/lovelace/images/icon/weather/wind.svg";                        
      ]]]
    styles:
      grid:
        - grid-template-areas: |
            "date"
            "time"
            "bonjour"
            "conditions_meteo"
            "temp"
            "soleil"
            "alerte_meteo"
            "fetes"  
            "anniv"
            "event"
            "titre_avertissement"
        - grid-template-columns: 1fr
        - grid-template-rows: min-content min-content min-content 1fr
        - gap: 0%
        - overflow: hidden
      card:
        - font-family: Avenir
        - border-color: var(--card_border)
        - border-width: 1px
      img_cell:
        - left: 38%
        - top: '-25%'
        - position: absolute
      icon:
        - width: 12%
      custom_fields:
        date:
          - padding: 0px 0px 0px 0px
          - color: var(--text_on)
          - justifiy-self: start
          - font-size: 25px
          - font-weight: bold
          - line-height: 150%
          - font-style: italic
          - position: center
        time:
          - color: var(--text_on)
          - padding: 0px 0px 0px 0px
          - text-transform: null
          - font-weight: bold
          - font-size: 22px
          - justifiy-self: start
          - line-height: null
          - white-space: normal
          - font-style: italic
          - position: center
        anniv:
          - border-left: |
              [[[
                if (states['sensor.anniversaire'].state == 'Aucun')
                  return '';
                return '2px tomato solid';
              ]]]
          - padding: 0px 0px 0px 0px
          - padding-left: 8px
          - justifiy-self: start
          - text-align: left
          - color: grey
          - white-space: normal
          - justifiy-self: start
          - text-align: left
          - white-space: normal
        fetes:
          - border-left: |
              [[[
                if (states['sensor.fetes'].state == 'Aucun')
                  return '';
                return '2px tomato solid';
              ]]]
          - padding: 15px 8px 0px 8px
          - padding-left: 8px
          - justifiy-self: start
          - text-align: left
          - color: grey
          - white-space: normal
          - justifiy-self: start
          - text-align: left
          - white-space: normal
        event:
          - border-left: |
              [[[
                if (states['sensor.evenement'].state == 'Aucun')
                  return '';
                return '2px tomato solid';
              ]]]
          - padding-left: 8px
          - justifiy-self: start
          - text-align: left
          - color: grey
          - white-space: normal
          - justifiy-self: start
          - text-align: left
          - white-space: normal
        bonjour:
          - border-left: 2px limegreen solid
          - padding-left: 8px
          - justifiy-self: start
          - text-align: left
          - white-space: normal
          - font-weight: bold
          - font-style: italic
        conditions_meteo:
          - border-left: 2px steelblue solid
          - padding-left: 8px
          - padding: 15px 8px 0px 8px
          - font-size: 85%
          - font-weight: bold
          - line-height: null
          - justifiy-self: start
          - text-align: left
          - color: var(--text_on_sidebar)
          - white-space: normal
        temp:
          - border-left: |
              [[[
                if (states['sensor.weather_alerte_couleur'].state == 'Vigilance Jaune' )
                  return "2px gold solid" ;
                if (states['sensor.weather_alerte_couleur'].state == 'Vigilance Orange' )
                  return "2px orange solid" ;
                if (states['sensor.weather_alerte_couleur'].state == 'Vigilance Rouge' )
                  return "2px red solid" ;
                return "2px steelblue solid" ;
              ]]]
          - padding: 0px 0px 0px 0px
          - padding-left: 8px
          - color: var(--text_on_info_sidebar)
          - font-size: 80%
          - justifiy-self: start
          - text-align: left
          - white-space: normal
        soleil:
          - border-left: |
              [[[
                if (states['sensor.weather_alerte_couleur'].state == 'Vigilance Jaune' )
                  return "2px gold solid" ;
                if (states['sensor.weather_alerte_couleur'].state == 'Vigilance Orange' )
                  return "2px orange solid" ;
                if (states['sensor.weather_alerte_couleur'].state == 'Vigilance Rouge' )
                  return "2px red solid" ;
                return "2px steelblue solid" ;
              ]]]
          - padding: 0px 0px 0px 0px
          - padding-left: 8px
          - color: var(--text_on_info_sidebar)
          - font-size: 80%
          - justifiy-self: start
          - text-align: left
          - white-space: normal
        alerte_meteo:
          - border-left: |
              [[[
                if (states['sensor.weather_alerte_couleur'].state == 'Vigilance Jaune' )
                  return "2px gold solid" ;
                if (states['sensor.weather_alerte_couleur'].state == 'Vigilance Orange' )
                  return "2px orange solid" ;
                if (states['sensor.weather_alerte_couleur'].state == 'Vigilance Rouge' )
                  return "2px red solid" ;
                return "2px steelblue solid" ;
              ]]]
          - padding: 0px 0px 0px 0px
          - padding-left: 8px
          - color: |
              [[[
                if (states['sensor.weather_alerte_couleur'].state == 'Vigilance Jaune' )
                  return "gold" ;
                if (states['sensor.weather_alerte_couleur'].state == 'Vigilance Orange' )
                  return "orange" ;
                if (states['sensor.weather_alerte_couleur'].state == 'Vigilance Rouge' )
                  return "red" ;
                return "var(--text_off_sidebar)" ;
              ]]]
          - font-size: 83%
          - justifiy-self: start
          - text-align: left
          - white-space: normal
        titre_avertissement:
          - padding: |
              [[[
                if (states['sensor.systeme_sidebar'].state == 'Aucun')
                  return "0px 0px 0px 0px" ;
                return "15px 0px 0px 0px" ;
              ]]]
          - font-size: 83%
          - font-weight: bold
          - justifiy-self: start
          - text-align: left
          - color: red
          - white-space: normal
        temp_barre:
          - position: absolute
          - opacity: 100%
          - top: 2.8%
          - left: 70%
          - width: calc(35% + 0px)
          - transform: translate(-50%, calc(-50% + 10px))
          - z-index: 1
          - '--paper-card-background-color': rgba(0, 0, 0, 0.0)
          - '--ha-card-background': rgba(0, 0, 0, 0.0)"
          - '--ha-card-box-shadow': none
    custom_fields:
      date: |
        [[[ return states['sensor.date_simple'].state ]]]
      time: |
        [[[ return states['sensor.time'].state ]]]
      bonjour: |
        [[[ return (states['sensor.bonjour'].state +","+" "+ user.name + '!')
        ]]]
      anniv: |
        [[[
          if (states['sensor.anniversaire'].state == 'Aucun')
            return "" ;
          return "🎁 " + states['sensor.anniversaire'].state ;
        ]]]
      fetes: |
        [[[
          if (states['sensor.fetes'].state == 'Aucun')
            return "" ;
          return "📆 " + states['sensor.fetes'].state ;
        ]]]
      event: |
        [[[
          if (states['sensor.evenement'].state == 'Aucun')
            return "" ;
          return "📆 " + states['sensor.evenement'].state ;
        ]]]
      conditions_meteo: |
        [[[ return states['sensor.weather_conditions'].state +"°C" ]]]
      temp: |
        [[[
          return `<ha-icon
            icon="mdi:arrow-up-thin"
            style="width: 20px; height: 20px; color: red; margin-right: -5px;">
            </ha-icon><span> ${states['sensor.temperature_maximal_du_jour'].state}</span>
                  <ha-icon
            icon="mdi:arrow-down-thin"
            style="width: 20px; color: dodgerblue; height: 20px; margin-right: -5px;">
            </ha-icon><span> ${states['sensor.temperature_minmal_du_jour'].state}</span>`
        ]]]
      soleil: |
        [[[
          if (states['sun.sun'].state == 'below_horizon')
            return `<ha-icon
              icon="mdi:weather-sunny"
              style="width: 15px; height: 15px; color: gold; margin-right: -3px;">
              </ha-icon><span> ${states['sensor.weather_leve_soleil'].state}</span>
                    <ha-icon
              icon="mdi:moon-waning-crescent"
              style="width: 15px; color: lightgrey; height: 15px; margin-right: -5px;">
              </ha-icon><span> ${states['sensor.weather_couche_soleil'].state}</span>`
          return `<ha-icon
            icon="mdi:moon-waning-crescent"
            style="width: 15px; color: lightgrey; height: 15px; margin-right: -5px;">
            </ha-icon><span> ${states['sensor.weather_couche_soleil'].state}</span>
                 <ha-icon
            icon="mdi:weather-sunny"
            style="width: 15px; height: 15px; color: gold; margin-right: -3px;">
            </ha-icon><span> ${states['sensor.weather_leve_soleil'].state}</span>          
          `
        ]]]
      alerte_meteo: |
        [[[ return  states['sensor.weather_alerte'].state ]]]
      titre_avertissement: |
        [[[
          if (states['sensor.systeme_sidebar'].state == 'Aucun')
            return "" ;
          return "Avertissement" ;
        ]]]
      temp_barre:
        card:
          type: custom:bar-card
          entities:
            - entity: sensor.weather_temperature
          entity_row: true
          unit_of_measurement: °
          positions:
            value: inside
            name: 'off'
          height: 17px
          width: 50%
          max: |
            [[[
              if (states['sensor.temperature_maximal_du_jour'].state > 36)
                return "36"
              if (states['sensor.temperature_maximal_du_jour'].state > 35)
                return "35"
              if (states['sensor.temperature_maximal_du_jour'].state > 34)
                return "34"
              if (states['sensor.temperature_maximal_du_jour'].state > 33)
                return "33"
              if (states['sensor.temperature_maximal_du_jour'].state > 32)
                return "32"
              if (states['sensor.temperature_maximal_du_jour'].state > 31)
                return "31"
              if (states['sensor.temperature_maximal_du_jour'].state > 30)
                return "30"
              if (states['sensor.temperature_maximal_du_jour'].state > 29)
                return "29"
              if (states['sensor.temperature_maximal_du_jour'].state > 28)
                return "28"
              if (states['sensor.temperature_maximal_du_jour'].state > 27)
                return "27"
              if (states['sensor.temperature_maximal_du_jour'].state > 26)
                return "26"
              if (states['sensor.temperature_maximal_du_jour'].state > 25)
                return "25"
              if (states['sensor.temperature_maximal_du_jour'].state > 24)
                return "24"
              if (states['sensor.temperature_maximal_du_jour'].state > 23)
                return "23"
              if (states['sensor.temperature_maximal_du_jour'].state > 22)
                return "22"
              if (states['sensor.temperature_maximal_du_jour'].state > 21)
                return "21"
              if (states['sensor.temperature_maximal_du_jour'].state > 20)
                return "20"
              if (states['sensor.temperature_maximal_du_jour'].state > 19)
                return "19"
              if (states['sensor.temperature_maximal_du_jour'].state > 18)
                return "18"
              if (states['sensor.temperature_maximal_du_jour'].state > 17)
                return "17"
              if (states['sensor.temperature_maximal_du_jour'].state > 16)
                return "16"
              if (states['sensor.temperature_maximal_du_jour'].state > 15)
                return "15"
              if (states['sensor.temperature_maximal_du_jour'].state > 14)
                return "14"
              if (states['sensor.temperature_maximal_du_jour'].state > 13)
                return "13"
              if (states['sensor.temperature_maximal_du_jour'].state > 12)
                return "12"
              if (states['sensor.temperature_maximal_du_jour'].state > 11)
                return "11"
              if (states['sensor.temperature_maximal_du_jour'].state > 10)
                return "10"
              if (states['sensor.temperature_maximal_du_jour'].state > 9)
                return "9"
              if (states['sensor.temperature_maximal_du_jour'].state > 8)
                return "8"
              if (states['sensor.temperature_maximal_du_jour'].state > 7)
                return "7"
              if (states['sensor.temperature_maximal_du_jour'].state > 6)
                return "6"
              if (states['sensor.temperature_maximal_du_jour'].state > 5)
                return "5"
              if (states['sensor.temperature_maximal_du_jour'].state > 4)
                return "4"
              if (states['sensor.temperature_maximal_du_jour'].state > 3)
                return "3"
              if (states['sensor.temperature_maximal_du_jour'].state > 2)
                return "2"
              if (states['sensor.temperature_maximal_du_jour'].state > 1)
                return "1"
              if (states['sensor.temperature_maximal_du_jour'].state > 0)
                return "1"
              return "40"
            ]]]
          icon: 'off'
          severity:
            - from: '0'
              to: '13'
              color: rgba(0,191,255,0.4)
            - from: '13'
              to: '25'
              color: rgba(240,230,140,0.4)
            - from: '25'
              to: '50'
              color: rgba(240,128,128,0.4)
          style: |-
            bar-card-value {
              margin-right: -30%;
              font-size: 13px;
              font-weight: bold;
              color: lightgrey;
            }
views:
  - theme: Backend-selected
    title: Home
    icon: mdi:home-assistant
    path: home
    visible:
      - user: 9b144cacffe2461babcefd46b46f3f61
      - user: 07b9552c7f0c4ede8e5301f34b654e91
      - user: c55ab7f969ff49d2bae763c5e3a363c9
    badges: []
    cards:
      - cards:
          - type: custom:button-card
            name: DATE
            template:
              - header
          - type: vertical-stack
            cards:
              - type: custom:button-card
                template:
                  - sidebar
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Météo
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:meteofrance-weather-card
                          entity: weather.nantes
                          number_of_forecasts: '5'
                          cloudCoverEntity: sensor.nantes_cloud_cover
                          rainChanceEntity: sensor.nantes_rain_chance
                          uvEntity: sensor.nantes_uv
                          freezeChanceEntity: sensor.nantes_freeze_chance
                          snowChanceEntity: sensor.nantes_snow_chance
                          alertEntity: sensor.44_weather_alert
                          rainForecastEntity: sensor.nantes_next_rain
                          style: |
                            ha-card {
                              background: var(--my_color2);
                              --ha-card-background: none !important;
                              font-family: Avenir;
                              border-color: rgba(152, 167, 185, 0.2) ;
                              border-style: outset ;
                              border-width: 1px ;
                              box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            }
                          name: nantes
                        - square: false
                          columns: 2
                          type: grid
                          cards:
                            - type: custom:mini-graph-card
                              align_header: center
                              align_icon: center
                              align_state: center
                              animate: true
                              color_thresholds:
                                - color: lightblue
                                  value: 0
                                - color: dodgerblue
                                  value: 10
                                - color: yellow
                                  value: 15
                                - color: tomato
                                  value: 20
                                - color: tomato
                                  value: 25
                                - color: red
                                  value: 30
                                - color: orange
                                  value: 35
                                - color: red
                                  value: 40
                              entities:
                                - entity: sensor.weather_temperature
                                  name: Température
                                  color: tomato
                                  unit: °
                              font_size_header: 13
                              font_size: 90
                              hour24: true
                              hours_to_show: 168
                              line_color: gold
                              line_width: 5
                              name: Température
                              icon: mdi:weather-partly-cloudy
                              point_per_hour: 1
                              show:
                                state: true
                                extrema: false
                                fill: true
                                icon: false
                                icon_adaptive_color: false
                                labels: true
                                labels_secondary: true
                                legend: true
                                line: true
                                name_adaptive_color: true
                            - type: custom:mini-graph-card
                              align_header: center
                              align_icon: center
                              align_state: center
                              animate: true
                              color_thresholds:
                                - color: lightblue
                                  value: 0
                                - color: dodgerblue
                                  value: 30
                                - color: dodgerblue
                                  value: 40
                                - color: tomato
                                  value: 50
                                - color: tomato
                                  value: 60
                                - color: red
                                  value: 70
                                - color: red
                                  value: 80
                                - color: red
                                  value: 90
                              entities:
                                - entity: sensor.weather_humidite
                                  name: Humidité
                                  color: dodgerblue
                                  unit: '%'
                              font_size_header: 13
                              font_size: 90
                              hour24: true
                              hours_to_show: 168
                              line_color: gold
                              line_width: 5
                              name: Humidité
                              icon: mdi:weather-partly-cloudy
                              point_per_hour: 1
                              show:
                                state: true
                                extrema: false
                                fill: true
                                icon: false
                                icon_adaptive_color: false
                                labels: true
                                labels_secondary: true
                                legend: true
                                line: true
                                name_adaptive_color: true
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: weather.nantes
                    template: chips
                    name: |
                      [[[
                        if (entity.state == 'unavailable')
                          return "☀️ HS" ;
                        return states['sensor.weather_icon'].state ;
                      ]]]
                    show_name: true
                    label: |
                      [[[
                        if (entity.state == 'unavailable')
                          return "" ;
                        return  (states['sensor.weather_temperature'].state  );
                      ]]]
                    styles:
                      name:
                        - justify-self: center
                        - align-self: center
                      label:
                        - align-self: center
                        - margin-top: 12px
                      grid:
                        - grid-template-areas: '"n l"'
                      card:
                        - opacity: |
                            [[[
                              if (entity.state == 'unavailable')
                                return "50%" ;
                              return "100%";
                            ]]]
                    double_tap_action:
                      action: more-info
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        command: popup
                        title: Info et Météo
                        card:
                          type: vertical-stack
                          cards:
                            - type: markdown
                              content: >
                                <font size= "3"><font color='lightgrey'><u>
                                Savoir inutile </u>:<i>
                                {{states('sensor.savoir_scrape') }}</i>
                              style:
                                .: |
                                  ha-card {
                                      --ha-card-background: none !important;
                                      box-shadow: none !important;
                                      font-family: Avenir;
                                  }
                            - type: custom:meteofrance-weather-card
                              entity: weather.nantes
                              number_of_forecasts: '5'
                              cloudCoverEntity: sensor.nantes_cloud_cover
                              rainChanceEntity: sensor.nantes_rain_chance_2
                              uvEntity: sensor.nantes_uv_2
                              freezeChanceEntity: sensor.nantes_freeze_chance_2
                              snowChanceEntity: sensor.nantes_snow_chance_2
                              alertEntity: sensor.44_weather_alert
                              rainForecastEntity: sensor.nantes_next_rain_2
                  - type: custom:button-card
                    entity: sensor.compteur_home
                    name: maison
                    template:
                      - chips
                    label: |
                      [[[ return "🏠 "+ (entity.state ) ;
                      ]]]
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        command: popup
                        title: Info et Météo
                        card:
                          type: grid
                          cards:
                            - type: custom:button-card
                              entity: person.vincent
                              name: vincent
                              aspect_ratio: 1/1
                              show_entity_picture: true
                              show_icon: false
                              show_name: false
                              show_state: false
                              show_label: true
                              label: |
                                [[[
                                  return states['sensor.sm_a705fn_battery_level'].state
                                ]]]
                              styles:
                                entity_picture:
                                  - border-radius: 50%
                                  - top: 5%
                                  - left: 5%
                                  - width: 40%
                                  - color: gray
                                  - opacity: 60%
                                name:
                                  - top: 5%
                                  - left: 8%
                                  - position: absolute
                                  - color: grey
                                  - font-size: 85%
                                state:
                                  - top: 79%
                                  - left: 5%
                                  - position: absolute
                                label:
                                  - font-size: 85%
                                  - font-weight: bold
                                  - top: 58%
                                  - left: 8%
                                  - position: absolute
                                  - color: |
                                      [[[
                                        if (states['person.vincent'].state == "Maison")
                                          return 'darkgrey';
                                        if (states['person.vincent'].state == "Ecole-Emma")
                                          return 'grey';
                                        if (states['person.vincent'].state == "Arthon-en-retz")
                                          return 'grey';
                                        if (states['person.vincent'].state == "Travail")
                                          return 'grey';
                                       if (states['person.vincent'].state == "Pressing")
                                          return 'grey';
                                        return 'red';
                                      ]]]
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: >
                                      [[[ return (entity.state === 'on' ||
                                      entity.state === 'Maison') ?
                                      'var(--my_color2)' :
                                      'var(--my_color_pastille)'; ]]]
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                custom_fields:
                                  vincent_heure:
                                    - font-size: 85%
                                    - top: 75%
                                    - left: 8%
                                    - color: grey
                                    - position: absolute
                                  circle:
                                    - top: 10%
                                    - left: 55%
                                    - width: 35%
                                    - position: absolute
                                    - letter-spacing: 0.03vw
                                    - stroke: |
                                        [[[
                                          if (states['sensor.sm_a705fn_battery_level'].state < 40)
                                            return 'red';
                                         return 'grey';
                                        ]]]
                              extra_styles: |
                                @keyframes ball-scale {
                                  from {
                                    transform: scale(1);
                                  }
                                  to {
                                    transform: scale(0.90);
                                  }
                                }
                                @keyframes ball-scale2 {
                                  from {
                                    transform: scale(1);
                                  }
                                  to {
                                    transform: scale(0.90);
                                  }
                                }
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                      - animation: ball-scale 0.2s
                                      - border-width: 1px
                                - value: 'off'
                                  styles:
                                    card:
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                      - animation: ball-scale2 0.2s
                                      - border-width: 1px
                              custom_fields:
                                vincent_heure: >
                                  [[[ return
                                  states['sensor.vincent_heure'].state ]]]
                                circle: |
                                  [[[ if (entity.state != 'unavailable' ) 
                                  {
                                     ;
                                     const radius = 20.5; const circumference = radius * 2 * Math.PI; 
                                     return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="grey" stroke-width="1" fill="none" style="
                                     transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - states['sensor.sm_a705fn_battery_level'].state / 100 * circumference};" />
                                     <text x="50%" y="54%" fill="grey" font-size="13" text-anchor="middle" alignment-baseline="middle">${states['sensor.sm_a705fn_battery_level'].state}%<tspan font-size="10"></tspan></text></svg>`; } ]]]
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  command: popup
                                  title: Vincent
                                  card:
                                    type: custom:vertical-stack-in-card
                                    cards:
                                      - type: picture
                                        style: |
                                          ha-card {
                                            border-radius: 10px;
                                            background: var(--my_color2);
                                          }
                                        image: /local/lovelace/images/Vincent.jpg
                                        tap_action:
                                          action: none
                                        hold_action:
                                          action: none
                                      - type: entities
                                        entities:
                                          - entity: person.vincent
                                        style: |
                                          ha-card {
                                            border-radius: 15px ;
                                            background: var(--my_color2);
                                            color: lightgrey;
                                          }
                                      - aspect_ratio: '1:1'
                                        dark_mode: true
                                        default_zoom: 15
                                        entities:
                                          - entity: person.vincent
                                        hours_to_show: 12
                                        type: map
                                        style: |
                                          ha-card {
                                            border-radius: 15px ;
                                            border-radius: 15px 15px 0px 0px ;
                                            border-top : px solid grey;
                                            border-left : px solid grey;
                                            border-right : px solid grey;
                                          }
                                      - header:
                                          title: 📱Phone ️
                                          show: true
                                          show_states: true
                                          colorize_states: true
                                        experimental:
                                          brush: true
                                        graph_span: 72h
                                        brush:
                                          selection_span: 12h
                                        apex_config:
                                          grid:
                                            show: false
                                          legend:
                                            fontSize: 12px
                                            height: 40
                                          dataLabels:
                                            enabled: false
                                          stroke:
                                            width: 3
                                            curve: smooth
                                          fill:
                                            type: gradient
                                            gradient:
                                              type: vertical
                                              shadeIntensity: 0.8
                                              inverseColors: false
                                              opacityFrom: 0.5
                                              opacityTo: 0
                                              stops:
                                                - - 0
                                                  - 50
                                                  - 100
                                          tooltip:
                                            enabled: true
                                          yaxis:
                                            - show: true
                                              decimalsInFloat: 0
                                              labels:
                                                style:
                                                  colors: '#FFB62E'
                                                  fontSize: 12px
                                              forceNiceScale: true
                                            - show: true
                                              decimalsInFloat: 0
                                              opposite: true
                                              labels:
                                                style:
                                                  colors: '#2eb9ff'
                                                  fontSize: 12px
                                              forceNiceScale: true
                                          xaxis:
                                            axisBorder:
                                              show: false
                                            labels:
                                              style:
                                                fontSize: 14px
                                        series:
                                          - entity: sensor.sm_a705fn_battery_level
                                            name: Vincent
                                            show:
                                              extremas: false
                                            type: area
                                            color: grey
                                            fill_raw: last
                                            float_precision: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                          - entity: sensor.sm_a515f_battery_level
                                            name: Patricia
                                            show:
                                              extremas: false
                                            type: area
                                            color: purple
                                            fill_raw: last
                                            float_precision: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                          - entity: sensor.sm_a705fn_battery_level
                                            name: Vincent
                                            color: dodgerblue
                                            fill_raw: last
                                            type: area
                                            stroke_width: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                            show:
                                              in_brush: true
                                              in_chart: false
                                        card_mod:
                                          style: |
                                            ha-card {
                                            background-color: black;
                                            }
                                        type: custom:apexcharts-card
                            - type: custom:button-card
                              entity: person.patricia
                              name: Patricia
                              aspect_ratio: 1/1
                              show_entity_picture: true
                              show_icon: false
                              show_name: false
                              show_state: false
                              show_label: true
                              label: |
                                [[[
                                  return states['device_tracker.sm_a515f'].state
                                ]]]
                              styles:
                                entity_picture:
                                  - border-radius: 50%
                                  - top: 5%
                                  - left: 5%
                                  - width: 40%
                                  - color: gray
                                  - opacity: 60%
                                name:
                                  - top: 55%
                                  - left: 8%
                                  - position: absolute
                                  - color: grey
                                  - font-size: 85%
                                state:
                                  - top: 79%
                                  - left: 5%
                                  - position: absolute
                                label:
                                  - font-size: 85%
                                  - font-weight: bold
                                  - top: 58%
                                  - left: 8%
                                  - position: absolute
                                  - color: |
                                      [[[
                                        if (states['person.Patricia'].state == "Maison")
                                          return 'darkgrey';
                                        if (states['person.Patricia'].state == "Ecole-Emma")
                                          return 'grey';
                                        if (states['person.Patricia'].state == "Travail")
                                          return 'grey';
                                        if (states['person.Patricia'].state == "Arthon-en-retz")
                                          return 'grey';
                                        if (states['person.Patricia'].state == "Pressing")
                                          return 'grey';
                                        if (states['person.Patricia'].state == "Appart-nanou")
                                          return 'grey';
                                        return 'red';
                                      ]]]
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: >
                                      [[[ return (entity.state === 'on' ||
                                      entity.state === 'Maison') ?
                                      'var(--my_color2)' :
                                      'var(--my_color_pastille)'; ]]]
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                custom_fields:
                                  Patricia_heure:
                                    - font-size: 85%
                                    - top: 75%
                                    - left: 8%
                                    - color: grey
                                    - position: absolute
                                  circle:
                                    - top: 10%
                                    - left: 55%
                                    - width: 35%
                                    - position: absolute
                                    - letter-spacing: 0.03vw
                                    - stroke: |
                                        [[[
                                          if (states['sensor.sm_a515f_battery_level'].state < 40)
                                            return 'red';
                                         return 'grey';
                                        ]]]
                              extra_styles: |
                                @keyframes ball-scale {
                                  from {
                                    transform: scale(1);
                                  }
                                  to {
                                    transform: scale(0.90);
                                  }
                                }
                                @keyframes ball-scale2 {
                                  from {
                                    transform: scale(1);
                                  }
                                  to {
                                    transform: scale(0.90);
                                  }
                                }
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                      - animation: ball-scale 0.2s
                                      - border-width: 1px
                                - value: 'off'
                                  styles:
                                    card:
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                      - animation: ball-scale2 0.2s
                                      - border-width: 1px
                              custom_fields:
                                Patricia_heure: >
                                  [[[ return
                                  states['sensor.Patricia_heure'].state ]]]
                                circle: |
                                  [[[ if (entity.state != 'unavailable' ) 
                                  {
                                     ;
                                     const radius = 20.5; const circumference = radius * 2 * Math.PI; 
                                     return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="grey" stroke-width="1" fill="none" style="
                                     transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - states['sensor.sm_a515f_battery_level'].state / 100 * circumference};" />
                                     <text x="50%" y="54%" fill="grey" font-size="13" text-anchor="middle" alignment-baseline="middle">${states['sensor.sm_a515f_battery_level'].state}%<tspan font-size="10"></tspan></text></svg>`; } ]]]
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  command: popup
                                  title: Patricia
                                  card:
                                    type: custom:vertical-stack-in-card
                                    cards:
                                      - type: picture
                                        style: |
                                          ha-card {
                                            border-radius: 10px;
                                            background: var(--my_color2);
                                          }
                                        image: /local/lovelace/images/patricia.png
                                        tap_action:
                                          action: none
                                        hold_action:
                                          action: none
                                      - type: entities
                                        entities:
                                          - entity: person.Patricia
                                        style: |
                                          ha-card {
                                            border-radius: 15px ;
                                            background: var(--my_color2);
                                            color: lightgrey;
                                          }
                                      - aspect_ratio: '1:1'
                                        dark_mode: true
                                        default_zoom: 15
                                        entities:
                                          - entity: person.Patricia
                                        hours_to_show: 12
                                        type: map
                                        style: |
                                          ha-card {
                                            border-radius: 15px ;
                                            border-radius: 15px 15px 0px 0px ;
                                            border-top : px solid grey;
                                            border-left : px solid grey;
                                            border-right : px solid grey;
                                          }
                                      - header:
                                          title: 📱Phone ️
                                          show: true
                                          show_states: true
                                          colorize_states: true
                                        experimental:
                                          brush: true
                                        graph_span: 72h
                                        brush:
                                          selection_span: 12h
                                        apex_config:
                                          grid:
                                            show: false
                                          legend:
                                            fontSize: 12px
                                            height: 40
                                          dataLabels:
                                            enabled: false
                                          stroke:
                                            width: 3
                                            curve: smooth
                                          fill:
                                            type: gradient
                                            gradient:
                                              type: vertical
                                              shadeIntensity: 0.8
                                              inverseColors: false
                                              opacityFrom: 0.5
                                              opacityTo: 0
                                              stops:
                                                - - 0
                                                  - 50
                                                  - 100
                                          tooltip:
                                            enabled: true
                                          yaxis:
                                            - show: true
                                              decimalsInFloat: 0
                                              labels:
                                                style:
                                                  colors: '#FFB62E'
                                                  fontSize: 12px
                                              forceNiceScale: true
                                            - show: true
                                              decimalsInFloat: 0
                                              opposite: true
                                              labels:
                                                style:
                                                  colors: '#2eb9ff'
                                                  fontSize: 12px
                                              forceNiceScale: true
                                          xaxis:
                                            axisBorder:
                                              show: false
                                            labels:
                                              style:
                                                fontSize: 14px
                                        series:
                                          - entity: sensor.sm_a705fn_battery_level
                                            name: Vincent
                                            show:
                                              extremas: false
                                            type: area
                                            color: grey
                                            fill_raw: last
                                            float_precision: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                          - entity: sensor.sm_a515f_battery_level
                                            name: Patricia
                                            show:
                                              extremas: false
                                            type: area
                                            color: purple
                                            fill_raw: last
                                            float_precision: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                          - entity: sensor.sm_a705fn_battery_level
                                            name: Vincent
                                            color: dodgerblue
                                            fill_raw: last
                                            type: area
                                            stroke_width: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                            show:
                                              in_brush: true
                                              in_chart: false
                                        card_mod:
                                          style: |
                                            ha-card {
                                            background-color: black;
                                            }
                                        type: custom:apexcharts-card
                            - type: custom:button-card
                              entity: person.nanou
                              name: nanou
                              aspect_ratio: 1/1
                              show_entity_picture: true
                              show_icon: false
                              show_name: false
                              show_state: false
                              show_label: true
                              label: |
                                [[[
                                  return states['device_tracker.sm_nanou'].state
                                ]]]
                              styles:
                                entity_picture:
                                  - border-radius: 50%
                                  - top: 5%
                                  - left: 5%
                                  - width: 40%
                                  - color: gray
                                  - opacity: 60%
                                name:
                                  - top: 55%
                                  - left: 8%
                                  - position: absolute
                                  - color: grey
                                  - font-size: 85%
                                state:
                                  - top: 79%
                                  - left: 5%
                                  - position: absolute
                                label:
                                  - font-size: 85%
                                  - font-weight: bold
                                  - top: 58%
                                  - left: 8%
                                  - position: absolute
                                  - color: |
                                      [[[
                                        if (states['person.nanou'].state == "Maison")
                                          return 'darkgrey';
                                        if (states['person.nanou'].state == "not_Maison")
                                          return 'red';
                                        return 'red';
                                      ]]]
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: >
                                      [[[ return (entity.state === 'on' ||
                                      entity.state === 'Maison') ?
                                      'var(--my_color2)' :
                                      'var(--my_color_pastille)'; ]]]
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                custom_fields:
                                  tom_heure:
                                    - font-size: 85%
                                    - top: 75%
                                    - left: 8%
                                    - color: grey
                                    - position: absolute
                              extra_styles: |
                                @keyframes ball-scale {
                                  from {
                                    transform: scale(1);
                                  }
                                  to {
                                    transform: scale(0.90);
                                  }
                                }
                                @keyframes ball-scale2 {
                                  from {
                                    transform: scale(1);
                                  }
                                  to {
                                    transform: scale(0.90);
                                  }
                                }
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                      - animation: ball-scale 0.2s
                                      - border-width: 2px
                                - value: 'off'
                                  styles:
                                    card:
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                      - animation: ball-scale2 0.2s
                                      - border-width: 1px
                              custom_fields:
                                nanou_heure: >
                                  [[[ return states['sensor.nanou_heure'].state
                                  ]]]
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  command: popup
                                  title: tom
                                  card:
                                    type: custom:vertical-stack-in-card
                                    cards:
                                      - type: picture
                                        style: |
                                          ha-card {
                                            border-radius: 10px;
                                            background: var(--my_color2);
                                          }
                                        image: /local/lovelace/images/Nanou.jpg
                                        tap_action:
                                          action: none
                                        hold_action:
                                          action: none
                                      - type: entities
                                        entities:
                                          - entity: person.nanou
                                        style: |
                                          ha-card {
                                            border-radius: 15px ;
                                            background: var(--my_color2);
                                            color: lightgrey;
                                          }
                                      - aspect_ratio: '1:1'
                                        dark_mode: true
                                        default_zoom: 15
                                        entities:
                                          - entity: person.nanou
                                        hours_to_show: 12
                                        type: map
                                        style: |
                                          ha-card {
                                            border-radius: 15px ;
                                            border-radius: 15px 15px 0px 0px ;
                                            border-top : px solid grey;
                                            border-left : px solid grey;
                                            border-right : px solid grey;
                                          }
                                      - header:
                                          title: 📱Phone ️
                                          show: true
                                          show_states: true
                                          colorize_states: true
                                        experimental:
                                          brush: true
                                        graph_span: 72h
                                        brush:
                                          selection_span: 12h
                                        apex_config:
                                          grid:
                                            show: false
                                          legend:
                                            fontSize: 12px
                                            height: 40
                                          dataLabels:
                                            enabled: false
                                          stroke:
                                            width: 3
                                            curve: smooth
                                          fill:
                                            type: gradient
                                            gradient:
                                              type: vertical
                                              shadeIntensity: 0.8
                                              inverseColors: false
                                              opacityFrom: 0.5
                                              opacityTo: 0
                                              stops:
                                                - - 0
                                                  - 50
                                                  - 100
                                          tooltip:
                                            enabled: true
                                          yaxis:
                                            - show: true
                                              decimalsInFloat: 0
                                              labels:
                                                style:
                                                  colors: '#FFB62E'
                                                  fontSize: 12px
                                              forceNiceScale: true
                                            - show: true
                                              decimalsInFloat: 0
                                              opposite: true
                                              labels:
                                                style:
                                                  colors: '#2eb9ff'
                                                  fontSize: 12px
                                              forceNiceScale: true
                                          xaxis:
                                            axisBorder:
                                              show: false
                                            labels:
                                              style:
                                                fontSize: 14px
                                        series:
                                          - entity: sensor.sm_a705fn_battery_level
                                            name: Vincent
                                            show:
                                              extremas: false
                                            type: area
                                            color: grey
                                            fill_raw: last
                                            float_precision: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                          - entity: sensor.sm_a515f_battery_level
                                            name: Patricia
                                            show:
                                              extremas: false
                                            type: area
                                            color: purple
                                            fill_raw: last
                                            float_precision: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                          - entity: sensor.sm_a705fn_battery_level
                                            name: Vincent
                                            color: dodgerblue
                                            fill_raw: last
                                            type: area
                                            stroke_width: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                            show:
                                              in_brush: true
                                              in_chart: false
                                        card_mod:
                                          style: |
                                            ha-card {
                                            background-color: black;
                                            }
                                        type: custom:apexcharts-card
                          square: false
                          columns: 3
                  - type: custom:button-card
                    entity: sensor.temp_maison
                    name: temperature
                    template:
                      - chips
                    label: |
                      [[[
                        if (entity.state == 'unavailable')
                          return "🌡 indispo" ;
                        if (entity.state == '° / °')
                          return "🌡 indispo" ;
                        return "🌡 " + (entity.state );
                      ]]]
                    styles:
                      card:
                        - opacity: |
                            [[[
                              if (entity.state == 'unavailable')
                                return "50%" ;
                              if (entity.state == '°')
                                return "50%" ;
                              return "100%";
                            ]]]
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        command: popup
                        title: Température / Humidité
                        card:
                          type: vertical-stack
                          cards:
                            - type: grid
                              cards:
                                - type: custom:button-card
                                  entity: sensor.weather_sdb_temperature
                                  name: SdB
                                  aspect_ratio: 1/1
                                  icon: mdi:thermometer
                                  show_icon: false
                                  show_name: true
                                  show_state: true
                                  show_label: true
                                  show_last_changed: true
                                  label: |
                                    [[[
                                      if (states['sensor.illuminance_salon_illuminance'].state != 'unavailable')
                                        return (states['sensor.illuminance_salon_illuminance'].state ) + " lx" ;
                                      return "";
                                    ]]]
                                  styles:
                                    state:
                                      - font-size: 110%
                                      - color: |
                                          [[[
                                            if (entity.state < 20)
                                              return 'dodgerblue';
                                            if (entity.state > 23)
                                              return 'tomato';
                                            return 'lightgrey';
                                          ]]]
                                    name:
                                      - font-size: 90%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-bottom: 15%
                                      - color: grey
                                    label:
                                      - font-size: 70%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-top: 10%
                                      - color: grey
                                    card:
                                      - font-size: 100%
                                      - border-color: rgba(152, 167, 185, 0.2)
                                      - background-color: var(--my_color2)
                                      - border-style: outset
                                      - border-width: 1px
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  double_tap_action:
                                    action: more-info
                                  tap_action:
                                    action: more-info
                                - type: custom:button-card
                                  entity: sensor.weather_cuisine_temperature
                                  name: Cuisine
                                  aspect_ratio: 1/1
                                  icon: mdi:thermometer
                                  show_icon: false
                                  show_name: true
                                  show_state: true
                                  show_label: true
                                  show_last_changed: true
                                  styles:
                                    state:
                                      - font-size: 110%
                                      - color: |
                                          [[[
                                            if (entity.state < 20)
                                              return 'dodgerblue';
                                            if (entity.state > 23)
                                              return 'tomato';
                                            return 'lightgrey';
                                          ]]]
                                    name:
                                      - font-size: 90%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-bottom: 15%
                                      - color: grey
                                    label:
                                      - font-size: 70%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-top: 10%
                                      - color: grey
                                    card:
                                      - font-size: 100%
                                      - border-color: rgba(152, 167, 185, 0.2)
                                      - background-color: var(--my_color2)
                                      - border-style: outset
                                      - border-width: 1px
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  double_tap_action:
                                    action: more-info
                                  tap_action:
                                    action: more-info
                                - type: custom:button-card
                                  entity: sensor.weather_ch_parents_temperature
                                  name: Parents
                                  aspect_ratio: 1/1
                                  icon: mdi:thermometer
                                  show_icon: false
                                  show_name: true
                                  show_state: true
                                  show_label: true
                                  show_last_changed: true
                                  styles:
                                    state:
                                      - font-size: 110%
                                      - color: |
                                          [[[
                                            if (entity.state < 20)
                                              return 'dodgerblue';
                                            if (entity.state > 23)
                                              return 'tomato';
                                            return 'lightgrey';
                                          ]]]
                                    name:
                                      - font-size: 90%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-bottom: 15%
                                      - color: grey
                                    label:
                                      - font-size: 70%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-top: 10%
                                      - color: grey
                                    card:
                                      - font-size: 100%
                                      - border-color: rgba(152, 167, 185, 0.2)
                                      - background-color: var(--my_color2)
                                      - border-style: outset
                                      - border-width: 1px
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  double_tap_action:
                                    action: more-info
                                  tap_action:
                                    action: more-info
                                - type: custom:button-card
                                  entity: sensor.weather_ch_filles_temperature
                                  name: Filles
                                  aspect_ratio: 1/1
                                  icon: mdi:thermometer
                                  show_icon: false
                                  show_name: true
                                  show_state: true
                                  show_label: true
                                  show_last_changed: true
                                  styles:
                                    state:
                                      - font-size: 110%
                                      - color: |
                                          [[[
                                            if (entity.state < 20)
                                              return 'dodgerblue';
                                            if (entity.state > 23)
                                              return 'tomato';
                                            return 'lightgrey';
                                          ]]]
                                    name:
                                      - font-size: 90%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-bottom: 15%
                                      - color: grey
                                    label:
                                      - font-size: 70%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-top: 10%
                                      - color: grey
                                    card:
                                      - font-size: 100%
                                      - border-color: rgba(152, 167, 185, 0.2)
                                      - background-color: var(--my_color2)
                                      - border-style: outset
                                      - border-width: 1px
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  double_tap_action:
                                    action: more-info
                                  tap_action:
                                    action: more-info
                              columns: 4
                  - type: custom:button-card
                    entity: sensor.weather_soleil_icon
                    name: maison
                    template:
                      - chips
                    label: |
                      [[[ return (entity.state ) ;
                      ]]]
              - type: vertical-stack
                cards:
                  - card:
                      entity: alarm_control_panel.alarmo
                      states:
                        - arm_home
                      style:
                        .: |

                          ha-card > h1{
                             padding-top: 0;
                             color: transparent;
                          }
                          ha-card > h1::before{
                             content: "Désactivée";
                             color: green;
                             position: absolute;
                             font-variant: small-caps;
                          }
                          #alarmCode{
                            display: none;
                          }
                          #keypad{
                            display: none !important;
                          }
                        '#armActions':
                          mwc-button:
                            $: |
                              #button > span.slot-container{
                                color: transparent;
                                position: absolute;

                              }
                              #button{
                                width: 150px;
                                border-radius: 21px;
                              }
                              #button > span.slot-container::before{
                                color: var(--mdc-theme-primary, #6200ee);
                                content: "Activer";
                                margin: 0 0 0 50%;
                              }
                      title: Alarme
                      type: alarm-panel
                    conditions:
                      - entity: alarm_control_panel.alarmo
                        state: disarmed
                    type: conditional
                  - card:
                      entity: alarm_control_panel.alarmo
                      states:
                        - arm_home
                      title: Alarme
                      type: alarm-panel
                      style:
                        .: |
                          ha-card > ha-label-badge{
                            --alarm-state-color: var(--google-red-500) !important;
                          }
                          ha-card > h1{
                             padding-top: 0;
                             color: transparent;
                          }
                          ha-card > h1::before{
                             content: "Activée";
                             color: var(--google-red-500);
                             position: absolute;
                             font-variant: small-caps;
                          }
                        '#armActions':
                          mwc-button:
                            $: |
                              #button > span.slot-container{
                                color: transparent;
                                position: absolute;    
                              }
                              #button{
                                width: 150px;
                                border-radius: 21px;
                              }
                              #button > span.slot-container::before{
                                color: var(--mdc-theme-primary, #6200ee);
                                content: "Désactiver";
                                margin: 0 0 0 50%;
                              }
                        '#keypad':
                          mwc-button:
                            $: |
                              #button{
                                border-radius: 12px
                              }
                    conditions:
                      - entity: alarm_control_panel.alarmo
                        state_not: disarmed
                    type: conditional
              - type: markdown
                content: >
                  <font size= "3"><u> ***Savoir inutile*** </u>:<i>
                  {{states('sensor.savoir_scrape') }}</i>
                style:
                  .: |
                    ha-card {
                     - font-size: 100%
                     - border-color: rgba(152, 167, 185, 0.2)
                     - background-color: var(--my_color2)
                     - border-style: outset
                     - border-width: 1px
                     - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                    }
          - type: vertical-stack
            cards:
              - type: grid
                columns: 3
                square: false
                cards:
                  - template:
                      - icon_info_bg
                      - personnes
                      - popup_map
                    type: custom:button-card
                    entity: person.patricia
                    show_entity_picture: true
                    variables:
                      gps: waze
                  - template:
                      - icon_info_bg
                      - personnes
                      - popup_map
                    type: custom:button-card
                    entity: person.vincent
                    show_entity_picture: true
                    variables:
                      gps: waze
                  - template:
                      - icon_info_bg
                      - personnes
                      - popup_map
                    type: custom:button-card
                    entity: person.emma
                    show_entity_picture: true
                    variables:
                      gps: waze
          - type: custom:button-card
            name: SALON
            template: header
          - type: grid
            cards:
              - type: custom:button-card
                style: |
                  ha-card {
                    background: none;
                    box-shadow: none;                               
                       }
                size: 60%
                show_entity_picture: true
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.sejour_detente
                name: Relax
                entity_picture: /local/lovelace/images/hue/relax.png
              - type: custom:button-card
                style: |
                  ha-card {
                    background: none;
                    box-shadow: none;                               
                       }
                size: 60%
                show_entity_picture: true
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.sejour_concentration
                name: Concentrate
                entity_picture: /local/lovelace/images/hue/concentrate.png
              - type: custom:button-card
                style: |
                  ha-card {
                    background: none;
                    box-shadow: none;                               
                       }
                size: 60%
                show_entity_picture: true
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.sejour_detente
                name: Détente
                entity_picture: /local/lovelace/images/hue/energize.png
              - type: custom:button-card
                style: |
                  ha-card {
                    background: none;
                    box-shadow: none;                               
                       }
                size: 60%
                show_entity_picture: true
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.sejour_crepuscule_tropical
                name: Tropical
                entity_picture: /local/lovelace/images/hue/tropical.png
              - type: custom:button-card
                style: |
                  ha-card {
                    background: none;
                    box-shadow: none;                               
                       }
                size: 60%
                show_entity_picture: true
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.sejour_coucher_de_soleil_sur_la_savane
                name: Savane
                entity_picture: /local/lovelace/images/hue/savane.png
              - type: custom:button-card
                style: |
                  ha-card {
                    background: none;
                    box-shadow: none;                               
                       }
                size: 60%
                show_entity_picture: true
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.sejour_aurore_boreale
                name: Boréale
                entity_picture: /local/lovelace/images/hue/boreale.png
              - type: custom:button-card
                style: |
                  ha-card {
                    background: none;
                    box-shadow: none;                               
                       }
                size: 60%
                show_entity_picture: true
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.sejour_lac_de_printemps
                name: Printemps
                entity_picture: /local/lovelace/images/hue/spring.png
            columns: 7
          - cards:
              - type: grid
                columns: 3
                square: false
                cards:
                  - type: custom:button-card
                    entity: light.salon_1
                    icon: hue:bulb-sultan
                    template:
                      - icon_info_bg
                      - light
                  - type: custom:button-card
                    entity: light.salon_2
                    icon: hue:bulb-sultan
                    template:
                      - icon_info_bg
                      - light
                  - type: custom:button-card
                    entity: light.salon_3
                    icon: hue:bulb-sultan
                    template:
                      - icon_info_bg
                      - light
                  - type: custom:button-card
                    entity: light.ambiance_tele
                    icon: hue:bulb-sultan
                    name: Ambiance TV
                    template:
                      - icon_info_bg
                      - light
                  - type: custom:button-card
                    template:
                      - icon_info_bg
                      - light
                    entity: switch.lumiere_ambiance
                    name: Ambiance
                  - type: custom:button-card
                    template:
                      - icon_info_bg
                      - light
                    entity: switch.led_photo
                    name: LED Photo
                  - type: custom:button-card
                    entity: light.led
                    name: Diffuseur
                    icon: hue:bulb-sultan
                    template:
                      - icon_info_bg
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - box-shadow: >-
                                0px 0px 1px 1px
                                var(--paper-item-icon-active-color)
                            - color: >-
                                0px 0px 1px 1px
                                var(--paper-item-icon-active-color)
                  - type: custom:button-card
                    template:
                      - card_power_outlet
                    entity: switch.spray
                    name: Diffuseur
                  - type: custom:button-card
                    template:
                      - card_power_outlet
                    entity: switch.prise_telephonique
                    name: Telephone
                  - type: custom:button-card
                    template:
                      - card_power_outlet
                    entity: switch.aquarium
                    name: Aquarium
                  - entity: sensor.weather_salon_temperature
                    name: Temperature
                    type: custom:button-card
                    template:
                      - temp_hum
                      - temperature
                  - entity: sensor.weather_bureau_humidity
                    type: custom:button-card
                    name: Humidite
                    template:
                      - temp_hum
                      - humidite
                  - entity: sensor.illuminance_salon_illuminance
                    name: Illuminance
                    type: custom:button-card
                    template:
                      - temp_hum
                      - lux
                  - entity: binary_sensor.detecteur_de_mouvement_salon_motion
                    name: Mouvement 1
                    template:
                      - icon_info_bg
                      - binary_sensor
                    type: custom:button-card
                  - entity: binary_sensor.motion_salon_hd
                    name: Mouvement 2
                    template:
                      - icon_info_bg
                      - binary_sensor
                    type: custom:button-card
                  - entity: binary_sensor.motion_salon_bg
                    name: Mouvement 3
                    template:
                      - icon_info_bg
                      - binary_sensor
                    type: custom:button-card
                  - entity: binary_sensor.motion_salon_bd
                    name: Mouvement 4
                    template:
                      - icon_info_bg
                      - binary_sensor
                    type: custom:button-card
                  - type: custom:button-card
                    entity: binary_sensor.windows_salon
                    template:
                      - icon_info_bg
                      - fenetre
                    name: Salon
                  - entity: media_player.echo_salon
                    template:
                      - icon_info_bg
                      - media
                    type: custom:button-card
            type: vertical-stack
        type: vertical-stack
      - type: vertical-stack
        cards:
          - type: vertical-stack
            cards:
              - cards:
                  - type: custom:button-card
                    name: CUISINE
                    template: header
                  - cards:
                      - type: grid
                        columns: 3
                        square: false
                        cards:
                          - type: custom:button-card
                            entity: light.cuisine
                            icon: hue:bulb-sultan
                            template:
                              - icon_info_bg
                              - light
                          - type: custom:button-card
                            entity: light.led_cuisine
                            icon: hue:bulb-sultan
                            template:
                              - icon_info_bg
                              - light
                          - template: vide
                            type: custom:button-card
                          - entity: sensor.weather_cuisine_temperature
                            name: Temperature
                            type: custom:button-card
                            template:
                              - temp_hum
                              - temperature
                          - entity: sensor.weather_cuisine_humidity
                            type: custom:button-card
                            name: Humidite
                            template:
                              - temp_hum
                              - humidite
                          - entity: sensor.illuminance_cuisine_illuminance
                            name: Illuminance
                            type: custom:button-card
                            template:
                              - temp_hum
                              - lux
                          - entity: binary_sensor.motion_cuisine_hg_zone
                            name: Mouvement 1
                            template:
                              - icon_info_bg
                              - binary_sensor
                            type: custom:button-card
                          - entity: binary_sensor.motion_cusine_bd_zone
                            name: Mouvement 2
                            template:
                              - icon_info_bg
                              - binary_sensor
                            type: custom:button-card
                          - entity: binary_sensor.windows_cuisine_on_off
                            template:
                              - icon_info_bg
                              - fenetre
                            name: Cuisine
                            type: custom:button-card
                          - entity: media_player.echo_cuisine
                            template:
                              - icon_info_bg
                              - media
                            type: custom:button-card
                    type: vertical-stack
                  - type: custom:button-card
                    name: HALL
                    template: header
                  - type: grid
                    columns: 3
                    square: false
                    cards:
                      - type: custom:button-card
                        entity: light.couloir
                        icon: hue:bulb-sultan
                        template:
                          - icon_info_bg
                          - light
                      - type: custom:button-card
                        entity: light.led_couloir_on_off
                        name: LED Couloir
                        icon: hue:bulb-sultan
                        template:
                          - icon_info_bg
                          - light
                      - type: custom:button-card
                        entity: light.entrer
                        icon: hue:bulb-sultan
                        template:
                          - icon_info_bg
                          - light
                      - entity: sensor.weather_couloir_temperature
                        name: Temperature
                        type: custom:button-card
                        template:
                          - temp_hum
                          - temperature
                      - entity: sensor.weather_couloir_humidity
                        type: custom:button-card
                        name: Humidite
                        template:
                          - temp_hum
                          - humidite
                      - type: custom:button-card
                        entity: binary_sensor.fire_couloir_ias_zone
                        template:
                          - icon_info_bg
                          - incendie
                        name: Incendie
                      - entity: binary_sensor.motion_couloir_bd_zone
                        name: Mouvement 1
                        template:
                          - icon_info_bg
                          - binary_sensor
                        type: custom:button-card
                      - entity: binary_sensor.motion_couloir_hg_zone
                        name: Mouvement 2
                        template:
                          - icon_info_bg
                          - binary_sensor
                        type: custom:button-card
                      - entity: binary_sensor.door_entrer
                        template:
                          - icon_info_bg
                          - porte
                        name: Entre
                        type: custom:button-card
                  - type: custom:button-card
                    name: CHAMBRE PARENTS
                    template: header
                  - type: grid
                    columns: 3
                    square: false
                    cards:
                      - type: custom:button-card
                        entity: light.chambre_parentale
                        name: Parents
                        icon: hue:bulb-sultan
                        template:
                          - icon_info_bg
                          - light
                      - type: custom:button-card
                        entity: light.led_lit
                        name: LED lit
                        icon: hue:bulb-sultan
                        template:
                          - icon_info_bg
                          - light
                      - template: vide
                        type: custom:button-card
                      - entity: sensor.weather_ch_parents_temperature
                        name: Temperature
                        type: custom:button-card
                        template:
                          - temp_hum
                          - temperature
                      - entity: sensor.weather_ch_parents_humidity
                        type: custom:button-card
                        name: Humidite
                        template:
                          - temp_hum
                          - humidite
                      - entity: binary_sensor.windows_ch_parents_on_off
                        template:
                          - icon_info_bg
                          - fenetre
                        name: Parents
                        type: custom:button-card
                      - entity: media_player.echo_chambre_parentale
                        name: Echo Parents
                        template:
                          - icon_info_bg
                          - media
                        type: custom:button-card
                  - type: custom:button-card
                    name: CHAMBRE FILLES
                    template: header
                  - type: grid
                    columns: 3
                    square: false
                    cards:
                      - type: custom:button-card
                        entity: light.chambre_fille
                        icon: hue:bulb-sultan
                        template:
                          - icon_info_bg
                          - light
                      - type: custom:button-card
                        template: vide
                      - type: custom:button-card
                        template: vide
                      - type: custom:button-card
                        template:
                          - card_power_outlet
                        entity: switch.guirlande_fille
                        name: Guirlande
                      - template: vide
                        type: custom:button-card
                      - template: vide
                        type: custom:button-card
                      - entity: sensor.weather_ch_filles_temperature
                        name: Temperature
                        type: custom:button-card
                        template:
                          - temp_hum
                          - temperature
                      - entity: sensor.weather_ch_filles_humidity
                        type: custom:button-card
                        name: Humidite
                        template:
                          - temp_hum
                          - humidite
                      - entity: binary_sensor.windows_ch_filles_on_off
                        template:
                          - icon_info_bg
                          - fenetre
                        name: Filles
                        type: custom:button-card
                      - entity: media_player.echo_chambre_filles
                        template:
                          - icon_info_bg
                          - media
                        type: custom:button-card
                type: vertical-stack
      - type: vertical-stack
        cards:
          - cards:
              - type: custom:button-card
                name: SALLE DE BAIN
                template: header
              - type: grid
                columns: 3
                square: false
                cards:
                  - type: custom:button-card
                    entity: light.led_sdb
                    name: Salle de Bain
                    icon: hue:bulb-sultan
                    template:
                      - icon_info_bg
                      - light
                  - type: custom:button-card
                    template: vide
                  - type: custom:button-card
                    template: vide
                  - entity: sensor.weather_sdb_temperature
                    name: Temperature
                    type: custom:button-card
                    template:
                      - temp_hum
                      - temperature
                  - entity: sensor.weather_sdb_humidity
                    type: custom:button-card
                    name: Humidite
                    template:
                      - temp_hum
                      - humidite
                  - type: custom:button-card
                    template: vide
                  - entity: binary_sensor.motion_sdb_bg_zone
                    name: Mouvement
                    template:
                      - icon_info_bg
                      - binary_sensor
                    type: custom:button-card
                  - entity: binary_sensor.motion_sdb_hd_zone
                    name: Mouvement
                    template:
                      - icon_info_bg
                      - binary_sensor
                    type: custom:button-card
                  - type: custom:button-card
                    template: vide
                  - entity: media_player.echo_sdb
                    template:
                      - icon_info_bg
                      - media
                    type: custom:button-card
              - type: custom:button-card
                name: TOILETTE
                template: header
              - type: grid
                columns: 3
                square: false
                cards:
                  - type: custom:button-card
                    entity: light.toilette
                    name: Toilette
                    icon: hue:bulb-sultan
                    template:
                      - icon_info_bg
                      - light
                  - type: custom:button-card
                    template: vide
                  - type: custom:button-card
                    template: vide
                  - entity: sensor.weather_toiette_temperature
                    name: Temperature
                    type: custom:button-card
                    template:
                      - temp_hum
                      - temperature
                  - entity: sensor.weather_toiette_humidity
                    type: custom:button-card
                    name: Humidite
                    template:
                      - temp_hum
                      - humidite
              - type: custom:button-card
                name: PLACARD
                template: header
              - type: grid
                columns: 3
                square: false
                cards:
                  - type: custom:button-card
                    entity: light.placard
                    name: Placard
                    icon: hue:bulb-sultan
                    template:
                      - icon_info_bg
                      - light
                  - type: custom:button-card
                    template: vide
                  - type: custom:button-card
                    template: vide
                  - entity: sensor.weather_placard_temperature
                    name: Temperature
                    type: custom:button-card
                    template:
                      - temp_hum
                      - temperature
                  - entity: sensor.weather_placard_humidity
                    type: custom:button-card
                    name: Humidite
                    template:
                      - temp_hum
                      - humidite
                  - entity: binary_sensor.door_placard_on_off
                    template:
                      - icon_info_bg
                      - porte
                    type: custom:button-card
            type: vertical-stack
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: ASPIRATEUR
            template: header
          - type: vertical-stack
            cards:
              - type: custom:card-templater
                entities:
                  - vacuum.roborock.vacuum.a10
                card:
                  type: picture-elements
                  image: /local/lovelace/images/icon/roborock/S6MaxV-2.png
                  elements:
                    - type: state-label
                      entity: sensor.roborock_vacuum_a10_last_clean_start
                      prefix: 'Dernier lancement: '
                      style:
                        background-color: rgba(0, 0, 0, 0.3)
                        left: 15%
                        bottom: 85%
                        padding: 10px
                        font-size: 16px
                        line-height: 16px
                        color: white
                        transform: translate(0%,0%)
                    - type: state-label
                      prefix: 'Réservoir d''eau: '
                      entity: binary_sensor.roborock_vacuum_a10_water_box_attached
                      style:
                        background-color: rgba(0, 0, 0, 0.3)
                        bottom: 70%
                        padding: 8px
                        font-size: 16px
                        line-height: 2px
                        color: white
                        transform: translate(0%,0%)
                    - type: state-label
                      entity: sensor.roborock_vacuum_a10_last_clean_area
                      prefix: 'Surface: '
                      style:
                        background-color: rgba(0, 0, 0, 0.3)
                        bottom: 70%
                        right: '-10px'
                        padding: 8px
                        font-size: 16px
                        line-height: 2px
                        color: white
                        transform: translate(0%,0%)
                        width: 35%
                    - type: state-label
                      entity: vacuum.roborock_vacuum_a10
                      style:
                        background-color: rgba(0, 0, 0, 0.3)
                        bottom: 12%
                        padding: 8px
                        font-size: 16px
                        line-height: 2px
                        color: white
                        transform: translate(0%,0%)
                    - type: icon
                      title: Batterie
                      icon_template: >-
                        {{ state_attr("vacuum.roborock_vacuum_a10",
                        "battery_icon") }}
                      style:
                        left: 0
                        right: 0
                        bottom: 0
                        background-color: rgba(0, 0, 0, 0.3)
                        padding: 10px
                        font-size: 16px
                        line-height: 16px
                        color: white
                        transform: translate(0%,0%)
                    - type: state-label
                      title: Niveau de batterie
                      entity: sensor.roborock_battery
                      style:
                        left: 25px
                        bottom: 0px
                        padding: 6px
                        font-size: 16px
                        line-height: 16px
                        color: white
                        transform: translate(0%,0%)
                    - type: icon
                      title: Localisation aspirateur
                      icon: mdi:map-marker
                      tap_action:
                        action: call-service
                        service: vacuum.locate
                        target:
                          entity_id: vacuum.roborock_vacuum_a10
                      style:
                        left: 40%
                        bottom: 0
                        padding: 10px
                        font-size: 16px
                        line-height: 16px
                        color: white
                        transform: translate(0%,0%)
                    - type: icon
                      title: Retour à la Base
                      icon: mdi:home-map-marker
                      tap_action:
                        action: call-service
                        service: vacuum.return_to_base
                        target:
                          entity_id: vacuum.roborock_vacuum_a10
                      style:
                        left: 50%
                        bottom: 0
                        padding: 10px
                        font-size: 16px
                        line-height: 16px
                        color: white
                        transform: translate(0%,0%)
                    - type: icon
                      title: Nettoyage chambres
                      icon: mdi:bed-empty
                      tap_action:
                        action: call-service
                        service: script.1643480258425
                      style:
                        right: 70px
                        bottom: 0
                        padding: 10px
                        font-size: 16px
                        line-height: 16px
                        color: white
                        transform: translate(0%,0%)
                    - type: icon
                      title: Nettoyage salon
                      icon: mdi:sofa
                      tap_action:
                        action: call-service
                        service: script.aspirateur_nettoyage_salon
                      style:
                        right: 35px
                        bottom: 0
                        padding: 10px
                        font-size: 16px
                        line-height: 16px
                        color: white
                        transform: translate(0%,0%)
                    - type: icon
                      title: Salle de bain
                      icon: mdi:shower
                      tap_action:
                        action: call-service
                        service: script.1643479726022
                      style:
                        right: 1px
                        bottom: 0
                        padding: 10px
                        font-size: 16px
                        line-height: 16px
                        color: white
                        transform: translate(0%,0%)
                    - type: icon
                      title: Play
                      icon: mdi:play
                      tap_action:
                        action: call-service
                        service: script.aspirateur_play
                      style:
                        background-color: rgba(0, 0, 0, 0.3)
                        left: 35%
                        bottom: 10%
                        padding: 10px
                        font-size: 16px
                        line-height: 16px
                        color: white
                        transform: translate(0%,0%)
                    - type: icon
                      title: pause
                      icon: mdi:pause
                      tap_action:
                        action: call-service
                        service: script.aspirateur_pause
                      style:
                        background-color: rgba(0, 0, 0, 0.3)
                        left: 45%
                        bottom: 10%
                        padding: 10px
                        font-size: 16px
                        line-height: 16px
                        color: white
                        transform: translate(0%,0%)
                    - type: icon
                      title: stop
                      icon: mdi:stop
                      tap_action:
                        action: call-service
                        service: script.aspirateur_stop
                      style:
                        background-color: rgba(0, 0, 0, 0.3)
                        left: 55%
                        bottom: 10%
                        padding: 10px
                        font-size: 16px
                        line-height: 16px
                        color: white
                        transform: translate(0%,0%)
              - type: horizontal-stack
                cards:
                  - type: picture-elements
                    image: /local/lovelace/images/icon/roborock/side_brush.png
                    elements:
                      - type: state-label
                        title: Heures restantes jusqu'àu remplacement de la brosse
                        entity: sensor.roborock_s6_side_brush_hrs_remaining
                        suffix: ' jrs'
                        style:
                          right: '-15px'
                          bottom: '-18px'
                          padding: 10px
                          font-size: 16px
                          line-height: 16px
                          color: white
                          transform: translate(0%,0%)
                      - type: icon
                        icon: mdi:restart
                        title: Reset Hours
                        tap_action:
                          action: call-service
                          service: vacuum.send_command
                          service_data:
                            entity_id: vacuum.roborock_vacuum_a10
                            command: reset_consumable
                            params:
                              - side_brush_work_time
                          confirmation:
                            text: >-
                              Voulez-vous vraiment réinitialiser le compteur de
                              remplacement de la brosse latérale?
                        style:
                          top: 0px
                          right: 0px
                          padding: 7px
                          transform: translate(0%,0%)
                  - type: picture-elements
                    image: /local/lovelace/images/icon/roborock/sensors.png
                    elements:
                      - type: state-label
                        title: Heures restantes avant le nettoyage des capteurs
                        entity: sensor.roborock_s6_sensors_hrs_remaining
                        suffix: ' jrs'
                        style:
                          right: '-15px'
                          bottom: '-18px'
                          padding: 10px
                          font-size: 16px
                          line-height: 16px
                          color: white
                          transform: translate(0%,0%)
                      - type: icon
                        icon: mdi:restart
                        title: Réinitialiser les heures
                        tap_action:
                          action: call-service
                          service: vacuum.send_command
                          service_data:
                            entity_id: vacuum.roborock_vacuum_a10
                            command: reset_consumable
                            params:
                              - sensor_dirty_time
                          confirmation:
                            text: >-
                              Voulez-vous vraiment réinitialiser le compteur de
                              nettoyage des capteurs?
                        style:
                          top: 0px
                          right: 0px
                          padding: 7px
                          transform: translate(0%,0%)
                  - type: picture-elements
                    image: /local/lovelace/images/icon/roborock/filter.png
                    elements:
                      - type: state-label
                        title: Heures restantes avant le remplacement du filtre
                        entity: sensor.roborock_s6_filter_hrs_remaining
                        suffix: ' jrs'
                        style:
                          right: '-15px'
                          bottom: '-18px'
                          padding: 10px
                          font-size: 16px
                          line-height: 16px
                          color: white
                          transform: translate(0%,0%)
                      - type: icon
                        icon: mdi:restart
                        title: Reset Hours
                        tap_action:
                          action: call-service
                          service: vacuum.send_command
                          service_data:
                            entity_id: vacuum.roborock_vacuum_a10
                            command: reset_consumable
                            params:
                              - filter_work_time
                          confirmation:
                            text: >-
                              Voulez-vous vraiment réinitialiser le compteur
                              d'heures restantes avant remplacement du filtre?
                        style:
                          top: 0px
                          right: 0px
                          padding: 7px
                          transform: translate(0%,0%)
                  - type: picture-elements
                    image: /local/lovelace/images/icon/roborock/main_brush.png
                    elements:
                      - type: state-label
                        title: >-
                          Heures restantes jusqu'au remplacement de la brosse
                          principale
                        entity: sensor.roborock_s6_main_brush_hrs_remaining
                        suffix: ' jrs'
                        style:
                          right: '-15px'
                          bottom: '-18px'
                          padding: 10px
                          font-size: 16px
                          line-height: 16px
                          color: white
                          transform: translate(0%,0%)
                      - type: icon
                        icon: mdi:restart
                        title: Reset Hours
                        tap_action:
                          action: call-service
                          service: vacuum.send_command
                          service_data:
                            entity_id: vacuum.roborock_vacuum_a10
                            command: reset_consumable
                            params:
                              - main_brush_work_time
                          confirmation:
                            text: ' Voulez-vous vraiment réinitialiser le compteur d''heures restantes pour remplacer la brosse principale?'
                        style:
                          top: 0px
                          right: 0px
                          padding: 7px
                          transform: translate(0%,0%)
  - theme: Backend-selected
    icon: mdi:weather-partly-cloudy
    title: METEO
    path: meteo
    visible:
      - user: 9b144cacffe2461babcefd46b46f3f61
      - user: 07b9552c7f0c4ede8e5301f34b654e91
      - user: c55ab7f969ff49d2bae763c5e3a363c9
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: DATE ET HEURE
            template: header
          - type: custom:button-card
            template:
              - sidebar
            double_tap_action:
              action: more-info
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Info et Météo
                card:
                  type: vertical-stack
                  cards:
                    - type: markdown
                      content: >
                        <font size= "3"><u> ***Savoir inutile*** </u>:<i>
                        {{states('sensor.savoir_scrape') }}</i>
                      style:
                        .: |
                          ha-card {
                              border-radius: 10px;
                          }
                    - type: custom:meteofrance-weather-card
                      entity: weather.nantes
                      number_of_forecasts: '5'
                      cloudCoverEntity: sensor.nantes_cloud_cover
                      rainChanceEntity: sensor.nantes_rain_chance_2
                      uvEntity: sensor.nantes_uv_2
                      freezeChanceEntity: sensor.nantes_freeze_chance_2
                      snowChanceEntity: sensor.nantes_snow_chance_2
                      alertEntity: sensor.44_weather_alert
                      rainForecastEntity: sensor.nantes_next_rain_2
                      style: |
                        ha-card {
                          --ha-card-background: none !important;
                          border-radius: 10px;
                        }
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: weather.nantes
                template: chips
                name: |
                  [[[
                    if (entity.state == 'unavailable')
                      return "☀️ HS" ;
                    return states['sensor.weather_icon'].state ;
                  ]]]
                show_name: true
                label: |
                  [[[
                    if (entity.state == 'unavailable')
                      return "" ;
                    return  (states['sensor.weather_temperature'].state  );
                  ]]]
                styles:
                  name:
                    - justify-self: center
                    - align-self: center
                  label:
                    - align-self: center
                    - margin-top: 12px
                  grid:
                    - grid-template-areas: '"n l"'
                  card:
                    - opacity: |
                        [[[
                          if (entity.state == 'unavailable')
                            return "50%" ;
                          return "100%";
                        ]]]
                double_tap_action:
                  action: more-info
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Info et Météo
                    card:
                      type: vertical-stack
                      cards:
                        - type: markdown
                          content: >
                            <font size= "3"><font color='lightgrey'><u> Savoir
                            inutile </u>:<i> {{states('sensor.savoir_scrape')
                            }}</i>
                          style:
                            .: |
                              ha-card {
                                  --ha-card-background: none !important;
                                  box-shadow: none !important;
                                  font-family: Avenir;
                              }
                        - type: custom:meteofrance-weather-card
                          entity: weather.nantes
                          number_of_forecasts: '5'
                          cloudCoverEntity: sensor.nantes_cloud_cover
                          rainChanceEntity: sensor.nantes_rain_chance_2
                          uvEntity: sensor.nantes_uv_2
                          freezeChanceEntity: sensor.nantes_freeze_chance_2
                          snowChanceEntity: sensor.nantes_snow_chance_2
                          alertEntity: sensor.44_weather_alert
                          rainForecastEntity: sensor.nantes_next_rain_2
              - type: custom:button-card
                entity: sensor.compteur_home
                name: maison
                template:
                  - chips
                label: |
                  [[[ return "🏠 "+ (entity.state ) ;
                  ]]]
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Info et Météo
                    card:
                      type: grid
                      cards:
                        - type: custom:button-card
                          entity: person.vincent
                          name: vincent
                          aspect_ratio: 1/1
                          show_entity_picture: true
                          show_icon: false
                          show_name: false
                          show_state: false
                          show_label: true
                          label: |
                            [[[
                              return states['sensor.sm_a705fn_battery_level'].state
                            ]]]
                          styles:
                            entity_picture:
                              - border-radius: 50%
                              - top: 5%
                              - left: 5%
                              - width: 40%
                              - color: gray
                              - opacity: 60%
                            name:
                              - top: 5%
                              - left: 8%
                              - position: absolute
                              - color: grey
                              - font-size: 85%
                            state:
                              - top: 79%
                              - left: 5%
                              - position: absolute
                            label:
                              - font-size: 85%
                              - font-weight: bold
                              - top: 58%
                              - left: 8%
                              - position: absolute
                              - color: |
                                  [[[
                                    if (states['person.vincent'].state == "Maison")
                                      return 'darkgrey';
                                    if (states['person.vincent'].state == "Ecole-Emma")
                                      return 'grey';
                                    if (states['person.vincent'].state == "Arthon-en-retz")
                                      return 'grey';
                                    if (states['person.vincent'].state == "Travail")
                                      return 'grey';
                                   if (states['person.vincent'].state == "Pressing")
                                      return 'grey';
                                    return 'red';
                                  ]]]
                            card:
                              - font-size: 100%
                              - border-color: rgba(152, 167, 185, 0.2)
                              - background-color: >
                                  [[[ return (entity.state === 'on' ||
                                  entity.state === 'Maison') ?
                                  'var(--my_color2)' :
                                  'var(--my_color_pastille)'; ]]]
                              - border-style: outset
                              - border-width: 1px
                              - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            custom_fields:
                              vincent_heure:
                                - font-size: 85%
                                - top: 75%
                                - left: 8%
                                - color: grey
                                - position: absolute
                              circle:
                                - top: 10%
                                - left: 55%
                                - width: 35%
                                - position: absolute
                                - letter-spacing: 0.03vw
                                - stroke: |
                                    [[[
                                      if (states['sensor.sm_a705fn_battery_level'].state < 40)
                                        return 'red';
                                     return 'grey';
                                    ]]]
                          extra_styles: |
                            @keyframes ball-scale {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                            @keyframes ball-scale2 {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                  - animation: ball-scale 0.2s
                                  - border-width: 1px
                            - value: 'off'
                              styles:
                                card:
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  - animation: ball-scale2 0.2s
                                  - border-width: 1px
                          custom_fields:
                            vincent_heure: >
                              [[[ return states['sensor.vincent_heure'].state
                              ]]]
                            circle: |
                              [[[ if (entity.state != 'unavailable' ) 
                              {
                                 ;
                                 const radius = 20.5; const circumference = radius * 2 * Math.PI; 
                                 return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="grey" stroke-width="1" fill="none" style="
                                 transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - states['sensor.sm_a705fn_battery_level'].state / 100 * circumference};" />
                                 <text x="50%" y="54%" fill="grey" font-size="13" text-anchor="middle" alignment-baseline="middle">${states['sensor.sm_a705fn_battery_level'].state}%<tspan font-size="10"></tspan></text></svg>`; } ]]]
                          double_tap_action:
                            action: more-info
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: Vincent
                              card:
                                type: custom:vertical-stack-in-card
                                cards:
                                  - type: picture
                                    style: |
                                      ha-card {
                                        border-radius: 10px;
                                        background: var(--my_color2);
                                      }
                                    image: /local/lovelace/images/Vincent.jpg
                                    tap_action:
                                      action: none
                                    hold_action:
                                      action: none
                                  - type: entities
                                    entities:
                                      - entity: person.vincent
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        background: var(--my_color2);
                                        color: lightgrey;
                                      }
                                  - aspect_ratio: '1:1'
                                    dark_mode: true
                                    default_zoom: 15
                                    entities:
                                      - entity: person.vincent
                                    hours_to_show: 12
                                    type: map
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        border-radius: 15px 15px 0px 0px ;
                                        border-top : px solid grey;
                                        border-left : px solid grey;
                                        border-right : px solid grey;
                                      }
                                  - header:
                                      title: 📱Phone ️
                                      show: true
                                      show_states: true
                                      colorize_states: true
                                    experimental:
                                      brush: true
                                    graph_span: 72h
                                    brush:
                                      selection_span: 12h
                                    apex_config:
                                      grid:
                                        show: false
                                      legend:
                                        fontSize: 12px
                                        height: 40
                                      dataLabels:
                                        enabled: false
                                      stroke:
                                        width: 3
                                        curve: smooth
                                      fill:
                                        type: gradient
                                        gradient:
                                          type: vertical
                                          shadeIntensity: 0.8
                                          inverseColors: false
                                          opacityFrom: 0.5
                                          opacityTo: 0
                                          stops:
                                            - - 0
                                              - 50
                                              - 100
                                      tooltip:
                                        enabled: true
                                      yaxis:
                                        - show: true
                                          decimalsInFloat: 0
                                          labels:
                                            style:
                                              colors: '#FFB62E'
                                              fontSize: 12px
                                          forceNiceScale: true
                                        - show: true
                                          decimalsInFloat: 0
                                          opposite: true
                                          labels:
                                            style:
                                              colors: '#2eb9ff'
                                              fontSize: 12px
                                          forceNiceScale: true
                                      xaxis:
                                        axisBorder:
                                          show: false
                                        labels:
                                          style:
                                            fontSize: 14px
                                    series:
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        show:
                                          extremas: false
                                        type: area
                                        color: grey
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a515f_battery_level
                                        name: Patricia
                                        show:
                                          extremas: false
                                        type: area
                                        color: purple
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        color: dodgerblue
                                        fill_raw: last
                                        type: area
                                        stroke_width: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                        show:
                                          in_brush: true
                                          in_chart: false
                                    card_mod:
                                      style: |
                                        ha-card {
                                        background-color: black;
                                        }
                                    type: custom:apexcharts-card
                        - type: custom:button-card
                          entity: person.patricia
                          name: Patricia
                          aspect_ratio: 1/1
                          show_entity_picture: true
                          show_icon: false
                          show_name: false
                          show_state: false
                          show_label: true
                          label: |
                            [[[
                              return states['device_tracker.sm_a515f'].state
                            ]]]
                          styles:
                            entity_picture:
                              - border-radius: 50%
                              - top: 5%
                              - left: 5%
                              - width: 40%
                              - color: gray
                              - opacity: 60%
                            name:
                              - top: 55%
                              - left: 8%
                              - position: absolute
                              - color: grey
                              - font-size: 85%
                            state:
                              - top: 79%
                              - left: 5%
                              - position: absolute
                            label:
                              - font-size: 85%
                              - font-weight: bold
                              - top: 58%
                              - left: 8%
                              - position: absolute
                              - color: |
                                  [[[
                                    if (states['person.Patricia'].state == "Maison")
                                      return 'darkgrey';
                                    if (states['person.Patricia'].state == "Ecole-Emma")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Travail")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Arthon-en-retz")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Pressing")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Appart-nanou")
                                      return 'grey';
                                    return 'red';
                                  ]]]
                            card:
                              - font-size: 100%
                              - border-color: rgba(152, 167, 185, 0.2)
                              - background-color: >
                                  [[[ return (entity.state === 'on' ||
                                  entity.state === 'Maison') ?
                                  'var(--my_color2)' :
                                  'var(--my_color_pastille)'; ]]]
                              - border-style: outset
                              - border-width: 1px
                              - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            custom_fields:
                              Patricia_heure:
                                - font-size: 85%
                                - top: 75%
                                - left: 8%
                                - color: grey
                                - position: absolute
                              circle:
                                - top: 10%
                                - left: 55%
                                - width: 35%
                                - position: absolute
                                - letter-spacing: 0.03vw
                                - stroke: |
                                    [[[
                                      if (states['sensor.sm_a515f_battery_level'].state < 40)
                                        return 'red';
                                     return 'grey';
                                    ]]]
                          extra_styles: |
                            @keyframes ball-scale {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                            @keyframes ball-scale2 {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                  - animation: ball-scale 0.2s
                                  - border-width: 1px
                            - value: 'off'
                              styles:
                                card:
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  - animation: ball-scale2 0.2s
                                  - border-width: 1px
                          custom_fields:
                            Patricia_heure: >
                              [[[ return states['sensor.Patricia_heure'].state
                              ]]]
                            circle: |
                              [[[ if (entity.state != 'unavailable' ) 
                              {
                                 ;
                                 const radius = 20.5; const circumference = radius * 2 * Math.PI; 
                                 return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="grey" stroke-width="1" fill="none" style="
                                 transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - states['sensor.sm_a515f_battery_level'].state / 100 * circumference};" />
                                 <text x="50%" y="54%" fill="grey" font-size="13" text-anchor="middle" alignment-baseline="middle">${states['sensor.sm_a515f_battery_level'].state}%<tspan font-size="10"></tspan></text></svg>`; } ]]]
                          double_tap_action:
                            action: more-info
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: Patricia
                              card:
                                type: custom:vertical-stack-in-card
                                cards:
                                  - type: picture
                                    style: |
                                      ha-card {
                                        border-radius: 10px;
                                        background: var(--my_color2);
                                      }
                                    image: /local/lovelace/images/patricia.png
                                    tap_action:
                                      action: none
                                    hold_action:
                                      action: none
                                  - type: entities
                                    entities:
                                      - entity: person.Patricia
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        background: var(--my_color2);
                                        color: lightgrey;
                                      }
                                  - aspect_ratio: '1:1'
                                    dark_mode: true
                                    default_zoom: 15
                                    entities:
                                      - entity: person.Patricia
                                    hours_to_show: 12
                                    type: map
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        border-radius: 15px 15px 0px 0px ;
                                        border-top : px solid grey;
                                        border-left : px solid grey;
                                        border-right : px solid grey;
                                      }
                                  - header:
                                      title: 📱Phone ️
                                      show: true
                                      show_states: true
                                      colorize_states: true
                                    experimental:
                                      brush: true
                                    graph_span: 72h
                                    brush:
                                      selection_span: 12h
                                    apex_config:
                                      grid:
                                        show: false
                                      legend:
                                        fontSize: 12px
                                        height: 40
                                      dataLabels:
                                        enabled: false
                                      stroke:
                                        width: 3
                                        curve: smooth
                                      fill:
                                        type: gradient
                                        gradient:
                                          type: vertical
                                          shadeIntensity: 0.8
                                          inverseColors: false
                                          opacityFrom: 0.5
                                          opacityTo: 0
                                          stops:
                                            - - 0
                                              - 50
                                              - 100
                                      tooltip:
                                        enabled: true
                                      yaxis:
                                        - show: true
                                          decimalsInFloat: 0
                                          labels:
                                            style:
                                              colors: '#FFB62E'
                                              fontSize: 12px
                                          forceNiceScale: true
                                        - show: true
                                          decimalsInFloat: 0
                                          opposite: true
                                          labels:
                                            style:
                                              colors: '#2eb9ff'
                                              fontSize: 12px
                                          forceNiceScale: true
                                      xaxis:
                                        axisBorder:
                                          show: false
                                        labels:
                                          style:
                                            fontSize: 14px
                                    series:
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        show:
                                          extremas: false
                                        type: area
                                        color: grey
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a515f_battery_level
                                        name: Patricia
                                        show:
                                          extremas: false
                                        type: area
                                        color: purple
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        color: dodgerblue
                                        fill_raw: last
                                        type: area
                                        stroke_width: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                        show:
                                          in_brush: true
                                          in_chart: false
                                    card_mod:
                                      style: |
                                        ha-card {
                                        background-color: black;
                                        }
                                    type: custom:apexcharts-card
                        - type: custom:button-card
                          entity: person.nanou
                          name: nanou
                          aspect_ratio: 1/1
                          show_entity_picture: true
                          show_icon: false
                          show_name: false
                          show_state: false
                          show_label: true
                          label: |
                            [[[
                              return states['device_tracker.sm_nanou'].state
                            ]]]
                          styles:
                            entity_picture:
                              - border-radius: 50%
                              - top: 5%
                              - left: 5%
                              - width: 40%
                              - color: gray
                              - opacity: 60%
                            name:
                              - top: 55%
                              - left: 8%
                              - position: absolute
                              - color: grey
                              - font-size: 85%
                            state:
                              - top: 79%
                              - left: 5%
                              - position: absolute
                            label:
                              - font-size: 85%
                              - font-weight: bold
                              - top: 58%
                              - left: 8%
                              - position: absolute
                              - color: |
                                  [[[
                                    if (states['person.nanou'].state == "Maison")
                                      return 'darkgrey';
                                    if (states['person.nanou'].state == "not_Maison")
                                      return 'red';
                                    return 'red';
                                  ]]]
                            card:
                              - font-size: 100%
                              - border-color: rgba(152, 167, 185, 0.2)
                              - background-color: >
                                  [[[ return (entity.state === 'on' ||
                                  entity.state === 'Maison') ?
                                  'var(--my_color2)' :
                                  'var(--my_color_pastille)'; ]]]
                              - border-style: outset
                              - border-width: 1px
                              - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            custom_fields:
                              tom_heure:
                                - font-size: 85%
                                - top: 75%
                                - left: 8%
                                - color: grey
                                - position: absolute
                          extra_styles: |
                            @keyframes ball-scale {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                            @keyframes ball-scale2 {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                  - animation: ball-scale 0.2s
                                  - border-width: 2px
                            - value: 'off'
                              styles:
                                card:
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  - animation: ball-scale2 0.2s
                                  - border-width: 1px
                          custom_fields:
                            nanou_heure: |
                              [[[ return states['sensor.nanou_heure'].state ]]]
                          double_tap_action:
                            action: more-info
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: tom
                              card:
                                type: custom:vertical-stack-in-card
                                cards:
                                  - type: picture
                                    style: |
                                      ha-card {
                                        border-radius: 10px;
                                        background: var(--my_color2);
                                      }
                                    image: /local/lovelace/images/Nanou.jpg
                                    tap_action:
                                      action: none
                                    hold_action:
                                      action: none
                                  - type: entities
                                    entities:
                                      - entity: person.nanou
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        background: var(--my_color2);
                                        color: lightgrey;
                                      }
                                  - aspect_ratio: '1:1'
                                    dark_mode: true
                                    default_zoom: 15
                                    entities:
                                      - entity: person.nanou
                                    hours_to_show: 12
                                    type: map
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        border-radius: 15px 15px 0px 0px ;
                                        border-top : px solid grey;
                                        border-left : px solid grey;
                                        border-right : px solid grey;
                                      }
                                  - header:
                                      title: 📱Phone ️
                                      show: true
                                      show_states: true
                                      colorize_states: true
                                    experimental:
                                      brush: true
                                    graph_span: 72h
                                    brush:
                                      selection_span: 12h
                                    apex_config:
                                      grid:
                                        show: false
                                      legend:
                                        fontSize: 12px
                                        height: 40
                                      dataLabels:
                                        enabled: false
                                      stroke:
                                        width: 3
                                        curve: smooth
                                      fill:
                                        type: gradient
                                        gradient:
                                          type: vertical
                                          shadeIntensity: 0.8
                                          inverseColors: false
                                          opacityFrom: 0.5
                                          opacityTo: 0
                                          stops:
                                            - - 0
                                              - 50
                                              - 100
                                      tooltip:
                                        enabled: true
                                      yaxis:
                                        - show: true
                                          decimalsInFloat: 0
                                          labels:
                                            style:
                                              colors: '#FFB62E'
                                              fontSize: 12px
                                          forceNiceScale: true
                                        - show: true
                                          decimalsInFloat: 0
                                          opposite: true
                                          labels:
                                            style:
                                              colors: '#2eb9ff'
                                              fontSize: 12px
                                          forceNiceScale: true
                                      xaxis:
                                        axisBorder:
                                          show: false
                                        labels:
                                          style:
                                            fontSize: 14px
                                    series:
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        show:
                                          extremas: false
                                        type: area
                                        color: grey
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a515f_battery_level
                                        name: Patricia
                                        show:
                                          extremas: false
                                        type: area
                                        color: purple
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        color: dodgerblue
                                        fill_raw: last
                                        type: area
                                        stroke_width: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                        show:
                                          in_brush: true
                                          in_chart: false
                                    card_mod:
                                      style: |
                                        ha-card {
                                        background-color: black;
                                        }
                                    type: custom:apexcharts-card
                      square: false
                      columns: 3
              - type: custom:button-card
                entity: sensor.temp_maison
                name: temperature
                template:
                  - chips
                label: |
                  [[[
                    if (entity.state == 'unavailable')
                      return "🌡 indispo" ;
                    if (entity.state == '° / °')
                      return "🌡 indispo" ;
                    return "🌡 " + (entity.state );
                  ]]]
                styles:
                  card:
                    - opacity: |
                        [[[
                          if (entity.state == 'unavailable')
                            return "50%" ;
                          if (entity.state == '°')
                            return "50%" ;
                          return "100%";
                        ]]]
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Température / Humidité
                    card:
                      type: vertical-stack
                      cards:
                        - type: grid
                          cards:
                            - type: custom:button-card
                              entity: sensor.weather_sdb_temperature
                              name: SdB
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              label: |
                                [[[
                                  if (states['sensor.illuminance_salon_illuminance'].state != 'unavailable')
                                    return (states['sensor.illuminance_salon_illuminance'].state ) + " lx" ;
                                  return "";
                                ]]]
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                            - type: custom:button-card
                              entity: sensor.weather_cuisine_temperature
                              name: Cuisine
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                            - type: custom:button-card
                              entity: sensor.weather_ch_parents_temperature
                              name: Parents
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                            - type: custom:button-card
                              entity: sensor.weather_ch_filles_temperature
                              name: Filles
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                          columns: 4
              - type: custom:button-card
                entity: sensor.weather_soleil_icon
                name: maison
                template:
                  - chips
                label: |
                  [[[ return (entity.state ) ;
                  ]]]
          - type: custom:button-card
            name: METEO
            template: header
          - type: horizontal-stack
            cards:
              - type: custom:meteofrance-weather-card
                template: Bordure
                entity: weather.maison
                cloudCoverEntity: sensor.nantes_cloud_cover
                rainChanceEntity: sensor.nantes_rain_chance
                freezeChanceEntity: sensor.nantes_freeze_chance
                snowChanceEntity: sensor.nantes_snow_chance
                uvEntity: sensor.nantes_uv
                rainForecastEntity: sensor.nantes_next_rain
                alertEntity: sensor.44_weather_alert
                current: true
                details: true
                one_hour_forecast: true
                alert_forecast: true
                forecast: true
                number_of_forecasts: '5'
                name: Nantes
          - type: custom:uptime-card
            bar:
              spacing: 4
              height: 10
              round: 4
            icon: mdi:weather-sunny
            entity: sun.sun
            name: Sun
            ko: below_horizon
            color:
              ok: '#F9d71C'
              ko: '#053752'
              half: '#EF810E'
            icon_adaptive_color: true
            show:
              average: false
              status: false
              footer: false
            tooltip: {}
            alias: {}
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: CHAMBRE DES FILLES
            template: header
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - type: attribute
                    entity: sensor.weather_ch_filles_temperature
                name: Temperature
                line_color: green
                line_width: 2
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.weather_ch_filles_humidity
                name: Humidité
                line_color: '#e74c3c'
                line_width: 2
                font_size: 75
          - type: custom:button-card
            name: BUREAU
            template: header
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - type: attribute
                    entity: sensor.weather_salon_temperature
                name: Temperature
                line_color: green
                line_width: 2
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.weather_salon_humidity
                name: Humidité
                line_color: '#e74c3c'
                line_width: 2
                font_size: 75
          - type: custom:button-card
            name: SALON
            template: header
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - type: attribute
                    entity: sensor.weather_salon_temperature
                name: Temperature
                line_color: green
                line_width: 2
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.weather_salon_humidity
                name: Humidité
                line_color: '#e74c3c'
                line_width: 2
                font_size: 75
          - type: custom:button-card
            name: SALON LCD
            template: header
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - type: attribute
                    entity: sensor.cleargrass_dk1_b126_temperature_humidity_sensor
                name: Temperature
                line_color: green
                line_width: 2
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - type: attribute
                    entity: sensor.cleargrass_dk1_b126_relative_humidity
                name: Humidité
                line_color: '#e74c3c'
                line_width: 2
                font_size: 75
          - type: custom:button-card
            name: TOILETTE
            template: header
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - type: attribute
                    entity: sensor.weather_toiette_temperature
                name: Temperature
                line_color: green
                line_width: 2
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.weather_toiette_humidity
                name: Humidité
                line_color: '#e74c3c'
                line_width: 2
                font_size: 75
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: CHAMBRE PARENTS
            template: header
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - type: attribute
                    entity: sensor.weather_ch_parents_temperature
                name: Temperature
                line_color: green
                line_width: 2
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.weather_ch_parents_humidity
                name: Humidité
                line_color: '#e74c3c'
                line_width: 2
                font_size: 75
          - type: custom:button-card
            name: CUISINE
            template: header
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - type: attribute
                    entity: sensor.weather_cuisine_temperature
                name: Temperature
                line_color: green
                line_width: 2
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.weather_cuisine_humidity
                name: Humidité
                line_color: '#e74c3c'
                line_width: 2
                font_size: 75
          - type: custom:button-card
            name: SALLE DE BAIN
            template: header
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - type: attribute
                    entity: sensor.weather_sdb_temperature
                name: Temperature
                line_color: green
                line_width: 2
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.weather_sdb_humidity
                name: Humidité
                line_color: '#e74c3c'
                line_width: 2
                font_size: 75
          - type: custom:button-card
            name: PLACARD
            template: header
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - type: attribute
                    entity: sensor.weather_placard_temperature
                name: Temperature
                line_color: green
                line_width: 2
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.weather_placard_humidity
                name: Humidité
                line_color: '#e74c3c'
                line_width: 2
                font_size: 75
          - type: custom:button-card
            name: HALL
            template: header
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - type: attribute
                    entity: sensor.weather_couloir_temperature
                name: Temperature
                line_color: green
                line_width: 2
                font_size: 75
              - type: custom:mini-graph-card
                entities:
                  - sensor.weather_couloir_humidity
                name: Humidité
                line_color: '#e74c3c'
                line_width: 2
                font_size: 75
      - type: iframe
        style: |
          ha-card {
           background-color: rgba(50,50,50,0.5); /*DARKGRAY*/
           border: 1px solid rgba(245,245,245,0.2); /*GRAY*/
           border-radius: 10px;
            }
        aspect_ratio: 90%
        url: >-
          https://embed.windy.com/embed2.html?lat=47.249&lon=-1.573&zoom=8&level=surface&overlay=wind&menu=&message=true&marker=&calendar=now&pressure=&type=map&location=coordinates&detail=true&detailLat=47.249&detailLon=-1.573&metricWind=default&metricTemp=default&radarRange=-1
  - title: Floorplan
    path: floorplan
    icon: mdi:floor-plan
    type: panel
    badges: []
    cards:
      - type: picture-elements
        image: /local/lovelace/images/appartement.jpeg
        elements:
          - type: state-badge
            entity: alarm_control_panel.alarmo
            style:
              top: 96%
              left: 3%
              width: 0%
          - type: state-badge
            entity: person.vincent
            style:
              top: 96%
              left: 11%
              width: 0%
          - type: state-badge
            entity: person.patricia
            style:
              top: 96%
              left: 19%
              width: 0%
          - type: state-badge
            entity: person.emma
            style:
              top: 96%
              left: 27%
              width: 0%
          - type: image
            entity: group.light_salon
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/light/light_bulb_off.png
            state_image:
              'on': /local/lovelace/images/icon/light/light_bulb_on.png
            state_filter:
              'on': brightness(130%) saturate(1.5) drop-shadow(0px 0px 10px gold)
              'off': brightness(80%) saturate(0.8)
            style:
              top: 40%
              left: 80%
              width: 5%
              padding: 9px
          - type: state-label
            entity: sensor.weather_salon_temperature
            style:
              top: 10%
              left: 92%
              background: >-
                center / contain no-repeat
                url("/local/lovelace/images/icon/ecobee_blank.png")
              text-align: center
              font-size: 9px
              color: white
          - type: image
            entity: binary_sensor.windows_salon
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/windows-door/contact-closed.png
            state_image:
              'on': /local/lovelace/images/icon/windows-door/contact-open.png
            style:
              top: 84%
              left: 76%
              width: 5%
              padding: 9px
          - type: image
            entity: light.cuisine
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/light/light_bulb_off.png
            state_image:
              'on': /local/lovelace/images/icon/light/light_bulb_on.png
            state_filter:
              'on': brightness(130%) saturate(1.5) drop-shadow(0px 0px 10px gold)
              'off': brightness(80%) saturate(0.8)
            style:
              top: 50%
              left: 58%
              width: 5%
              padding: 9px
          - type: state-label
            entity: sensor.weather_cuisine_temperature
            style:
              top: 33%
              left: 55%
              background: >-
                center / contain no-repeat
                url("/local/lovelace/images/icon/ecobee_blank.png")
              text-align: center
              font-size: 9px
              color: white
          - type: image
            entity: binary_sensor.windows_cuisine_on_off
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/windows-door/contact-closed.png
            state_image:
              'on': /local/lovelace/images/icon/windows-door/contact-open.png
            style:
              top: 84%
              left: 62%
              width: 5%
              padding: 9px
          - type: image
            entity: light.chambre_parentale
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/light/light_bulb_off.png
            state_image:
              'on': /local/lovelace/images/icon/light/light_bulb_on.png
            state_filter:
              'on': brightness(130%) saturate(1.5) drop-shadow(0px 0px 10px gold)
              'off': brightness(80%) saturate(0.8)
            style:
              top: 50%
              left: 40%
              width: 5%
              padding: 9px
          - type: state-label
            entity: sensor.weather_ch_parents_temperature
            style:
              top: 78%
              left: 30%
              background: >-
                center / contain no-repeat
                url("/local/lovelace/images/icon/ecobee_blank.png")
              text-align: center
              font-size: 9px
              color: white
          - type: image
            entity: binary_sensor.windows_ch_parents_on_off
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/windows-door/contact-closed.png
            state_image:
              'on': /local/lovelace/images/icon/windows-door/contact-open.png
            style:
              top: 84%
              left: 34%
              width: 5%
              padding: 9px
          - type: image
            entity: light.chambre_fille
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/light/light_bulb_off.png
            state_image:
              'on': /local/lovelace/images/icon/light/light_bulb_on.png
            state_filter:
              'on': brightness(130%) saturate(1.5) drop-shadow(0px 0px 10px gold)
              'off': brightness(80%) saturate(0.8)
            style:
              top: 50%
              left: 16%
              width: 5%
              padding: 9px
          - type: state-label
            entity: sensor.weather_ch_filles_temperature
            style:
              top: 78%
              left: 8%
              background: >-
                center / contain no-repeat
                url("/local/lovelace/images/icon/ecobee_blank.png")
              text-align: center
              font-size: 9px
              color: white
          - type: image
            entity: binary_sensor.windows_ch_filles_on_off
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/windows-door/contact-closed.png
            state_image:
              'on': /local/lovelace/images/icon/windows-door/contact-open.png
            style:
              top: 84%
              left: 20%
              width: 5%
              padding: 9px
          - type: image
            entity: light.entrer
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/light/light_bulb_off.png
            state_image:
              'on': /local/lovelace/images/icon/light/light_bulb_on.png
            state_filter:
              'on': brightness(130%) saturate(1.5) drop-shadow(0px 0px 10px gold)
              'off': brightness(80%) saturate(0.8)
            style:
              top: 23%
              left: 60%
              width: 5%
              padding: 9px
          - type: image
            entity: light.couloir
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/light/light_bulb_off.png
            state_image:
              'on': /local/lovelace/images/icon/light/light_bulb_on.png
            state_filter:
              'on': brightness(130%) saturate(1.5) drop-shadow(0px 0px 10px gold)
              'off': brightness(80%) saturate(0.8)
            style:
              top: 23%
              left: 32%
              width: 5%
              padding: 9px
          - type: state-label
            entity: sensor.weather_couloir_temperature
            style:
              top: 10%
              left: 65%
              background: >-
                center / contain no-repeat
                url("/local/lovelace/images/icon/ecobee_blank.png")
              text-align: center
              font-size: 9px
              color: white
          - type: image
            entity: binary_sensor.door_entrer
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/windows-door/frontdoor-closed.png
            state_image:
              'on': /local/lovelace/images/icon/windows-door/frontdoor-open.png
            style:
              top: 7%
              left: 61%
              width: 5%
              padding: 9px
          - type: image
            entity: light.toilette
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/light/light_bulb_off.png
            state_image:
              'on': /local/lovelace/images/icon/light/light_bulb_on.png
            state_filter:
              'on': brightness(130%) saturate(1.5) drop-shadow(0px 0px 10px gold)
              'off': brightness(80%) saturate(0.8)
            style:
              top: 10%
              left: 32%
              width: 5%
              padding: 9px
          - type: state-label
            entity: sensor.weather_toiette_temperature
            style:
              top: 10%
              left: 22%
              background: >-
                center / contain no-repeat
                url("/local/lovelace/images/icon/ecobee_blank.png")
              text-align: center
              font-size: 9px
              color: white
          - type: state-label
            entity: sensor.weather_sdb_temperature
            style:
              top: 10%
              left: 8%
              background: >-
                center / contain no-repeat
                url("/local/lovelace/images/icon/ecobee_blank.png")
              text-align: center
              font-size: 9px
              color: white
          - type: image
            entity: light.placard
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/light/light_bulb_off.png
            state_image:
              'on': /local/lovelace/images/icon/light/light_bulb_on.png
            state_filter:
              'on': brightness(130%) saturate(1.5) drop-shadow(0px 0px 10px gold)
              'off': brightness(80%) saturate(0.8)
            style:
              top: 10%
              left: 45%
              width: 5%
              padding: 9px
          - type: image
            entity: binary_sensor.door_placard_on_off
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/windows-door/door-closed.png
            state_image:
              'on': /local/lovelace/images/icon/windows-door/door-open.png
            style:
              top: 17%
              left: 43%
              width: 5%
              padding: 9px
          - type: state-label
            entity: sensor.weather_placard_temperature
            style:
              top: 10%
              left: 40%
              background: >-
                center / contain no-repeat
                url("/local/lovelace/images/icon/ecobee_blank.png")
              text-align: center
              font-size: 9px
              color: white
          - type: image
            entity: vacuum.roborock_vacuum_a10
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/roborock/docked1.png
            state_image:
              cleaning: /local/lovelace/images/icon/roborock/chemin.png
            style:
              top: 29%
              left: 40%
              width: 10%
              padding: 19px
          - type: image
            entity: binary_sensor.fire_couloir_ias_zone
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/fire/fire.png
            state_image:
              'on': /local/lovelace/images/icon/fire/fire-on.png
            style:
              top: 24%
              left: 39%
              width: 2%
              padding: 9px
          - type: image
            entity: binary_sensor.motion_sdb_zone
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/motion-hd_off.png
            state_image:
              'on': /local/lovelace/images/icon/motion-hd_on.png
            style:
              top: 26%
              left: 3%
              width: 2%
              padding: 9px
          - type: image
            entity: binary_sensor.motion_cusine_bd_zone
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/motion-hg_off.png
            state_image:
              'on': /local/lovelace/images/icon/motion-hg_on.png
            style:
              top: 83%
              left: 67%
              width: 2%
              padding: 9px
          - type: image
            entity: binary_sensor.motion_cuisine_hg_zone
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/motion-bd_off.png
            state_image:
              'on': /local/lovelace/images/icon/motion-bd_on.png
            style:
              top: 31%
              left: 51%
              width: 2%
              padding: 9px
          - type: image
            entity: binary_sensor.motion_couloir_bd_zone
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/motion-hg_off.png
            state_image:
              'on': /local/lovelace/images/icon/motion-hg_on.png
            style:
              top: 26%
              left: 67%
              width: 2%
              padding: 9px
          - type: image
            entity: binary_sensor.motion_couloir_hg_zone
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/motion-bd_off.png
            state_image:
              'on': /local/lovelace/images/icon/motion-bd_on.png
            style:
              top: 18%
              left: 21%
              width: 2%
              padding: 9px
          - type: image
            entity: binary_sensor.motion_salon_bd
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/motion-hg_off.png
            state_image:
              'on': /local/lovelace/images/icon/motion-hg_on.png
            style:
              top: 83%
              left: 97%
              width: 2%
              padding: 9px
          - type: image
            entity: binary_sensor.motion_salon_hd
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/motion-bg_off.png
            state_image:
              'on': /local/lovelace/images/icon/motion-bg_on.png
            style:
              top: 6%
              left: 97%
              width: 2%
              padding: 9px
          - type: image
            entity: binary_sensor.detecteur_de_mouvement_salon_motion
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/motion-bg_off.png
            state_image:
              'on': /local/lovelace/images/icon/motion-bg_on.png
            style:
              top: 40%
              left: 97%
              width: 2%
              padding: 9px
          - type: image
            entity: binary_sensor.motion_salon_bg
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/motion-hd_off.png
            state_image:
              'on': /local/lovelace/images/icon/motion-hd_on.png
            style:
              top: 83%
              left: 70%
              width: 2%
              padding: 9px
          - type: image
            entity: binary_sensor.motion_sdb_hd_zone
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            image: /local/lovelace/images/icon/motion-bg_off.png
            state_image:
              'on': /local/lovelace/images/icon/motion-bg_on.png
            style:
              top: 6%
              left: 19%
              width: 2%
              padding: 9px
  - theme: Backend-selected
    title: Horoscope
    path: horoscope
    icon: mdi:information-variant
    visible:
      - user: 9b144cacffe2461babcefd46b46f3f61
      - user: 07b9552c7f0c4ede8e5301f34b654e91
      - user: c55ab7f969ff49d2bae763c5e3a363c9
    badges: []
    cards:
      - cards:
          - type: custom:button-card
            name: DATE
            template:
              - header
          - type: vertical-stack
            cards:
              - type: custom:button-card
                template:
                  - sidebar
                double_tap_action:
                  action: more-info
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Info et Météo
                    card:
                      type: vertical-stack
                      cards:
                        - type: markdown
                          content: >
                            <font size= "3"><u> ***Savoir inutile*** </u>:<i>
                            {{states('sensor.savoir_scrape') }}</i>
                          style:
                            .: |
                              ha-card {
                                  border-radius: 10px;
                              }
                        - type: custom:meteofrance-weather-card
                          entity: weather.nantes
                          number_of_forecasts: '5'
                          cloudCoverEntity: sensor.nantes_cloud_cover
                          rainChanceEntity: sensor.nantes_rain_chance_2
                          uvEntity: sensor.nantes_uv_2
                          freezeChanceEntity: sensor.nantes_freeze_chance_2
                          snowChanceEntity: sensor.nantes_snow_chance_2
                          alertEntity: sensor.44_weather_alert
                          rainForecastEntity: sensor.nantes_next_rain_2
                          style: |
                            ha-card {
                              --ha-card-background: none !important;
                              border-radius: 10px;
                            }
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: weather.nantes
                    template: chips
                    name: |
                      [[[
                        if (entity.state == 'unavailable')
                          return "☀️ HS" ;
                        return states['sensor.weather_icon'].state ;
                      ]]]
                    show_name: true
                    label: |
                      [[[
                        if (entity.state == 'unavailable')
                          return "" ;
                        return  (states['sensor.weather_temperature'].state  );
                      ]]]
                    styles:
                      name:
                        - justify-self: center
                        - align-self: center
                      label:
                        - align-self: center
                        - margin-top: 12px
                      grid:
                        - grid-template-areas: '"n l"'
                      card:
                        - opacity: |
                            [[[
                              if (entity.state == 'unavailable')
                                return "50%" ;
                              return "100%";
                            ]]]
                    double_tap_action:
                      action: more-info
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        command: popup
                        title: Info et Météo
                        card:
                          type: vertical-stack
                          cards:
                            - type: markdown
                              content: >
                                <font size= "3"><font color='lightgrey'><u>
                                Savoir inutile </u>:<i>
                                {{states('sensor.savoir_scrape') }}</i>
                              style:
                                .: |
                                  ha-card {
                                      --ha-card-background: none !important;
                                      box-shadow: none !important;
                                      font-family: Avenir;
                                  }
                            - type: custom:meteofrance-weather-card
                              entity: weather.nantes
                              number_of_forecasts: '5'
                              cloudCoverEntity: sensor.nantes_cloud_cover
                              rainChanceEntity: sensor.nantes_rain_chance_2
                              uvEntity: sensor.nantes_uv_2
                              freezeChanceEntity: sensor.nantes_freeze_chance_2
                              snowChanceEntity: sensor.nantes_snow_chance_2
                              alertEntity: sensor.44_weather_alert
                              rainForecastEntity: sensor.nantes_next_rain_2
                  - type: custom:button-card
                    entity: sensor.compteur_home
                    name: maison
                    template:
                      - chips
                    label: |
                      [[[ return "🏠 "+ (entity.state ) ;
                      ]]]
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        command: popup
                        title: Info et Météo
                        card:
                          type: grid
                          cards:
                            - type: custom:button-card
                              entity: person.vincent
                              name: vincent
                              aspect_ratio: 1/1
                              show_entity_picture: true
                              show_icon: false
                              show_name: false
                              show_state: false
                              show_label: true
                              label: |
                                [[[
                                  return states['sensor.sm_a705fn_battery_level'].state
                                ]]]
                              styles:
                                entity_picture:
                                  - border-radius: 50%
                                  - top: 5%
                                  - left: 5%
                                  - width: 40%
                                  - color: gray
                                  - opacity: 60%
                                name:
                                  - top: 5%
                                  - left: 8%
                                  - position: absolute
                                  - color: grey
                                  - font-size: 85%
                                state:
                                  - top: 79%
                                  - left: 5%
                                  - position: absolute
                                label:
                                  - font-size: 85%
                                  - font-weight: bold
                                  - top: 58%
                                  - left: 8%
                                  - position: absolute
                                  - color: |
                                      [[[
                                        if (states['person.vincent'].state == "Maison")
                                          return 'darkgrey';
                                        if (states['person.vincent'].state == "Ecole-Emma")
                                          return 'grey';
                                        if (states['person.vincent'].state == "Arthon-en-retz")
                                          return 'grey';
                                        if (states['person.vincent'].state == "Travail")
                                          return 'grey';
                                       if (states['person.vincent'].state == "Pressing")
                                          return 'grey';
                                        return 'red';
                                      ]]]
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: >
                                      [[[ return (entity.state === 'on' ||
                                      entity.state === 'Maison') ?
                                      'var(--my_color2)' :
                                      'var(--my_color_pastille)'; ]]]
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                custom_fields:
                                  vincent_heure:
                                    - font-size: 85%
                                    - top: 75%
                                    - left: 8%
                                    - color: grey
                                    - position: absolute
                                  circle:
                                    - top: 10%
                                    - left: 55%
                                    - width: 35%
                                    - position: absolute
                                    - letter-spacing: 0.03vw
                                    - stroke: |
                                        [[[
                                          if (states['sensor.sm_a705fn_battery_level'].state < 40)
                                            return 'red';
                                         return 'grey';
                                        ]]]
                              extra_styles: |
                                @keyframes ball-scale {
                                  from {
                                    transform: scale(1);
                                  }
                                  to {
                                    transform: scale(0.90);
                                  }
                                }
                                @keyframes ball-scale2 {
                                  from {
                                    transform: scale(1);
                                  }
                                  to {
                                    transform: scale(0.90);
                                  }
                                }
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                      - animation: ball-scale 0.2s
                                      - border-width: 1px
                                - value: 'off'
                                  styles:
                                    card:
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                      - animation: ball-scale2 0.2s
                                      - border-width: 1px
                              custom_fields:
                                vincent_heure: >
                                  [[[ return
                                  states['sensor.vincent_heure'].state ]]]
                                circle: |
                                  [[[ if (entity.state != 'unavailable' ) 
                                  {
                                     ;
                                     const radius = 20.5; const circumference = radius * 2 * Math.PI; 
                                     return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="grey" stroke-width="1" fill="none" style="
                                     transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - states['sensor.sm_a705fn_battery_level'].state / 100 * circumference};" />
                                     <text x="50%" y="54%" fill="grey" font-size="13" text-anchor="middle" alignment-baseline="middle">${states['sensor.sm_a705fn_battery_level'].state}%<tspan font-size="10"></tspan></text></svg>`; } ]]]
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  command: popup
                                  title: Vincent
                                  card:
                                    type: custom:vertical-stack-in-card
                                    cards:
                                      - type: picture
                                        style: |
                                          ha-card {
                                            border-radius: 10px;
                                            background: var(--my_color2);
                                          }
                                        image: /local/lovelace/images/Vincent.jpg
                                        tap_action:
                                          action: none
                                        hold_action:
                                          action: none
                                      - type: entities
                                        entities:
                                          - entity: person.vincent
                                        style: |
                                          ha-card {
                                            border-radius: 15px ;
                                            background: var(--my_color2);
                                            color: lightgrey;
                                          }
                                      - aspect_ratio: '1:1'
                                        dark_mode: true
                                        default_zoom: 15
                                        entities:
                                          - entity: person.vincent
                                        hours_to_show: 12
                                        type: map
                                        style: |
                                          ha-card {
                                            border-radius: 15px ;
                                            border-radius: 15px 15px 0px 0px ;
                                            border-top : px solid grey;
                                            border-left : px solid grey;
                                            border-right : px solid grey;
                                          }
                                      - header:
                                          title: 📱Phone ️
                                          show: true
                                          show_states: true
                                          colorize_states: true
                                        experimental:
                                          brush: true
                                        graph_span: 72h
                                        brush:
                                          selection_span: 12h
                                        apex_config:
                                          grid:
                                            show: false
                                          legend:
                                            fontSize: 12px
                                            height: 40
                                          dataLabels:
                                            enabled: false
                                          stroke:
                                            width: 3
                                            curve: smooth
                                          fill:
                                            type: gradient
                                            gradient:
                                              type: vertical
                                              shadeIntensity: 0.8
                                              inverseColors: false
                                              opacityFrom: 0.5
                                              opacityTo: 0
                                              stops:
                                                - - 0
                                                  - 50
                                                  - 100
                                          tooltip:
                                            enabled: true
                                          yaxis:
                                            - show: true
                                              decimalsInFloat: 0
                                              labels:
                                                style:
                                                  colors: '#FFB62E'
                                                  fontSize: 12px
                                              forceNiceScale: true
                                            - show: true
                                              decimalsInFloat: 0
                                              opposite: true
                                              labels:
                                                style:
                                                  colors: '#2eb9ff'
                                                  fontSize: 12px
                                              forceNiceScale: true
                                          xaxis:
                                            axisBorder:
                                              show: false
                                            labels:
                                              style:
                                                fontSize: 14px
                                        series:
                                          - entity: sensor.sm_a705fn_battery_level
                                            name: Vincent
                                            show:
                                              extremas: false
                                            type: area
                                            color: grey
                                            fill_raw: last
                                            float_precision: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                          - entity: sensor.sm_a515f_battery_level
                                            name: Patricia
                                            show:
                                              extremas: false
                                            type: area
                                            color: purple
                                            fill_raw: last
                                            float_precision: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                          - entity: sensor.sm_a705fn_battery_level
                                            name: Vincent
                                            color: dodgerblue
                                            fill_raw: last
                                            type: area
                                            stroke_width: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                            show:
                                              in_brush: true
                                              in_chart: false
                                        card_mod:
                                          style: |
                                            ha-card {
                                            background-color: black;
                                            }
                                        type: custom:apexcharts-card
                            - type: custom:button-card
                              entity: person.patricia
                              name: Patricia
                              aspect_ratio: 1/1
                              show_entity_picture: true
                              show_icon: false
                              show_name: false
                              show_state: false
                              show_label: true
                              label: |
                                [[[
                                  return states['device_tracker.sm_a515f'].state
                                ]]]
                              styles:
                                entity_picture:
                                  - border-radius: 50%
                                  - top: 5%
                                  - left: 5%
                                  - width: 40%
                                  - color: gray
                                  - opacity: 60%
                                name:
                                  - top: 55%
                                  - left: 8%
                                  - position: absolute
                                  - color: grey
                                  - font-size: 85%
                                state:
                                  - top: 79%
                                  - left: 5%
                                  - position: absolute
                                label:
                                  - font-size: 85%
                                  - font-weight: bold
                                  - top: 58%
                                  - left: 8%
                                  - position: absolute
                                  - color: |
                                      [[[
                                        if (states['person.Patricia'].state == "Maison")
                                          return 'darkgrey';
                                        if (states['person.Patricia'].state == "Ecole-Emma")
                                          return 'grey';
                                        if (states['person.Patricia'].state == "Travail")
                                          return 'grey';
                                        if (states['person.Patricia'].state == "Arthon-en-retz")
                                          return 'grey';
                                        if (states['person.Patricia'].state == "Pressing")
                                          return 'grey';
                                        if (states['person.Patricia'].state == "Appart-nanou")
                                          return 'grey';
                                        return 'red';
                                      ]]]
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: >
                                      [[[ return (entity.state === 'on' ||
                                      entity.state === 'Maison') ?
                                      'var(--my_color2)' :
                                      'var(--my_color_pastille)'; ]]]
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                custom_fields:
                                  Patricia_heure:
                                    - font-size: 85%
                                    - top: 75%
                                    - left: 8%
                                    - color: grey
                                    - position: absolute
                                  circle:
                                    - top: 10%
                                    - left: 55%
                                    - width: 35%
                                    - position: absolute
                                    - letter-spacing: 0.03vw
                                    - stroke: |
                                        [[[
                                          if (states['sensor.sm_a515f_battery_level'].state < 40)
                                            return 'red';
                                         return 'grey';
                                        ]]]
                              extra_styles: |
                                @keyframes ball-scale {
                                  from {
                                    transform: scale(1);
                                  }
                                  to {
                                    transform: scale(0.90);
                                  }
                                }
                                @keyframes ball-scale2 {
                                  from {
                                    transform: scale(1);
                                  }
                                  to {
                                    transform: scale(0.90);
                                  }
                                }
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                      - animation: ball-scale 0.2s
                                      - border-width: 1px
                                - value: 'off'
                                  styles:
                                    card:
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                      - animation: ball-scale2 0.2s
                                      - border-width: 1px
                              custom_fields:
                                Patricia_heure: >
                                  [[[ return
                                  states['sensor.Patricia_heure'].state ]]]
                                circle: |
                                  [[[ if (entity.state != 'unavailable' ) 
                                  {
                                     ;
                                     const radius = 20.5; const circumference = radius * 2 * Math.PI; 
                                     return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="grey" stroke-width="1" fill="none" style="
                                     transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - states['sensor.sm_a515f_battery_level'].state / 100 * circumference};" />
                                     <text x="50%" y="54%" fill="grey" font-size="13" text-anchor="middle" alignment-baseline="middle">${states['sensor.sm_a515f_battery_level'].state}%<tspan font-size="10"></tspan></text></svg>`; } ]]]
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  command: popup
                                  title: Patricia
                                  card:
                                    type: custom:vertical-stack-in-card
                                    cards:
                                      - type: picture
                                        style: |
                                          ha-card {
                                            border-radius: 10px;
                                            background: var(--my_color2);
                                          }
                                        image: /local/lovelace/images/patricia.png
                                        tap_action:
                                          action: none
                                        hold_action:
                                          action: none
                                      - type: entities
                                        entities:
                                          - entity: person.Patricia
                                        style: |
                                          ha-card {
                                            border-radius: 15px ;
                                            background: var(--my_color2);
                                            color: lightgrey;
                                          }
                                      - aspect_ratio: '1:1'
                                        dark_mode: true
                                        default_zoom: 15
                                        entities:
                                          - entity: person.Patricia
                                        hours_to_show: 12
                                        type: map
                                        style: |
                                          ha-card {
                                            border-radius: 15px ;
                                            border-radius: 15px 15px 0px 0px ;
                                            border-top : px solid grey;
                                            border-left : px solid grey;
                                            border-right : px solid grey;
                                          }
                                      - header:
                                          title: 📱Phone ️
                                          show: true
                                          show_states: true
                                          colorize_states: true
                                        experimental:
                                          brush: true
                                        graph_span: 72h
                                        brush:
                                          selection_span: 12h
                                        apex_config:
                                          grid:
                                            show: false
                                          legend:
                                            fontSize: 12px
                                            height: 40
                                          dataLabels:
                                            enabled: false
                                          stroke:
                                            width: 3
                                            curve: smooth
                                          fill:
                                            type: gradient
                                            gradient:
                                              type: vertical
                                              shadeIntensity: 0.8
                                              inverseColors: false
                                              opacityFrom: 0.5
                                              opacityTo: 0
                                              stops:
                                                - - 0
                                                  - 50
                                                  - 100
                                          tooltip:
                                            enabled: true
                                          yaxis:
                                            - show: true
                                              decimalsInFloat: 0
                                              labels:
                                                style:
                                                  colors: '#FFB62E'
                                                  fontSize: 12px
                                              forceNiceScale: true
                                            - show: true
                                              decimalsInFloat: 0
                                              opposite: true
                                              labels:
                                                style:
                                                  colors: '#2eb9ff'
                                                  fontSize: 12px
                                              forceNiceScale: true
                                          xaxis:
                                            axisBorder:
                                              show: false
                                            labels:
                                              style:
                                                fontSize: 14px
                                        series:
                                          - entity: sensor.sm_a705fn_battery_level
                                            name: Vincent
                                            show:
                                              extremas: false
                                            type: area
                                            color: grey
                                            fill_raw: last
                                            float_precision: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                          - entity: sensor.sm_a515f_battery_level
                                            name: Patricia
                                            show:
                                              extremas: false
                                            type: area
                                            color: purple
                                            fill_raw: last
                                            float_precision: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                          - entity: sensor.sm_a705fn_battery_level
                                            name: Vincent
                                            color: dodgerblue
                                            fill_raw: last
                                            type: area
                                            stroke_width: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                            show:
                                              in_brush: true
                                              in_chart: false
                                        card_mod:
                                          style: |
                                            ha-card {
                                            background-color: black;
                                            }
                                        type: custom:apexcharts-card
                            - type: custom:button-card
                              entity: person.nanou
                              name: nanou
                              aspect_ratio: 1/1
                              show_entity_picture: true
                              show_icon: false
                              show_name: false
                              show_state: false
                              show_label: true
                              label: |
                                [[[
                                  return states['device_tracker.sm_nanou'].state
                                ]]]
                              styles:
                                entity_picture:
                                  - border-radius: 50%
                                  - top: 5%
                                  - left: 5%
                                  - width: 40%
                                  - color: gray
                                  - opacity: 60%
                                name:
                                  - top: 55%
                                  - left: 8%
                                  - position: absolute
                                  - color: grey
                                  - font-size: 85%
                                state:
                                  - top: 79%
                                  - left: 5%
                                  - position: absolute
                                label:
                                  - font-size: 85%
                                  - font-weight: bold
                                  - top: 58%
                                  - left: 8%
                                  - position: absolute
                                  - color: |
                                      [[[
                                        if (states['person.nanou'].state == "Maison")
                                          return 'darkgrey';
                                        if (states['person.nanou'].state == "not_Maison")
                                          return 'red';
                                        return 'red';
                                      ]]]
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: >
                                      [[[ return (entity.state === 'on' ||
                                      entity.state === 'Maison') ?
                                      'var(--my_color2)' :
                                      'var(--my_color_pastille)'; ]]]
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                custom_fields:
                                  tom_heure:
                                    - font-size: 85%
                                    - top: 75%
                                    - left: 8%
                                    - color: grey
                                    - position: absolute
                              extra_styles: |
                                @keyframes ball-scale {
                                  from {
                                    transform: scale(1);
                                  }
                                  to {
                                    transform: scale(0.90);
                                  }
                                }
                                @keyframes ball-scale2 {
                                  from {
                                    transform: scale(1);
                                  }
                                  to {
                                    transform: scale(0.90);
                                  }
                                }
                              state:
                                - value: 'on'
                                  styles:
                                    card:
                                      - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                      - animation: ball-scale 0.2s
                                      - border-width: 2px
                                - value: 'off'
                                  styles:
                                    card:
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                      - animation: ball-scale2 0.2s
                                      - border-width: 1px
                              custom_fields:
                                nanou_heure: >
                                  [[[ return states['sensor.nanou_heure'].state
                                  ]]]
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: fire-dom-event
                                browser_mod:
                                  command: popup
                                  title: tom
                                  card:
                                    type: custom:vertical-stack-in-card
                                    cards:
                                      - type: picture
                                        style: |
                                          ha-card {
                                            border-radius: 10px;
                                            background: var(--my_color2);
                                          }
                                        image: /local/lovelace/images/Nanou.jpg
                                        tap_action:
                                          action: none
                                        hold_action:
                                          action: none
                                      - type: entities
                                        entities:
                                          - entity: person.nanou
                                        style: |
                                          ha-card {
                                            border-radius: 15px ;
                                            background: var(--my_color2);
                                            color: lightgrey;
                                          }
                                      - aspect_ratio: '1:1'
                                        dark_mode: true
                                        default_zoom: 15
                                        entities:
                                          - entity: person.nanou
                                        hours_to_show: 12
                                        type: map
                                        style: |
                                          ha-card {
                                            border-radius: 15px ;
                                            border-radius: 15px 15px 0px 0px ;
                                            border-top : px solid grey;
                                            border-left : px solid grey;
                                            border-right : px solid grey;
                                          }
                                      - header:
                                          title: 📱Phone ️
                                          show: true
                                          show_states: true
                                          colorize_states: true
                                        experimental:
                                          brush: true
                                        graph_span: 72h
                                        brush:
                                          selection_span: 12h
                                        apex_config:
                                          grid:
                                            show: false
                                          legend:
                                            fontSize: 12px
                                            height: 40
                                          dataLabels:
                                            enabled: false
                                          stroke:
                                            width: 3
                                            curve: smooth
                                          fill:
                                            type: gradient
                                            gradient:
                                              type: vertical
                                              shadeIntensity: 0.8
                                              inverseColors: false
                                              opacityFrom: 0.5
                                              opacityTo: 0
                                              stops:
                                                - - 0
                                                  - 50
                                                  - 100
                                          tooltip:
                                            enabled: true
                                          yaxis:
                                            - show: true
                                              decimalsInFloat: 0
                                              labels:
                                                style:
                                                  colors: '#FFB62E'
                                                  fontSize: 12px
                                              forceNiceScale: true
                                            - show: true
                                              decimalsInFloat: 0
                                              opposite: true
                                              labels:
                                                style:
                                                  colors: '#2eb9ff'
                                                  fontSize: 12px
                                              forceNiceScale: true
                                          xaxis:
                                            axisBorder:
                                              show: false
                                            labels:
                                              style:
                                                fontSize: 14px
                                        series:
                                          - entity: sensor.sm_a705fn_battery_level
                                            name: Vincent
                                            show:
                                              extremas: false
                                            type: area
                                            color: grey
                                            fill_raw: last
                                            float_precision: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                          - entity: sensor.sm_a515f_battery_level
                                            name: Patricia
                                            show:
                                              extremas: false
                                            type: area
                                            color: purple
                                            fill_raw: last
                                            float_precision: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                          - entity: sensor.sm_a705fn_battery_level
                                            name: Vincent
                                            color: dodgerblue
                                            fill_raw: last
                                            type: area
                                            stroke_width: 1
                                            group_by:
                                              duration: 10min
                                              func: avg
                                            show:
                                              in_brush: true
                                              in_chart: false
                                        card_mod:
                                          style: |
                                            ha-card {
                                            background-color: black;
                                            }
                                        type: custom:apexcharts-card
                          square: false
                          columns: 3
                  - type: custom:button-card
                    entity: sensor.temp_maison
                    name: temperature
                    template:
                      - chips
                    label: |
                      [[[
                        if (entity.state == 'unavailable')
                          return "🌡 indispo" ;
                        if (entity.state == '° / °')
                          return "🌡 indispo" ;
                        return "🌡 " + (entity.state );
                      ]]]
                    styles:
                      card:
                        - opacity: |
                            [[[
                              if (entity.state == 'unavailable')
                                return "50%" ;
                              if (entity.state == '° / °')
                                return "50%" ;
                              return "100%";
                            ]]]
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        command: popup
                        title: Température / Humidité
                        card:
                          type: vertical-stack
                          cards:
                            - type: grid
                              cards:
                                - type: custom:button-card
                                  entity: sensor.temperature_29
                                  name: SdB
                                  aspect_ratio: 1/1
                                  icon: mdi:thermometer
                                  show_icon: false
                                  show_name: true
                                  show_state: true
                                  show_label: true
                                  show_last_changed: true
                                  label: |
                                    [[[
                                      if (states['sensor.lightlevel_7'].state != 'unavailable')
                                        return (states['sensor.lightlevel_7'].state ) + " lx" ;
                                      return "";
                                    ]]]
                                  styles:
                                    state:
                                      - font-size: 110%
                                      - color: |
                                          [[[
                                            if (entity.state < 20)
                                              return 'dodgerblue';
                                            if (entity.state > 23)
                                              return 'tomato';
                                            return 'lightgrey';
                                          ]]]
                                    name:
                                      - font-size: 90%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-bottom: 15%
                                      - color: grey
                                    label:
                                      - font-size: 70%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-top: 10%
                                      - color: grey
                                    card:
                                      - font-size: 100%
                                      - border-color: rgba(152, 167, 185, 0.2)
                                      - background-color: var(--my_color2)
                                      - border-style: outset
                                      - border-width: 1px
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  double_tap_action:
                                    action: more-info
                                  tap_action:
                                    action: more-info
                                - type: custom:button-card
                                  entity: sensor.temperature_23
                                  name: Cuisine
                                  aspect_ratio: 1/1
                                  icon: mdi:thermometer
                                  show_icon: false
                                  show_name: true
                                  show_state: true
                                  show_label: true
                                  show_last_changed: true
                                  styles:
                                    state:
                                      - font-size: 110%
                                      - color: |
                                          [[[
                                            if (entity.state < 20)
                                              return 'dodgerblue';
                                            if (entity.state > 23)
                                              return 'tomato';
                                            return 'lightgrey';
                                          ]]]
                                    name:
                                      - font-size: 90%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-bottom: 15%
                                      - color: grey
                                    label:
                                      - font-size: 70%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-top: 10%
                                      - color: grey
                                    card:
                                      - font-size: 100%
                                      - border-color: rgba(152, 167, 185, 0.2)
                                      - background-color: var(--my_color2)
                                      - border-style: outset
                                      - border-width: 1px
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  double_tap_action:
                                    action: more-info
                                  tap_action:
                                    action: more-info
                                - type: custom:button-card
                                  entity: sensor.temperature_32
                                  name: Parents
                                  aspect_ratio: 1/1
                                  icon: mdi:thermometer
                                  show_icon: false
                                  show_name: true
                                  show_state: true
                                  show_label: true
                                  show_last_changed: true
                                  styles:
                                    state:
                                      - font-size: 110%
                                      - color: |
                                          [[[
                                            if (entity.state < 20)
                                              return 'dodgerblue';
                                            if (entity.state > 23)
                                              return 'tomato';
                                            return 'lightgrey';
                                          ]]]
                                    name:
                                      - font-size: 90%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-bottom: 15%
                                      - color: grey
                                    label:
                                      - font-size: 70%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-top: 10%
                                      - color: grey
                                    card:
                                      - font-size: 100%
                                      - border-color: rgba(152, 167, 185, 0.2)
                                      - background-color: var(--my_color2)
                                      - border-style: outset
                                      - border-width: 1px
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  double_tap_action:
                                    action: more-info
                                  tap_action:
                                    action: more-info
                                - type: custom:button-card
                                  entity: sensor.temperature_41
                                  name: Filles
                                  aspect_ratio: 1/1
                                  icon: mdi:thermometer
                                  show_icon: false
                                  show_name: true
                                  show_state: true
                                  show_label: true
                                  show_last_changed: true
                                  styles:
                                    state:
                                      - font-size: 110%
                                      - color: |
                                          [[[
                                            if (entity.state < 20)
                                              return 'dodgerblue';
                                            if (entity.state > 23)
                                              return 'tomato';
                                            return 'lightgrey';
                                          ]]]
                                    name:
                                      - font-size: 90%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-bottom: 15%
                                      - color: grey
                                    label:
                                      - font-size: 70%
                                      - align-self: middle
                                      - justify-self: center
                                      - padding-top: 10%
                                      - color: grey
                                    card:
                                      - font-size: 100%
                                      - border-color: rgba(152, 167, 185, 0.2)
                                      - background-color: var(--my_color2)
                                      - border-style: outset
                                      - border-width: 1px
                                      - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  double_tap_action:
                                    action: more-info
                                  tap_action:
                                    action: more-info
                              columns: 4
                            - type: vertical-stack
                              cards:
                                - header:
                                    title: 🛋 température chambre
                                    show: true
                                    show_states: true
                                    colorize_states: true
                                  experimental:
                                    brush: true
                                  graph_span: 72h
                                  brush:
                                    selection_span: 12h
                                  apex_config:
                                    grid:
                                      show: false
                                    legend:
                                      fontSize: 12px
                                      height: 40
                                    dataLabels:
                                      enabled: false
                                    stroke:
                                      width: 3
                                      curve: smooth
                                    fill:
                                      type: gradient
                                      gradient:
                                        type: vertical
                                        shadeIntensity: 0.8
                                        inverseColors: false
                                        opacityFrom: 0.5
                                        opacityTo: 0
                                        stops:
                                          - - 0
                                            - 50
                                            - 100
                                    tooltip:
                                      enabled: true
                                    xaxis:
                                      axisBorder:
                                        show: false
                                      labels:
                                        style:
                                          fontSize: 14px
                                  series:
                                    - entity: sensor.temperature_41
                                      name: Filles
                                      show:
                                        extremas: false
                                      type: area
                                      color: grey
                                      fill_raw: last
                                      float_precision: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                    - entity: sensor.temperature_32
                                      name: Parent
                                      show:
                                        extremas: false
                                      type: area
                                      color: violet
                                      fill_raw: last
                                      float_precision: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                    - entity: sensor.temperature_29
                                      name: SdB
                                      show:
                                        extremas: false
                                      type: area
                                      color: red
                                      fill_raw: last
                                      float_precision: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                    - entity: sensor.temp_moyenne_salon_cuisine
                                      name: Moyenne
                                      color: dodgerblue
                                      fill_raw: last
                                      type: area
                                      stroke_width: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                      show:
                                        in_brush: true
                                        in_chart: false
                                  card_mod:
                                    style: |
                                      ha-card {
                                      background-color: black;
                                      }
                                  type: custom:apexcharts-card
                                - header:
                                    title: 🛋  humidité salon cuisine
                                    show: true
                                    show_states: true
                                    colorize_states: true
                                  experimental:
                                    brush: true
                                  graph_span: 72h
                                  brush:
                                    selection_span: 12h
                                  apex_config:
                                    grid:
                                      show: false
                                    legend:
                                      fontSize: 12px
                                      height: 40
                                    dataLabels:
                                      enabled: false
                                    stroke:
                                      width: 3
                                      curve: smooth
                                    fill:
                                      type: gradient
                                      gradient:
                                        type: vertical
                                        shadeIntensity: 0.8
                                        inverseColors: false
                                        opacityFrom: 0.5
                                        opacityTo: 0
                                        stops:
                                          - - 0
                                            - 50
                                            - 100
                                    tooltip:
                                      enabled: true
                                    xaxis:
                                      axisBorder:
                                        show: false
                                      labels:
                                        style:
                                          fontSize: 14px
                                  series:
                                    - entity: sensor.humidity_39
                                      name: Séjour
                                      show:
                                        extremas: false
                                      type: area
                                      color: grey
                                      fill_raw: last
                                      float_precision: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                    - entity: sensor.humidity_51
                                      name: Couloir
                                      show:
                                        extremas: false
                                      type: area
                                      color: violet
                                      fill_raw: last
                                      float_precision: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                    - entity: sensor.humidity_24
                                      name: Cuisine
                                      show:
                                        extremas: false
                                      type: area
                                      color: red
                                      fill_raw: last
                                      float_precision: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                  card_mod:
                                    style: |
                                      ha-card {
                                      background-color: black;
                                      }
                                  type: custom:apexcharts-card
                            - type: vertical-stack
                              cards:
                                - header:
                                    title: 🛏Chambres température
                                    show: true
                                    show_states: true
                                    colorize_states: true
                                  experimental:
                                    brush: true
                                  graph_span: 72h
                                  brush:
                                    selection_span: 12h
                                  apex_config:
                                    grid:
                                      show: false
                                    legend:
                                      fontSize: 12px
                                      height: 40
                                    dataLabels:
                                      enabled: false
                                    stroke:
                                      width: 3
                                      curve: smooth
                                    fill:
                                      type: gradient
                                      gradient:
                                        type: vertical
                                        shadeIntensity: 0.8
                                        inverseColors: false
                                        opacityFrom: 0.5
                                        opacityTo: 0
                                        stops:
                                          - - 0
                                            - 50
                                            - 100
                                    tooltip:
                                      enabled: true
                                    xaxis:
                                      axisBorder:
                                        show: false
                                      labels:
                                        style:
                                          fontSize: 14px
                                  series:
                                    - entity: sensor.temperature_32
                                      name: Parents
                                      show:
                                        extremas: false
                                      type: area
                                      color: grey
                                      fill_raw: last
                                      float_precision: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                    - entity: sensor.temperature_41
                                      name: Filles
                                      show:
                                        extremas: false
                                      type: area
                                      color: dodgerblue
                                      fill_raw: last
                                      float_precision: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                    - entity: sensor.temperature_32
                                      name: Parents
                                      color: grey
                                      fill_raw: last
                                      type: area
                                      stroke_width: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                      show:
                                        in_brush: true
                                        in_chart: false
                                  card_mod:
                                    style: |
                                      ha-card {
                                      background-color: black;
                                      }
                                  type: custom:apexcharts-card
                                - header:
                                    title: 🛏Chambres humidité
                                    show: true
                                    show_states: true
                                    colorize_states: true
                                  experimental:
                                    brush: true
                                  graph_span: 72h
                                  brush:
                                    selection_span: 12h
                                  apex_config:
                                    grid:
                                      show: false
                                    legend:
                                      fontSize: 12px
                                      height: 40
                                    dataLabels:
                                      enabled: false
                                    stroke:
                                      width: 3
                                      curve: smooth
                                    fill:
                                      type: gradient
                                      gradient:
                                        type: vertical
                                        shadeIntensity: 0.8
                                        inverseColors: false
                                        opacityFrom: 0.5
                                        opacityTo: 0
                                        stops:
                                          - - 0
                                            - 50
                                            - 100
                                    tooltip:
                                      enabled: true
                                    xaxis:
                                      axisBorder:
                                        show: false
                                      labels:
                                        style:
                                          fontSize: 14px
                                  series:
                                    - entity: sensor.humidity_33
                                      name: Parents
                                      show:
                                        extremas: false
                                      type: area
                                      color: grey
                                      fill_raw: last
                                      float_precision: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                    - entity: sensor.humidity_42
                                      name: Filles
                                      show:
                                        extremas: false
                                      type: area
                                      color: dodgerblue
                                      fill_raw: last
                                      float_precision: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                    - entity: sensor.temperature_32
                                      name: Parents
                                      color: grey
                                      fill_raw: last
                                      type: area
                                      stroke_width: 1
                                      group_by:
                                        duration: 10min
                                        func: avg
                                      show:
                                        in_brush: true
                                        in_chart: false
                                  card_mod:
                                    style: |
                                      ha-card {
                                      background-color: black;
                                      }
                                  type: custom:apexcharts-card
                  - type: custom:button-card
                    entity: sensor.weather_soleil_icon
                    name: maison
                    template:
                      - chips
                    label: |
                      [[[ return (entity.state ) ;
                      ]]]
              - type: markdown
                content: >
                  <font size= "3"><u> ***Savoir inutile*** </u>:<i>
                  {{states('sensor.savoir_scrape') }}</i>
                style:
                  .: |
                    ha-card {
                        --ha-card-background: none !important;
                        box-shadow: none !important;
                    }
        type: vertical-stack
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: HOROSCOPE
            template:
              - header
          - cards:
              - cards:
                  - type: grid
                    columns: 3
                    square: false
                    cards:
                      - type: custom:button-card
                        entity: sensor.belier
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: popup
                            title: Horooscope
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  content: >
                                    <font size= "3"><font color='grey'><u>
                                    Belier </u>:<i> {{states('sensor.belier')
                                    }}</i>
                                  style:
                                    .: |
                                      ha-card {
                                          --ha-card-background: none !important;
                                          box-shadow: none !important;
                                          font-family: Avenir;
                                      }
                        template:
                          - icon_info
                        icon: mdi:zodiac-aries
                        show_label: false
                      - type: custom:button-card
                        entity: sensor.taureau
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: popup
                            title: Horooscope
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  content: >
                                    <font size= "3"><font color='grey'><u>
                                    Taureau </u>:<i> {{states('sensor.taureau')
                                    }}</i>
                                  style:
                                    .: |
                                      ha-card {
                                          --ha-card-background: none !important;
                                          box-shadow: none !important;
                                          font-family: Avenir;
                                      }
                        template:
                          - icon_info
                        icon: mdi:zodiac-taurus
                        show_label: false
                      - type: custom:button-card
                        entity: sensor.gemeaux
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: popup
                            title: Horooscope
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  content: >
                                    <font size= "3"><font color='grey'><u>
                                    Gemeaux </u>:<i> {{states('sensor.gemeaux')
                                    }}</i>
                                  style:
                                    .: |
                                      ha-card {
                                          --ha-card-background: none !important;
                                          box-shadow: none !important;
                                          font-family: Avenir;
                                      }
                        template:
                          - icon_info
                        icon: mdi:zodiac-gemini
                        show_label: false
                      - type: custom:button-card
                        entity: sensor.cancer
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: popup
                            title: Horooscope
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  content: >
                                    <font size= "3"><font color='grey'><u>
                                    Cancer </u>:<i> {{states('sensor.cancer')
                                    }}</i>
                                  style:
                                    .: |
                                      ha-card {
                                          --ha-card-background: none !important;
                                          box-shadow: none !important;
                                          font-family: Avenir;
                                      }
                        template:
                          - icon_info
                        icon: mdi:zodiac-cancer
                        show_label: false
                      - type: custom:button-card
                        entity: sensor.lion
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: popup
                            title: Horooscope
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  content: >
                                    <font size= "3"><font color='grey'><u> Lion
                                    </u>:<i> {{states('sensor.lion') }}</i>
                                  style:
                                    .: |
                                      ha-card {
                                          --ha-card-background: none !important;
                                          box-shadow: none !important;
                                          font-family: Avenir;
                                      }
                        template:
                          - icon_info
                        icon: mdi:zodiac-leo
                        show_label: false
                      - type: custom:button-card
                        entity: sensor.vierge
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: popup
                            title: Horooscope
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  content: >
                                    <font size= "3"><font color='grey'><u>
                                    Vierge </u>:<i> {{states('sensor.vierge')
                                    }}</i>
                                  style:
                                    .: |
                                      ha-card {
                                          --ha-card-background: none !important;
                                          box-shadow: none !important;
                                          font-family: Avenir;
                                      }
                        template:
                          - icon_info
                        icon: mdi:zodiac-virgo
                        show_label: false
                      - type: custom:button-card
                        entity: sensor.balance
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: popup
                            title: Horooscope
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  content: >
                                    <font size= "3"><font color='grey'><u>
                                    Balance </u>:<i> {{states('sensor.balance')
                                    }}</i>
                                  style:
                                    .: |
                                      ha-card {
                                          --ha-card-background: none !important;
                                          box-shadow: none !important;
                                          font-family: Avenir;
                                      }
                        template:
                          - icon_info
                        icon: mdi:zodiac-libra
                        show_label: false
                      - type: custom:button-card
                        entity: sensor.scorpion
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: popup
                            title: Horooscope
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  content: >
                                    <font size= "3"><font color='grey'><u>
                                    Scorpion </u>:<i>
                                    {{states('sensor.scorpion') }}</i>
                                  style:
                                    .: |
                                      ha-card {
                                          --ha-card-background: none !important;
                                          box-shadow: none !important;
                                          font-family: Avenir;
                                      }
                        template:
                          - icon_info
                        icon: mdi:zodiac-scorpio
                        show_label: false
                      - type: custom:button-card
                        entity: sensor.sagittaire
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: popup
                            title: Horooscope
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  content: >
                                    <font size= "3"><font color='grey'><u>
                                    Sagittaire </u>:<i>
                                    {{states('sensor.sagittaire') }}</i>
                                  style:
                                    .: |
                                      ha-card {
                                          --ha-card-background: none !important;
                                          box-shadow: none !important;
                                          font-family: Avenir;
                                      }
                        template:
                          - icon_info
                        icon: mdi:zodiac-sagittarius
                        show_label: false
                      - type: custom:button-card
                        entity: sensor.capricorne
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: popup
                            title: Horooscope
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  content: >
                                    <font size= "3"><font color='grey'><u>
                                    Capricorne </u>:<i>
                                    {{states('sensor.capricorne') }}</i>
                                  style:
                                    .: |
                                      ha-card {
                                          --ha-card-background: none !important;
                                          box-shadow: none !important;
                                          font-family: Avenir;
                                      }
                        template:
                          - icon_info
                        icon: mdi:zodiac-capricorn
                        show_label: false
                      - type: custom:button-card
                        entity: sensor.verseau
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: popup
                            title: Horooscope
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  content: >
                                    <font size= "3"><font color='grey'><u>
                                    Verseau </u>:<i> {{states('sensor.verseau')
                                    }}</i>
                                  style:
                                    .: |
                                      ha-card {
                                          --ha-card-background: none !important;
                                          box-shadow: none !important;
                                          font-family: Avenir;
                                      }
                        template:
                          - icon_info
                        icon: mdi:zodiac-aquarius
                        show_label: false
                      - type: custom:button-card
                        entity: sensor.poissons
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: popup
                            title: Horooscope
                            card:
                              type: vertical-stack
                              cards:
                                - type: markdown
                                  content: >
                                    <font size= "3"><font color='grey'><u>
                                    Poissons </u>:<i>
                                    {{states('sensor.poissons') }}</i>
                                  style:
                                    .: |
                                      ha-card {
                                          --ha-card-background: none !important;
                                          box-shadow: none !important;
                                          font-family: Avenir;
                                      }
                        template:
                          - icon_info
                        icon: mdi:zodiac-pisces
                        show_label: false
                type: vertical-stack
            type: vertical-stack
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: PHASE DE LA LUNE
            template:
              - header
          - cards:
              - type: custom:button-card
                entity: sensor.moon_phases
                name: 'Lune :'
                aspect_ratio: 4.2/1
                layout: icon_name_state2nd
                show_state: true
                show_name: true
                show_entity_picture: true
                size: 48%
                styles:
                  card:
                    - padding: 0.3em
                    - '--mdc-ripple-color': rgb(31, 111, 235)
                    - '--mdc-ripple-press-opacity': 0.5
                  icon:
                    - opacity: 1
                  name:
                    - font-size: 0.85em
                    - white-space: normal
                  state:
                    - font-size: 0.85em
                    - white-space: normal
            type: vertical-stack
          - type: custom:button-card
            name: SAISONS
            template:
              - header
          - type: custom:button-card
            entity: sensor.season
            show_entity_picture: true
            template: saison
            name: 'Saisons :'
            aspect_ratio: 4.2/1
            layout: icon_name_state2nd
            show_state: true
            show_icon: true
            size: 48%
            styles:
              card:
                - padding: 0.3em
                - '--mdc-ripple-color': rgb(31, 111, 235)
                - '--mdc-ripple-press-opacity': 0.5
              icon:
                - opacity: 1
              name:
                - font-size: 0.85em
                - white-space: normal
              state:
                - font-size: 0.85em
                - white-space: normal
      - type: vertical-stack
        cards:
          - type: custom:button-card
            styles:
              card:
                - box-shadow: 0px 0px 10px 3px var(--paper-item-icon-active-color
            name: <center><b>POLLENS</b></center>
            template:
              - header
          - type: custom:stack-in-card
            keep:
              border_radius: true
            cards:
              - type: custom:button-card
                entity: sensor.pollens
                name: Pollens
                icon: mdi:alert
                color_type: icon
                size: 10%
                template:
                  - Bordure
                  - Pollens
              - type: custom:auto-entities
                card:
                  type: grid
                  columns: 4
                card_param: cards
                filter:
                  include:
                    - entity_id: sensor.pollens_risks_*
                      options:
                        type: custom:button-card
                        template:
                          - Bordure
                          - Pollens
                        color_type: icon
                        size: 60%
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: TOO GOOD TO GO
            template:
              - header
          - type: grid
            columns: 3
            square: false
            cards:
              - entity: >-
                  sensor.tgtg_hyper_u_la_chapelle_sur_erdre_panier_boucherie_volaille_16eur
                name: Hyper U - boucherie
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: >-
                  sensor.tgtg_hyper_u_la_chapelle_sur_erdre_panier_boulangerie_patisserie_12eur
                name: Hyper U - patisserie
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: >-
                  sensor.tgtg_hyper_u_la_chapelle_sur_erdre_panier_boulangerie_viennoiserie_8eur
                name: Hyper U - viennoiserie
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: >-
                  sensor.tgtg_hyper_u_la_chapelle_sur_erdre_panier_charcuterie_traiteur_12eur
                name: Hyper U - charcuterie
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: >-
                  sensor.tgtg_hyper_u_la_chapelle_sur_erdre_panier_fruits_et_legumes_15eur
                name: Hyper U - legumes
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: sensor.tgtg_hyper_u_la_chapelle_sur_erdre_panier_mixte_18eur
                name: Hyper U - mixte
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: >-
                  sensor.tgtg_hyper_u_la_chapelle_sur_erdre_panier_poissonnerie_16eur
                name: Hyper U - poisson
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: >-
                  sensor.tgtg_hyper_u_la_chapelle_sur_erdre_panier_patisserie_15eur
                name: Hyper U - patisserie
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: sensor.tgtg_le_petit_casino_nantes_berlioz
                name: Casino Berlioz
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - type: custom:button-card
                entity: sensor.tgtg_promocash_nantes_petit_panier
                template:
                  - temp_hum
                  - tgtg
                name: Promocash GP
              - type: custom:button-card
                entity: sensor.tgtg_promocash_nantes_grand_panier
                template:
                  - temp_hum
                  - tgtg
                name: Promocash GP
              - type: custom:button-card
                entity: sensor.tgtg_promocash_nantes_panier_gros_format
                template:
                  - temp_hum
                  - tgtg
                name: Promocash PP
              - entity: sensor.tgtg_carrefour_city_nantes_yvernogeau
                name: Carrefou Yvernogeau
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: sensor.tgtg_e_leclerc_drive_nantes_paridis_produits_frais
                name: Paridis - frais
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: >-
                  sensor.tgtg_e_leclerc_nantes_paridis_panier_boulangerie_viennoiserie
                name: Paridis - viennoiserie
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: sensor.tgtg_chronodrive_orvault_panier_fruits_legumes
                name: Chronodrive -legume
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: sensor.tgtg_chronodrive_orvault_panier_mixte
                name: Chronodrive - mixte
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
              - entity: sensor.tgtg_atelier_du_chocolat_de_st_herblain_grand_panier
                name: Chocolat
                template:
                  - temp_hum
                  - tgtg
                type: custom:button-card
  - theme: Backend-selected
    title: 'Caméra '
    path: camera
    icon: mdi:video
    visible:
      - user: 9b144cacffe2461babcefd46b46f3f61
      - user: 07b9552c7f0c4ede8e5301f34b654e91
      - user: c55ab7f969ff49d2bae763c5e3a363c9
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: DATE
            template:
              - header
          - type: custom:button-card
            template:
              - sidebar
            double_tap_action:
              action: more-info
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Info et Météo
                card:
                  type: vertical-stack
                  cards:
                    - type: markdown
                      content: >
                        <font size= "3"><u> ***Savoir inutile*** </u>:<i>
                        {{states('sensor.savoir_scrape') }}</i>
                      style:
                        .: |
                          ha-card {
                              border-radius: 10px;
                          }
                    - type: custom:meteofrance-weather-card
                      entity: weather.nantes
                      number_of_forecasts: '5'
                      cloudCoverEntity: sensor.nantes_cloud_cover
                      rainChanceEntity: sensor.nantes_rain_chance_2
                      uvEntity: sensor.nantes_uv_2
                      freezeChanceEntity: sensor.nantes_freeze_chance_2
                      snowChanceEntity: sensor.nantes_snow_chance_2
                      alertEntity: sensor.44_weather_alert
                      rainForecastEntity: sensor.nantes_next_rain_2
                      style: |
                        ha-card {
                          --ha-card-background: none !important;
                          border-radius: 10px;
                        }
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: weather.nantes
                template: chips
                name: |
                  [[[
                    if (entity.state == 'unavailable')
                      return "☀️ HS" ;
                    return states['sensor.weather_icon'].state ;
                  ]]]
                show_name: true
                label: |
                  [[[
                    if (entity.state == 'unavailable')
                      return "" ;
                    return  (states['sensor.weather_temperature'].state  );
                  ]]]
                styles:
                  name:
                    - justify-self: center
                    - align-self: center
                  label:
                    - align-self: center
                    - margin-top: 12px
                  grid:
                    - grid-template-areas: '"n l"'
                  card:
                    - opacity: |
                        [[[
                          if (entity.state == 'unavailable')
                            return "50%" ;
                          return "100%";
                        ]]]
                double_tap_action:
                  action: more-info
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Info et Météo
                    card:
                      type: vertical-stack
                      cards:
                        - type: markdown
                          content: >
                            <font size= "3"><font color='lightgrey'><u> Savoir
                            inutile </u>:<i> {{states('sensor.savoir_scrape')
                            }}</i>
                          style:
                            .: |
                              ha-card {
                                  --ha-card-background: none !important;
                                  box-shadow: none !important;
                                  font-family: Avenir;
                              }
                        - type: custom:meteofrance-weather-card
                          entity: weather.nantes
                          number_of_forecasts: '5'
                          cloudCoverEntity: sensor.nantes_cloud_cover
                          rainChanceEntity: sensor.nantes_rain_chance_2
                          uvEntity: sensor.nantes_uv_2
                          freezeChanceEntity: sensor.nantes_freeze_chance_2
                          snowChanceEntity: sensor.nantes_snow_chance_2
                          alertEntity: sensor.44_weather_alert
                          rainForecastEntity: sensor.nantes_next_rain_2
              - type: custom:button-card
                entity: sensor.compteur_home
                name: maison
                template:
                  - chips
                label: |
                  [[[ return "🏠 "+ (entity.state ) ;
                  ]]]
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Info et Météo
                    card:
                      type: grid
                      cards:
                        - type: custom:button-card
                          entity: person.vincent
                          name: vincent
                          aspect_ratio: 1/1
                          show_entity_picture: true
                          show_icon: false
                          show_name: false
                          show_state: false
                          show_label: true
                          label: |
                            [[[
                              return states['sensor.sm_a705fn_battery_level'].state
                            ]]]
                          styles:
                            entity_picture:
                              - border-radius: 50%
                              - top: 5%
                              - left: 5%
                              - width: 40%
                              - color: gray
                              - opacity: 60%
                            name:
                              - top: 5%
                              - left: 8%
                              - position: absolute
                              - color: grey
                              - font-size: 85%
                            state:
                              - top: 79%
                              - left: 5%
                              - position: absolute
                            label:
                              - font-size: 85%
                              - font-weight: bold
                              - top: 58%
                              - left: 8%
                              - position: absolute
                              - color: |
                                  [[[
                                    if (states['person.vincent'].state == "Maison")
                                      return 'darkgrey';
                                    if (states['person.vincent'].state == "Ecole-Emma")
                                      return 'grey';
                                    if (states['person.vincent'].state == "Arthon-en-retz")
                                      return 'grey';
                                    if (states['person.vincent'].state == "Travail")
                                      return 'grey';
                                   if (states['person.vincent'].state == "Pressing")
                                      return 'grey';
                                    return 'red';
                                  ]]]
                            card:
                              - font-size: 100%
                              - border-color: rgba(152, 167, 185, 0.2)
                              - background-color: >
                                  [[[ return (entity.state === 'on' ||
                                  entity.state === 'Maison') ?
                                  'var(--my_color2)' :
                                  'var(--my_color_pastille)'; ]]]
                              - border-style: outset
                              - border-width: 1px
                              - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            custom_fields:
                              vincent_heure:
                                - font-size: 85%
                                - top: 75%
                                - left: 8%
                                - color: grey
                                - position: absolute
                              circle:
                                - top: 10%
                                - left: 55%
                                - width: 35%
                                - position: absolute
                                - letter-spacing: 0.03vw
                                - stroke: |
                                    [[[
                                      if (states['sensor.sm_a705fn_battery_level'].state < 40)
                                        return 'red';
                                     return 'grey';
                                    ]]]
                          extra_styles: |
                            @keyframes ball-scale {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                            @keyframes ball-scale2 {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                  - animation: ball-scale 0.2s
                                  - border-width: 1px
                            - value: 'off'
                              styles:
                                card:
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  - animation: ball-scale2 0.2s
                                  - border-width: 1px
                          custom_fields:
                            vincent_heure: >
                              [[[ return states['sensor.vincent_heure'].state
                              ]]]
                            circle: |
                              [[[ if (entity.state != 'unavailable' ) 
                              {
                                 ;
                                 const radius = 20.5; const circumference = radius * 2 * Math.PI; 
                                 return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="grey" stroke-width="1" fill="none" style="
                                 transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - states['sensor.sm_a705fn_battery_level'].state / 100 * circumference};" />
                                 <text x="50%" y="54%" fill="grey" font-size="13" text-anchor="middle" alignment-baseline="middle">${states['sensor.sm_a705fn_battery_level'].state}%<tspan font-size="10"></tspan></text></svg>`; } ]]]
                          double_tap_action:
                            action: more-info
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: Vincent
                              card:
                                type: custom:vertical-stack-in-card
                                cards:
                                  - type: picture
                                    style: |
                                      ha-card {
                                        border-radius: 10px;
                                        background: var(--my_color2);
                                      }
                                    image: /local/lovelace/images/Vincent.jpg
                                    tap_action:
                                      action: none
                                    hold_action:
                                      action: none
                                  - type: entities
                                    entities:
                                      - entity: person.vincent
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        background: var(--my_color2);
                                        color: lightgrey;
                                      }
                                  - aspect_ratio: '1:1'
                                    dark_mode: true
                                    default_zoom: 15
                                    entities:
                                      - entity: person.vincent
                                    hours_to_show: 12
                                    type: map
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        border-radius: 15px 15px 0px 0px ;
                                        border-top : px solid grey;
                                        border-left : px solid grey;
                                        border-right : px solid grey;
                                      }
                                  - header:
                                      title: 📱Phone ️
                                      show: true
                                      show_states: true
                                      colorize_states: true
                                    experimental:
                                      brush: true
                                    graph_span: 72h
                                    brush:
                                      selection_span: 12h
                                    apex_config:
                                      grid:
                                        show: false
                                      legend:
                                        fontSize: 12px
                                        height: 40
                                      dataLabels:
                                        enabled: false
                                      stroke:
                                        width: 3
                                        curve: smooth
                                      fill:
                                        type: gradient
                                        gradient:
                                          type: vertical
                                          shadeIntensity: 0.8
                                          inverseColors: false
                                          opacityFrom: 0.5
                                          opacityTo: 0
                                          stops:
                                            - - 0
                                              - 50
                                              - 100
                                      tooltip:
                                        enabled: true
                                      yaxis:
                                        - show: true
                                          decimalsInFloat: 0
                                          labels:
                                            style:
                                              colors: '#FFB62E'
                                              fontSize: 12px
                                          forceNiceScale: true
                                        - show: true
                                          decimalsInFloat: 0
                                          opposite: true
                                          labels:
                                            style:
                                              colors: '#2eb9ff'
                                              fontSize: 12px
                                          forceNiceScale: true
                                      xaxis:
                                        axisBorder:
                                          show: false
                                        labels:
                                          style:
                                            fontSize: 14px
                                    series:
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        show:
                                          extremas: false
                                        type: area
                                        color: grey
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a515f_battery_level
                                        name: Patricia
                                        show:
                                          extremas: false
                                        type: area
                                        color: purple
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        color: dodgerblue
                                        fill_raw: last
                                        type: area
                                        stroke_width: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                        show:
                                          in_brush: true
                                          in_chart: false
                                    card_mod:
                                      style: |
                                        ha-card {
                                        background-color: black;
                                        }
                                    type: custom:apexcharts-card
                        - type: custom:button-card
                          entity: person.patricia
                          name: Patricia
                          aspect_ratio: 1/1
                          show_entity_picture: true
                          show_icon: false
                          show_name: false
                          show_state: false
                          show_label: true
                          label: |
                            [[[
                              return states['device_tracker.sm_a515f'].state
                            ]]]
                          styles:
                            entity_picture:
                              - border-radius: 50%
                              - top: 5%
                              - left: 5%
                              - width: 40%
                              - color: gray
                              - opacity: 60%
                            name:
                              - top: 55%
                              - left: 8%
                              - position: absolute
                              - color: grey
                              - font-size: 85%
                            state:
                              - top: 79%
                              - left: 5%
                              - position: absolute
                            label:
                              - font-size: 85%
                              - font-weight: bold
                              - top: 58%
                              - left: 8%
                              - position: absolute
                              - color: |
                                  [[[
                                    if (states['person.Patricia'].state == "Maison")
                                      return 'darkgrey';
                                    if (states['person.Patricia'].state == "Ecole-Emma")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Travail")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Arthon-en-retz")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Pressing")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Appart-nanou")
                                      return 'grey';
                                    return 'red';
                                  ]]]
                            card:
                              - font-size: 100%
                              - border-color: rgba(152, 167, 185, 0.2)
                              - background-color: >
                                  [[[ return (entity.state === 'on' ||
                                  entity.state === 'Maison') ?
                                  'var(--my_color2)' :
                                  'var(--my_color_pastille)'; ]]]
                              - border-style: outset
                              - border-width: 1px
                              - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            custom_fields:
                              Patricia_heure:
                                - font-size: 85%
                                - top: 75%
                                - left: 8%
                                - color: grey
                                - position: absolute
                              circle:
                                - top: 10%
                                - left: 55%
                                - width: 35%
                                - position: absolute
                                - letter-spacing: 0.03vw
                                - stroke: |
                                    [[[
                                      if (states['sensor.sm_a515f_battery_level'].state < 40)
                                        return 'red';
                                     return 'grey';
                                    ]]]
                          extra_styles: |
                            @keyframes ball-scale {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                            @keyframes ball-scale2 {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                  - animation: ball-scale 0.2s
                                  - border-width: 1px
                            - value: 'off'
                              styles:
                                card:
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  - animation: ball-scale2 0.2s
                                  - border-width: 1px
                          custom_fields:
                            Patricia_heure: >
                              [[[ return states['sensor.Patricia_heure'].state
                              ]]]
                            circle: |
                              [[[ if (entity.state != 'unavailable' ) 
                              {
                                 ;
                                 const radius = 20.5; const circumference = radius * 2 * Math.PI; 
                                 return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="grey" stroke-width="1" fill="none" style="
                                 transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - states['sensor.sm_a515f_battery_level'].state / 100 * circumference};" />
                                 <text x="50%" y="54%" fill="grey" font-size="13" text-anchor="middle" alignment-baseline="middle">${states['sensor.sm_a515f_battery_level'].state}%<tspan font-size="10"></tspan></text></svg>`; } ]]]
                          double_tap_action:
                            action: more-info
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: Patricia
                              card:
                                type: custom:vertical-stack-in-card
                                cards:
                                  - type: picture
                                    style: |
                                      ha-card {
                                        border-radius: 10px;
                                        background: var(--my_color2);
                                      }
                                    image: /local/lovelace/images/patricia.png
                                    tap_action:
                                      action: none
                                    hold_action:
                                      action: none
                                  - type: entities
                                    entities:
                                      - entity: person.Patricia
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        background: var(--my_color2);
                                        color: lightgrey;
                                      }
                                  - aspect_ratio: '1:1'
                                    dark_mode: true
                                    default_zoom: 15
                                    entities:
                                      - entity: person.Patricia
                                    hours_to_show: 12
                                    type: map
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        border-radius: 15px 15px 0px 0px ;
                                        border-top : px solid grey;
                                        border-left : px solid grey;
                                        border-right : px solid grey;
                                      }
                                  - header:
                                      title: 📱Phone ️
                                      show: true
                                      show_states: true
                                      colorize_states: true
                                    experimental:
                                      brush: true
                                    graph_span: 72h
                                    brush:
                                      selection_span: 12h
                                    apex_config:
                                      grid:
                                        show: false
                                      legend:
                                        fontSize: 12px
                                        height: 40
                                      dataLabels:
                                        enabled: false
                                      stroke:
                                        width: 3
                                        curve: smooth
                                      fill:
                                        type: gradient
                                        gradient:
                                          type: vertical
                                          shadeIntensity: 0.8
                                          inverseColors: false
                                          opacityFrom: 0.5
                                          opacityTo: 0
                                          stops:
                                            - - 0
                                              - 50
                                              - 100
                                      tooltip:
                                        enabled: true
                                      yaxis:
                                        - show: true
                                          decimalsInFloat: 0
                                          labels:
                                            style:
                                              colors: '#FFB62E'
                                              fontSize: 12px
                                          forceNiceScale: true
                                        - show: true
                                          decimalsInFloat: 0
                                          opposite: true
                                          labels:
                                            style:
                                              colors: '#2eb9ff'
                                              fontSize: 12px
                                          forceNiceScale: true
                                      xaxis:
                                        axisBorder:
                                          show: false
                                        labels:
                                          style:
                                            fontSize: 14px
                                    series:
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        show:
                                          extremas: false
                                        type: area
                                        color: grey
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a515f_battery_level
                                        name: Patricia
                                        show:
                                          extremas: false
                                        type: area
                                        color: purple
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        color: dodgerblue
                                        fill_raw: last
                                        type: area
                                        stroke_width: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                        show:
                                          in_brush: true
                                          in_chart: false
                                    card_mod:
                                      style: |
                                        ha-card {
                                        background-color: black;
                                        }
                                    type: custom:apexcharts-card
                        - type: custom:button-card
                          entity: person.nanou
                          name: nanou
                          aspect_ratio: 1/1
                          show_entity_picture: true
                          show_icon: false
                          show_name: false
                          show_state: false
                          show_label: true
                          label: |
                            [[[
                              return states['device_tracker.sm_nanou'].state
                            ]]]
                          styles:
                            entity_picture:
                              - border-radius: 50%
                              - top: 5%
                              - left: 5%
                              - width: 40%
                              - color: gray
                              - opacity: 60%
                            name:
                              - top: 55%
                              - left: 8%
                              - position: absolute
                              - color: grey
                              - font-size: 85%
                            state:
                              - top: 79%
                              - left: 5%
                              - position: absolute
                            label:
                              - font-size: 85%
                              - font-weight: bold
                              - top: 58%
                              - left: 8%
                              - position: absolute
                              - color: |
                                  [[[
                                    if (states['person.nanou'].state == "Maison")
                                      return 'darkgrey';
                                    if (states['person.nanou'].state == "not_Maison")
                                      return 'red';
                                    return 'red';
                                  ]]]
                            card:
                              - font-size: 100%
                              - border-color: rgba(152, 167, 185, 0.2)
                              - background-color: >
                                  [[[ return (entity.state === 'on' ||
                                  entity.state === 'Maison') ?
                                  'var(--my_color2)' :
                                  'var(--my_color_pastille)'; ]]]
                              - border-style: outset
                              - border-width: 1px
                              - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            custom_fields:
                              tom_heure:
                                - font-size: 85%
                                - top: 75%
                                - left: 8%
                                - color: grey
                                - position: absolute
                          extra_styles: |
                            @keyframes ball-scale {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                            @keyframes ball-scale2 {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                  - animation: ball-scale 0.2s
                                  - border-width: 2px
                            - value: 'off'
                              styles:
                                card:
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  - animation: ball-scale2 0.2s
                                  - border-width: 1px
                          custom_fields:
                            nanou_heure: |
                              [[[ return states['sensor.nanou_heure'].state ]]]
                          double_tap_action:
                            action: more-info
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: tom
                              card:
                                type: custom:vertical-stack-in-card
                                cards:
                                  - type: picture
                                    style: |
                                      ha-card {
                                        border-radius: 10px;
                                        background: var(--my_color2);
                                      }
                                    image: /local/lovelace/images/Nanou.jpg
                                    tap_action:
                                      action: none
                                    hold_action:
                                      action: none
                                  - type: entities
                                    entities:
                                      - entity: person.nanou
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        background: var(--my_color2);
                                        color: lightgrey;
                                      }
                                  - aspect_ratio: '1:1'
                                    dark_mode: true
                                    default_zoom: 15
                                    entities:
                                      - entity: person.nanou
                                    hours_to_show: 12
                                    type: map
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        border-radius: 15px 15px 0px 0px ;
                                        border-top : px solid grey;
                                        border-left : px solid grey;
                                        border-right : px solid grey;
                                      }
                                  - header:
                                      title: 📱Phone ️
                                      show: true
                                      show_states: true
                                      colorize_states: true
                                    experimental:
                                      brush: true
                                    graph_span: 72h
                                    brush:
                                      selection_span: 12h
                                    apex_config:
                                      grid:
                                        show: false
                                      legend:
                                        fontSize: 12px
                                        height: 40
                                      dataLabels:
                                        enabled: false
                                      stroke:
                                        width: 3
                                        curve: smooth
                                      fill:
                                        type: gradient
                                        gradient:
                                          type: vertical
                                          shadeIntensity: 0.8
                                          inverseColors: false
                                          opacityFrom: 0.5
                                          opacityTo: 0
                                          stops:
                                            - - 0
                                              - 50
                                              - 100
                                      tooltip:
                                        enabled: true
                                      yaxis:
                                        - show: true
                                          decimalsInFloat: 0
                                          labels:
                                            style:
                                              colors: '#FFB62E'
                                              fontSize: 12px
                                          forceNiceScale: true
                                        - show: true
                                          decimalsInFloat: 0
                                          opposite: true
                                          labels:
                                            style:
                                              colors: '#2eb9ff'
                                              fontSize: 12px
                                          forceNiceScale: true
                                      xaxis:
                                        axisBorder:
                                          show: false
                                        labels:
                                          style:
                                            fontSize: 14px
                                    series:
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        show:
                                          extremas: false
                                        type: area
                                        color: grey
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a515f_battery_level
                                        name: Patricia
                                        show:
                                          extremas: false
                                        type: area
                                        color: purple
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        color: dodgerblue
                                        fill_raw: last
                                        type: area
                                        stroke_width: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                        show:
                                          in_brush: true
                                          in_chart: false
                                    card_mod:
                                      style: |
                                        ha-card {
                                        background-color: black;
                                        }
                                    type: custom:apexcharts-card
                      square: false
                      columns: 3
              - type: custom:button-card
                entity: sensor.temp_maison
                name: temperature
                template:
                  - chips
                label: |
                  [[[
                    if (entity.state == 'unavailable')
                      return "🌡 indispo" ;
                    if (entity.state == '° / °')
                      return "🌡 indispo" ;
                    return "🌡 " + (entity.state );
                  ]]]
                styles:
                  card:
                    - opacity: |
                        [[[
                          if (entity.state == 'unavailable')
                            return "50%" ;
                          if (entity.state == '°')
                            return "50%" ;
                          return "100%";
                        ]]]
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Température / Humidité
                    card:
                      type: vertical-stack
                      cards:
                        - type: grid
                          cards:
                            - type: custom:button-card
                              entity: sensor.weather_sdb_temperature
                              name: SdB
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              label: |
                                [[[
                                  if (states['sensor.illuminance_salon_illuminance'].state != 'unavailable')
                                    return (states['sensor.illuminance_salon_illuminance'].state ) + " lx" ;
                                  return "";
                                ]]]
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                            - type: custom:button-card
                              entity: sensor.weather_cuisine_temperature
                              name: Cuisine
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                            - type: custom:button-card
                              entity: sensor.weather_ch_parents_temperature
                              name: Parents
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                            - type: custom:button-card
                              entity: sensor.weather_ch_filles_temperature
                              name: Filles
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                          columns: 4
              - type: custom:button-card
                entity: sensor.weather_soleil_icon
                name: maison
                template:
                  - chips
                label: |
                  [[[ return (entity.state ) ;
                  ]]]
          - type: custom:button-card
            name: ALARME
            template:
              - header
          - type: vertical-stack
            cards:
              - card:
                  entity: alarm_control_panel.alarmo
                  states:
                    - arm_home
                  style:
                    .: |
                      ha-card > ha-label-badge{
                        --alarm-state-color: var(--google-green-500) !important;
                      }
                      ha-card{
                        padding-top: 16px;
                        padding-bottom: 12px !important;
                        border-radius: 21px;
                      }
                      ha-card > h1{
                         padding-top: 0;
                         color: transparent;
                      }
                      ha-card > h1::before{
                         content: "Désactivée";
                         color: green;
                         position: absolute;
                         font-variant: small-caps;
                      }
                      #alarmCode{
                        display: none;
                      }
                      #keypad{
                        display: none !important;
                      }
                    '#armActions':
                      mwc-button:
                        $: |
                          #button > span.slot-container{
                            color: transparent;
                            position: absolute;

                          }
                          #button{
                            width: 150px;
                            border-radius: 21px;
                          }
                          #button > span.slot-container::before{
                            color: var(--mdc-theme-primary, #6200ee);
                            content: "Activer";
                            margin: 0 0 0 50%;
                          }
                  title: Alarme
                  type: alarm-panel
                conditions:
                  - entity: alarm_control_panel.alarmo
                    state: disarmed
                type: conditional
              - card:
                  entity: alarm_control_panel.alarmo
                  states:
                    - arm_home
                  title: Alarme
                  type: alarm-panel
                  style:
                    .: |
                      ha-card > ha-label-badge{
                        --alarm-state-color: var(--google-red-500) !important;
                      }
                      ha-card{
                        padding-top: 16px;
                        padding-bottom: 12px !important;
                        border-radius: 21px;
                      }
                      ha-card > h1{
                         padding-top: 0;
                         color: transparent;
                      }
                      ha-card > h1::before{
                         content: "Activée";
                         color: var(--google-red-500);
                         position: absolute;
                         font-variant: small-caps;
                      }
                    '#armActions':
                      mwc-button:
                        $: |
                          #button > span.slot-container{
                            color: transparent;
                            position: absolute;    
                          }
                          #button{
                            width: 150px;
                            border-radius: 21px;
                          }
                          #button > span.slot-container::before{
                            color: var(--mdc-theme-primary, #6200ee);
                            content: "Désactiver";
                            margin: 0 0 0 50%;
                          }
                    '#keypad':
                      mwc-button:
                        $: |
                          #button{
                            border-radius: 12px
                          }
                conditions:
                  - entity: alarm_control_panel.alarmo
                    state_not: disarmed
                type: conditional
          - type: custom:button-card
            name: LOCALISATION
            template:
              - header
          - type: grid
            columns: 3
            square: false
            cards:
              - template:
                  - icon_info_bg
                  - personnes
                  - popup_map
                type: custom:button-card
                entity: person.patricia
                show_entity_picture: true
                variables:
                  gps: google_maps
              - template:
                  - icon_info_bg
                  - personnes
                  - popup_map
                type: custom:button-card
                entity: person.vincent
                show_entity_picture: true
                variables:
                  gps: google_maps
              - template:
                  - icon_info_bg
                  - personnes
                  - popup_map
                type: custom:button-card
                entity: person.emma
                show_entity_picture: true
                variables:
                  gps: google_maps
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: CAMERA SALON
            template:
              - header
          - type: custom:webrtc-camera
            url: rtsp://192.168.1.29/live0
            title: camera 2
            muted: false
            ui: true
            shortcuts:
              top: 0
              left: 0
              orientation: vertical
              services:
                - name: Live
                  icon: mdi:play
                  service: eufy_security.start_rtsp_livestream
                  service_data:
                    entity_id: camera.salon_2_2
            webrtc: true
          - type: custom:button-card
            name: CAMERA COULOIR
            template:
              - header
          - type: custom:webrtc-camera
            url: rtsp://192.168.1.29/live1
            title: Couloir
            muted: false
            ui: true
            show_state: true
            shortcuts:
              top: 0
              left: 0
              orientation: vertical
              services:
                - name: Live
                  icon: mdi:play
                  service: eufy_security.start_rtsp_livestream
                  service_data:
                    entity_id: camera.couloir
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: CAMERA SALON
            template:
              - header
          - type: grid
            square: false
            columns: 1
            cards:
              - show_state: true
                show_name: true
                camera_view: auto
                type: picture-entity
                entity: camera.chuangmi_ipc009_58e3_camera_control
  - theme: Backend-selected
    title: Consommation
    path: consommation
    icon: mdi:lightning-bolt
    visible:
      - user: 9b144cacffe2461babcefd46b46f3f61
      - user: 07b9552c7f0c4ede8e5301f34b654e91
      - user: c55ab7f969ff49d2bae763c5e3a363c9
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: DATE
            template:
              - header
          - type: custom:button-card
            template:
              - sidebar
            double_tap_action:
              action: more-info
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Info et Météo
                card:
                  type: vertical-stack
                  cards:
                    - type: markdown
                      content: >
                        <font size= "3"><u> ***Savoir inutile*** </u>:<i>
                        {{states('sensor.savoir_scrape') }}</i>
                      style:
                        .: |
                          ha-card {
                              border-radius: 10px;
                          }
                    - type: custom:meteofrance-weather-card
                      entity: weather.nantes
                      number_of_forecasts: '5'
                      cloudCoverEntity: sensor.nantes_cloud_cover
                      rainChanceEntity: sensor.nantes_rain_chance_2
                      uvEntity: sensor.nantes_uv_2
                      freezeChanceEntity: sensor.nantes_freeze_chance_2
                      snowChanceEntity: sensor.nantes_snow_chance_2
                      alertEntity: sensor.44_weather_alert
                      rainForecastEntity: sensor.nantes_next_rain_2
                      style: |
                        ha-card {
                          --ha-card-background: none !important;
                          border-radius: 10px;
                        }
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: weather.nantes
                template: chips
                name: |
                  [[[
                    if (entity.state == 'unavailable')
                      return "☀️ HS" ;
                    return states['sensor.weather_icon'].state ;
                  ]]]
                show_name: true
                label: |
                  [[[
                    if (entity.state == 'unavailable')
                      return "" ;
                    return  (states['sensor.weather_temperature'].state  );
                  ]]]
                styles:
                  name:
                    - justify-self: center
                    - align-self: center
                  label:
                    - align-self: center
                    - margin-top: 12px
                  grid:
                    - grid-template-areas: '"n l"'
                  card:
                    - opacity: |
                        [[[
                          if (entity.state == 'unavailable')
                            return "50%" ;
                          return "100%";
                        ]]]
                double_tap_action:
                  action: more-info
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Info et Météo
                    card:
                      type: vertical-stack
                      cards:
                        - type: markdown
                          content: >
                            <font size= "3"><font color='lightgrey'><u> Savoir
                            inutile </u>:<i> {{states('sensor.savoir_scrape')
                            }}</i>
                          style:
                            .: |
                              ha-card {
                                  --ha-card-background: none !important;
                                  box-shadow: none !important;
                                  font-family: Avenir;
                              }
                        - type: custom:meteofrance-weather-card
                          entity: weather.nantes
                          number_of_forecasts: '5'
                          cloudCoverEntity: sensor.nantes_cloud_cover
                          rainChanceEntity: sensor.nantes_rain_chance_2
                          uvEntity: sensor.nantes_uv_2
                          freezeChanceEntity: sensor.nantes_freeze_chance_2
                          snowChanceEntity: sensor.nantes_snow_chance_2
                          alertEntity: sensor.44_weather_alert
                          rainForecastEntity: sensor.nantes_next_rain_2
              - type: custom:button-card
                entity: sensor.compteur_home
                name: maison
                template:
                  - chips
                label: |
                  [[[ return "🏠 "+ (entity.state ) ;
                  ]]]
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Info et Météo
                    card:
                      type: grid
                      cards:
                        - type: custom:button-card
                          entity: person.vincent
                          name: vincent
                          aspect_ratio: 1/1
                          show_entity_picture: true
                          show_icon: false
                          show_name: false
                          show_state: false
                          show_label: true
                          label: |
                            [[[
                              return states['sensor.sm_a705fn_battery_level'].state
                            ]]]
                          styles:
                            entity_picture:
                              - border-radius: 50%
                              - top: 5%
                              - left: 5%
                              - width: 40%
                              - color: gray
                              - opacity: 60%
                            name:
                              - top: 5%
                              - left: 8%
                              - position: absolute
                              - color: grey
                              - font-size: 85%
                            state:
                              - top: 79%
                              - left: 5%
                              - position: absolute
                            label:
                              - font-size: 85%
                              - font-weight: bold
                              - top: 58%
                              - left: 8%
                              - position: absolute
                              - color: |
                                  [[[
                                    if (states['person.vincent'].state == "Maison")
                                      return 'darkgrey';
                                    if (states['person.vincent'].state == "Ecole-Emma")
                                      return 'grey';
                                    if (states['person.vincent'].state == "Arthon-en-retz")
                                      return 'grey';
                                    if (states['person.vincent'].state == "Travail")
                                      return 'grey';
                                   if (states['person.vincent'].state == "Pressing")
                                      return 'grey';
                                    return 'red';
                                  ]]]
                            card:
                              - font-size: 100%
                              - border-color: rgba(152, 167, 185, 0.2)
                              - background-color: >
                                  [[[ return (entity.state === 'on' ||
                                  entity.state === 'Maison') ?
                                  'var(--my_color2)' :
                                  'var(--my_color_pastille)'; ]]]
                              - border-style: outset
                              - border-width: 1px
                              - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            custom_fields:
                              vincent_heure:
                                - font-size: 85%
                                - top: 75%
                                - left: 8%
                                - color: grey
                                - position: absolute
                              circle:
                                - top: 10%
                                - left: 55%
                                - width: 35%
                                - position: absolute
                                - letter-spacing: 0.03vw
                                - stroke: |
                                    [[[
                                      if (states['sensor.sm_a705fn_battery_level'].state < 40)
                                        return 'red';
                                     return 'grey';
                                    ]]]
                          extra_styles: |
                            @keyframes ball-scale {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                            @keyframes ball-scale2 {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                  - animation: ball-scale 0.2s
                                  - border-width: 1px
                            - value: 'off'
                              styles:
                                card:
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  - animation: ball-scale2 0.2s
                                  - border-width: 1px
                          custom_fields:
                            vincent_heure: >
                              [[[ return states['sensor.vincent_heure'].state
                              ]]]
                            circle: |
                              [[[ if (entity.state != 'unavailable' ) 
                              {
                                 ;
                                 const radius = 20.5; const circumference = radius * 2 * Math.PI; 
                                 return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="grey" stroke-width="1" fill="none" style="
                                 transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - states['sensor.sm_a705fn_battery_level'].state / 100 * circumference};" />
                                 <text x="50%" y="54%" fill="grey" font-size="13" text-anchor="middle" alignment-baseline="middle">${states['sensor.sm_a705fn_battery_level'].state}%<tspan font-size="10"></tspan></text></svg>`; } ]]]
                          double_tap_action:
                            action: more-info
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: Vincent
                              card:
                                type: custom:vertical-stack-in-card
                                cards:
                                  - type: picture
                                    style: |
                                      ha-card {
                                        border-radius: 10px;
                                        background: var(--my_color2);
                                      }
                                    image: /local/lovelace/images/Vincent.jpg
                                    tap_action:
                                      action: none
                                    hold_action:
                                      action: none
                                  - type: entities
                                    entities:
                                      - entity: person.vincent
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        background: var(--my_color2);
                                        color: lightgrey;
                                      }
                                  - aspect_ratio: '1:1'
                                    dark_mode: true
                                    default_zoom: 15
                                    entities:
                                      - entity: person.vincent
                                    hours_to_show: 12
                                    type: map
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        border-radius: 15px 15px 0px 0px ;
                                        border-top : px solid grey;
                                        border-left : px solid grey;
                                        border-right : px solid grey;
                                      }
                                  - header:
                                      title: 📱Phone ️
                                      show: true
                                      show_states: true
                                      colorize_states: true
                                    experimental:
                                      brush: true
                                    graph_span: 72h
                                    brush:
                                      selection_span: 12h
                                    apex_config:
                                      grid:
                                        show: false
                                      legend:
                                        fontSize: 12px
                                        height: 40
                                      dataLabels:
                                        enabled: false
                                      stroke:
                                        width: 3
                                        curve: smooth
                                      fill:
                                        type: gradient
                                        gradient:
                                          type: vertical
                                          shadeIntensity: 0.8
                                          inverseColors: false
                                          opacityFrom: 0.5
                                          opacityTo: 0
                                          stops:
                                            - - 0
                                              - 50
                                              - 100
                                      tooltip:
                                        enabled: true
                                      yaxis:
                                        - show: true
                                          decimalsInFloat: 0
                                          labels:
                                            style:
                                              colors: '#FFB62E'
                                              fontSize: 12px
                                          forceNiceScale: true
                                        - show: true
                                          decimalsInFloat: 0
                                          opposite: true
                                          labels:
                                            style:
                                              colors: '#2eb9ff'
                                              fontSize: 12px
                                          forceNiceScale: true
                                      xaxis:
                                        axisBorder:
                                          show: false
                                        labels:
                                          style:
                                            fontSize: 14px
                                    series:
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        show:
                                          extremas: false
                                        type: area
                                        color: grey
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a515f_battery_level
                                        name: Patricia
                                        show:
                                          extremas: false
                                        type: area
                                        color: purple
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        color: dodgerblue
                                        fill_raw: last
                                        type: area
                                        stroke_width: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                        show:
                                          in_brush: true
                                          in_chart: false
                                    card_mod:
                                      style: |
                                        ha-card {
                                        background-color: black;
                                        }
                                    type: custom:apexcharts-card
                        - type: custom:button-card
                          entity: person.patricia
                          name: Patricia
                          aspect_ratio: 1/1
                          show_entity_picture: true
                          show_icon: false
                          show_name: false
                          show_state: false
                          show_label: true
                          label: |
                            [[[
                              return states['device_tracker.sm_a515f'].state
                            ]]]
                          styles:
                            entity_picture:
                              - border-radius: 50%
                              - top: 5%
                              - left: 5%
                              - width: 40%
                              - color: gray
                              - opacity: 60%
                            name:
                              - top: 55%
                              - left: 8%
                              - position: absolute
                              - color: grey
                              - font-size: 85%
                            state:
                              - top: 79%
                              - left: 5%
                              - position: absolute
                            label:
                              - font-size: 85%
                              - font-weight: bold
                              - top: 58%
                              - left: 8%
                              - position: absolute
                              - color: |
                                  [[[
                                    if (states['person.Patricia'].state == "Maison")
                                      return 'darkgrey';
                                    if (states['person.Patricia'].state == "Ecole-Emma")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Travail")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Arthon-en-retz")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Pressing")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Appart-nanou")
                                      return 'grey';
                                    return 'red';
                                  ]]]
                            card:
                              - font-size: 100%
                              - border-color: rgba(152, 167, 185, 0.2)
                              - background-color: >
                                  [[[ return (entity.state === 'on' ||
                                  entity.state === 'Maison') ?
                                  'var(--my_color2)' :
                                  'var(--my_color_pastille)'; ]]]
                              - border-style: outset
                              - border-width: 1px
                              - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            custom_fields:
                              Patricia_heure:
                                - font-size: 85%
                                - top: 75%
                                - left: 8%
                                - color: grey
                                - position: absolute
                              circle:
                                - top: 10%
                                - left: 55%
                                - width: 35%
                                - position: absolute
                                - letter-spacing: 0.03vw
                                - stroke: |
                                    [[[
                                      if (states['sensor.sm_a515f_battery_level'].state < 40)
                                        return 'red';
                                     return 'grey';
                                    ]]]
                          extra_styles: |
                            @keyframes ball-scale {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                            @keyframes ball-scale2 {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                  - animation: ball-scale 0.2s
                                  - border-width: 1px
                            - value: 'off'
                              styles:
                                card:
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  - animation: ball-scale2 0.2s
                                  - border-width: 1px
                          custom_fields:
                            Patricia_heure: >
                              [[[ return states['sensor.Patricia_heure'].state
                              ]]]
                            circle: |
                              [[[ if (entity.state != 'unavailable' ) 
                              {
                                 ;
                                 const radius = 20.5; const circumference = radius * 2 * Math.PI; 
                                 return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="grey" stroke-width="1" fill="none" style="
                                 transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - states['sensor.sm_a515f_battery_level'].state / 100 * circumference};" />
                                 <text x="50%" y="54%" fill="grey" font-size="13" text-anchor="middle" alignment-baseline="middle">${states['sensor.sm_a515f_battery_level'].state}%<tspan font-size="10"></tspan></text></svg>`; } ]]]
                          double_tap_action:
                            action: more-info
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: Patricia
                              card:
                                type: custom:vertical-stack-in-card
                                cards:
                                  - type: picture
                                    style: |
                                      ha-card {
                                        border-radius: 10px;
                                        background: var(--my_color2);
                                      }
                                    image: /local/lovelace/images/patricia.png
                                    tap_action:
                                      action: none
                                    hold_action:
                                      action: none
                                  - type: entities
                                    entities:
                                      - entity: person.Patricia
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        background: var(--my_color2);
                                        color: lightgrey;
                                      }
                                  - aspect_ratio: '1:1'
                                    dark_mode: true
                                    default_zoom: 15
                                    entities:
                                      - entity: person.Patricia
                                    hours_to_show: 12
                                    type: map
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        border-radius: 15px 15px 0px 0px ;
                                        border-top : px solid grey;
                                        border-left : px solid grey;
                                        border-right : px solid grey;
                                      }
                                  - header:
                                      title: 📱Phone ️
                                      show: true
                                      show_states: true
                                      colorize_states: true
                                    experimental:
                                      brush: true
                                    graph_span: 72h
                                    brush:
                                      selection_span: 12h
                                    apex_config:
                                      grid:
                                        show: false
                                      legend:
                                        fontSize: 12px
                                        height: 40
                                      dataLabels:
                                        enabled: false
                                      stroke:
                                        width: 3
                                        curve: smooth
                                      fill:
                                        type: gradient
                                        gradient:
                                          type: vertical
                                          shadeIntensity: 0.8
                                          inverseColors: false
                                          opacityFrom: 0.5
                                          opacityTo: 0
                                          stops:
                                            - - 0
                                              - 50
                                              - 100
                                      tooltip:
                                        enabled: true
                                      yaxis:
                                        - show: true
                                          decimalsInFloat: 0
                                          labels:
                                            style:
                                              colors: '#FFB62E'
                                              fontSize: 12px
                                          forceNiceScale: true
                                        - show: true
                                          decimalsInFloat: 0
                                          opposite: true
                                          labels:
                                            style:
                                              colors: '#2eb9ff'
                                              fontSize: 12px
                                          forceNiceScale: true
                                      xaxis:
                                        axisBorder:
                                          show: false
                                        labels:
                                          style:
                                            fontSize: 14px
                                    series:
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        show:
                                          extremas: false
                                        type: area
                                        color: grey
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a515f_battery_level
                                        name: Patricia
                                        show:
                                          extremas: false
                                        type: area
                                        color: purple
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        color: dodgerblue
                                        fill_raw: last
                                        type: area
                                        stroke_width: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                        show:
                                          in_brush: true
                                          in_chart: false
                                    card_mod:
                                      style: |
                                        ha-card {
                                        background-color: black;
                                        }
                                    type: custom:apexcharts-card
                        - type: custom:button-card
                          entity: person.nanou
                          name: nanou
                          aspect_ratio: 1/1
                          show_entity_picture: true
                          show_icon: false
                          show_name: false
                          show_state: false
                          show_label: true
                          label: |
                            [[[
                              return states['device_tracker.sm_nanou'].state
                            ]]]
                          styles:
                            entity_picture:
                              - border-radius: 50%
                              - top: 5%
                              - left: 5%
                              - width: 40%
                              - color: gray
                              - opacity: 60%
                            name:
                              - top: 55%
                              - left: 8%
                              - position: absolute
                              - color: grey
                              - font-size: 85%
                            state:
                              - top: 79%
                              - left: 5%
                              - position: absolute
                            label:
                              - font-size: 85%
                              - font-weight: bold
                              - top: 58%
                              - left: 8%
                              - position: absolute
                              - color: |
                                  [[[
                                    if (states['person.nanou'].state == "Maison")
                                      return 'darkgrey';
                                    if (states['person.nanou'].state == "not_Maison")
                                      return 'red';
                                    return 'red';
                                  ]]]
                            card:
                              - font-size: 100%
                              - border-color: rgba(152, 167, 185, 0.2)
                              - background-color: >
                                  [[[ return (entity.state === 'on' ||
                                  entity.state === 'Maison') ?
                                  'var(--my_color2)' :
                                  'var(--my_color_pastille)'; ]]]
                              - border-style: outset
                              - border-width: 1px
                              - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            custom_fields:
                              tom_heure:
                                - font-size: 85%
                                - top: 75%
                                - left: 8%
                                - color: grey
                                - position: absolute
                          extra_styles: |
                            @keyframes ball-scale {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                            @keyframes ball-scale2 {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                  - animation: ball-scale 0.2s
                                  - border-width: 2px
                            - value: 'off'
                              styles:
                                card:
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  - animation: ball-scale2 0.2s
                                  - border-width: 1px
                          custom_fields:
                            nanou_heure: |
                              [[[ return states['sensor.nanou_heure'].state ]]]
                          double_tap_action:
                            action: more-info
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: tom
                              card:
                                type: custom:vertical-stack-in-card
                                cards:
                                  - type: picture
                                    style: |
                                      ha-card {
                                        border-radius: 10px;
                                        background: var(--my_color2);
                                      }
                                    image: /local/lovelace/images/Nanou.jpg
                                    tap_action:
                                      action: none
                                    hold_action:
                                      action: none
                                  - type: entities
                                    entities:
                                      - entity: person.nanou
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        background: var(--my_color2);
                                        color: lightgrey;
                                      }
                                  - aspect_ratio: '1:1'
                                    dark_mode: true
                                    default_zoom: 15
                                    entities:
                                      - entity: person.nanou
                                    hours_to_show: 12
                                    type: map
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        border-radius: 15px 15px 0px 0px ;
                                        border-top : px solid grey;
                                        border-left : px solid grey;
                                        border-right : px solid grey;
                                      }
                                  - header:
                                      title: 📱Phone ️
                                      show: true
                                      show_states: true
                                      colorize_states: true
                                    experimental:
                                      brush: true
                                    graph_span: 72h
                                    brush:
                                      selection_span: 12h
                                    apex_config:
                                      grid:
                                        show: false
                                      legend:
                                        fontSize: 12px
                                        height: 40
                                      dataLabels:
                                        enabled: false
                                      stroke:
                                        width: 3
                                        curve: smooth
                                      fill:
                                        type: gradient
                                        gradient:
                                          type: vertical
                                          shadeIntensity: 0.8
                                          inverseColors: false
                                          opacityFrom: 0.5
                                          opacityTo: 0
                                          stops:
                                            - - 0
                                              - 50
                                              - 100
                                      tooltip:
                                        enabled: true
                                      yaxis:
                                        - show: true
                                          decimalsInFloat: 0
                                          labels:
                                            style:
                                              colors: '#FFB62E'
                                              fontSize: 12px
                                          forceNiceScale: true
                                        - show: true
                                          decimalsInFloat: 0
                                          opposite: true
                                          labels:
                                            style:
                                              colors: '#2eb9ff'
                                              fontSize: 12px
                                          forceNiceScale: true
                                      xaxis:
                                        axisBorder:
                                          show: false
                                        labels:
                                          style:
                                            fontSize: 14px
                                    series:
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        show:
                                          extremas: false
                                        type: area
                                        color: grey
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a515f_battery_level
                                        name: Patricia
                                        show:
                                          extremas: false
                                        type: area
                                        color: purple
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        color: dodgerblue
                                        fill_raw: last
                                        type: area
                                        stroke_width: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                        show:
                                          in_brush: true
                                          in_chart: false
                                    card_mod:
                                      style: |
                                        ha-card {
                                        background-color: black;
                                        }
                                    type: custom:apexcharts-card
                      square: false
                      columns: 3
              - type: custom:button-card
                entity: sensor.temp_maison
                name: temperature
                template:
                  - chips
                label: |
                  [[[
                    if (entity.state == 'unavailable')
                      return "🌡 indispo" ;
                    if (entity.state == '° / °')
                      return "🌡 indispo" ;
                    return "🌡 " + (entity.state );
                  ]]]
                styles:
                  card:
                    - opacity: |
                        [[[
                          if (entity.state == 'unavailable')
                            return "50%" ;
                          if (entity.state == '°')
                            return "50%" ;
                          return "100%";
                        ]]]
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Température / Humidité
                    card:
                      type: vertical-stack
                      cards:
                        - type: grid
                          cards:
                            - type: custom:button-card
                              entity: sensor.weather_sdb_temperature
                              name: SdB
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              label: |
                                [[[
                                  if (states['sensor.illuminance_salon_illuminance'].state != 'unavailable')
                                    return (states['sensor.illuminance_salon_illuminance'].state ) + " lx" ;
                                  return "";
                                ]]]
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                            - type: custom:button-card
                              entity: sensor.weather_cuisine_temperature
                              name: Cuisine
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                            - type: custom:button-card
                              entity: sensor.weather_ch_parents_temperature
                              name: Parents
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                            - type: custom:button-card
                              entity: sensor.weather_ch_filles_temperature
                              name: Filles
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                          columns: 4
              - type: custom:button-card
                entity: sensor.weather_soleil_icon
                name: maison
                template:
                  - chips
                label: |
                  [[[ return (entity.state ) ;
                  ]]]
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: LINKY ENEDIS
            template:
              - header
          - type: custom:content-card-linky
            style: |
              ha-card {
               background-color: ; /*DARKGRAY*/
               border: 1px solid rgba(245,245,245,0.2); /*GRAY*/
               border-radius: 10px;
               }
            showIcon: true
            showHistory: true
            showPrice: true
            showPeakOffPeak: false
            showInTableUnit: true
            showDayPrice: true
            showDayPriceHCHP: false
            showDayHCHP: false
            titleName: EDF - Enedis
            nbJoursAffichage: '7'
            entity: sensor.myenedis_14252098278103
            showMonthRatio: true
            showYesterdayRatio: true
            showDayName: short
          - type: custom:button-card
            name: CONSOMATION DU JOUR
            template:
              - header
          - type: energy-distribution
            link_dashboard: true
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: BATTERIE
            template:
              - header
          - bulk_rename:
              - from: ': Battery Level'
              - from: Battery Level
              - from: Battery
            collapse: 5
            color_gradient:
              - '#ff0000'
              - '#ffff00'
              - '#00ff00'
            color_thresholds:
              - value: 70
                color: red
              - value: 90
                color: yellow
              - value: 100
                color: green
            entities: null
            filter:
              exclude:
                - name: entity_id
                  value: sensor.sm*
                - name: entity_id
                  value: sensor.emma*
              include:
                - name: entity_id
                  value: '*power'
                - name: entity_id
                  value: '*battery'
            secondary_info: last_updated
            sort_by_level: asc
            type: custom:battery-state-card
            style: |
              ha-card {
               background-color: ; /*DARKGRAY*/
               border: 1px solid rgba(245,245,245,0.2); /*GRAY*/
               border-radius: 10px;
                }
  - theme: Backend-selected
    title: Server
    path: server
    icon: mdi:server
    visible:
      - user: 9b144cacffe2461babcefd46b46f3f61
      - user: 07b9552c7f0c4ede8e5301f34b654e91
      - user: c55ab7f969ff49d2bae763c5e3a363c9
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: DATE
            template:
              - header
          - type: custom:button-card
            template:
              - sidebar
            double_tap_action:
              action: more-info
            tap_action:
              action: fire-dom-event
              browser_mod:
                command: popup
                title: Info et Météo
                card:
                  type: vertical-stack
                  cards:
                    - type: markdown
                      content: >
                        <font size= "3"><u> ***Savoir inutile*** </u>:<i>
                        {{states('sensor.savoir_scrape') }}</i>
                      style:
                        .: |
                          ha-card {
                              border-radius: 10px;
                          }
                    - type: custom:meteofrance-weather-card
                      entity: weather.nantes
                      number_of_forecasts: '5'
                      cloudCoverEntity: sensor.nantes_cloud_cover
                      rainChanceEntity: sensor.nantes_rain_chance_2
                      uvEntity: sensor.nantes_uv_2
                      freezeChanceEntity: sensor.nantes_freeze_chance_2
                      snowChanceEntity: sensor.nantes_snow_chance_2
                      alertEntity: sensor.44_weather_alert
                      rainForecastEntity: sensor.nantes_next_rain_2
                      style: |
                        ha-card {
                          --ha-card-background: none !important;
                          border-radius: 10px;
                        }
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: weather.nantes
                template: chips
                name: |
                  [[[
                    if (entity.state == 'unavailable')
                      return "☀️ HS" ;
                    return states['sensor.weather_icon'].state ;
                  ]]]
                show_name: true
                label: |
                  [[[
                    if (entity.state == 'unavailable')
                      return "" ;
                    return  (states['sensor.weather_temperature'].state  );
                  ]]]
                styles:
                  name:
                    - justify-self: center
                    - align-self: center
                  label:
                    - align-self: center
                    - margin-top: 12px
                  grid:
                    - grid-template-areas: '"n l"'
                  card:
                    - opacity: |
                        [[[
                          if (entity.state == 'unavailable')
                            return "50%" ;
                          return "100%";
                        ]]]
                double_tap_action:
                  action: more-info
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Info et Météo
                    card:
                      type: vertical-stack
                      cards:
                        - type: markdown
                          content: >
                            <font size= "3"><font color='lightgrey'><u> Savoir
                            inutile </u>:<i> {{states('sensor.savoir_scrape')
                            }}</i>
                          style:
                            .: |
                              ha-card {
                                  --ha-card-background: none !important;
                                  box-shadow: none !important;
                                  font-family: Avenir;
                              }
                        - type: custom:meteofrance-weather-card
                          entity: weather.nantes
                          number_of_forecasts: '5'
                          cloudCoverEntity: sensor.nantes_cloud_cover
                          rainChanceEntity: sensor.nantes_rain_chance_2
                          uvEntity: sensor.nantes_uv_2
                          freezeChanceEntity: sensor.nantes_freeze_chance_2
                          snowChanceEntity: sensor.nantes_snow_chance_2
                          alertEntity: sensor.44_weather_alert
                          rainForecastEntity: sensor.nantes_next_rain_2
              - type: custom:button-card
                entity: sensor.compteur_home
                name: maison
                template:
                  - chips
                label: |
                  [[[ return "🏠 "+ (entity.state ) ;
                  ]]]
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Info et Météo
                    card:
                      type: grid
                      cards:
                        - type: custom:button-card
                          entity: person.vincent
                          name: vincent
                          aspect_ratio: 1/1
                          show_entity_picture: true
                          show_icon: false
                          show_name: false
                          show_state: false
                          show_label: true
                          label: |
                            [[[
                              return states['sensor.sm_a705fn_battery_level'].state
                            ]]]
                          styles:
                            entity_picture:
                              - border-radius: 50%
                              - top: 5%
                              - left: 5%
                              - width: 40%
                              - color: gray
                              - opacity: 60%
                            name:
                              - top: 5%
                              - left: 8%
                              - position: absolute
                              - color: grey
                              - font-size: 85%
                            state:
                              - top: 79%
                              - left: 5%
                              - position: absolute
                            label:
                              - font-size: 85%
                              - font-weight: bold
                              - top: 58%
                              - left: 8%
                              - position: absolute
                              - color: |
                                  [[[
                                    if (states['person.vincent'].state == "Maison")
                                      return 'darkgrey';
                                    if (states['person.vincent'].state == "Ecole-Emma")
                                      return 'grey';
                                    if (states['person.vincent'].state == "Arthon-en-retz")
                                      return 'grey';
                                    if (states['person.vincent'].state == "Travail")
                                      return 'grey';
                                   if (states['person.vincent'].state == "Pressing")
                                      return 'grey';
                                    return 'red';
                                  ]]]
                            card:
                              - font-size: 100%
                              - border-color: rgba(152, 167, 185, 0.2)
                              - background-color: >
                                  [[[ return (entity.state === 'on' ||
                                  entity.state === 'Maison') ?
                                  'var(--my_color2)' :
                                  'var(--my_color_pastille)'; ]]]
                              - border-style: outset
                              - border-width: 1px
                              - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            custom_fields:
                              vincent_heure:
                                - font-size: 85%
                                - top: 75%
                                - left: 8%
                                - color: grey
                                - position: absolute
                              circle:
                                - top: 10%
                                - left: 55%
                                - width: 35%
                                - position: absolute
                                - letter-spacing: 0.03vw
                                - stroke: |
                                    [[[
                                      if (states['sensor.sm_a705fn_battery_level'].state < 40)
                                        return 'red';
                                     return 'grey';
                                    ]]]
                          extra_styles: |
                            @keyframes ball-scale {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                            @keyframes ball-scale2 {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                  - animation: ball-scale 0.2s
                                  - border-width: 1px
                            - value: 'off'
                              styles:
                                card:
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  - animation: ball-scale2 0.2s
                                  - border-width: 1px
                          custom_fields:
                            vincent_heure: >
                              [[[ return states['sensor.vincent_heure'].state
                              ]]]
                            circle: |
                              [[[ if (entity.state != 'unavailable' ) 
                              {
                                 ;
                                 const radius = 20.5; const circumference = radius * 2 * Math.PI; 
                                 return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="grey" stroke-width="1" fill="none" style="
                                 transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - states['sensor.sm_a705fn_battery_level'].state / 100 * circumference};" />
                                 <text x="50%" y="54%" fill="grey" font-size="13" text-anchor="middle" alignment-baseline="middle">${states['sensor.sm_a705fn_battery_level'].state}%<tspan font-size="10"></tspan></text></svg>`; } ]]]
                          double_tap_action:
                            action: more-info
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: Vincent
                              card:
                                type: custom:vertical-stack-in-card
                                cards:
                                  - type: picture
                                    style: |
                                      ha-card {
                                        border-radius: 10px;
                                        background: var(--my_color2);
                                      }
                                    image: /local/lovelace/images/Vincent.jpg
                                    tap_action:
                                      action: none
                                    hold_action:
                                      action: none
                                  - type: entities
                                    entities:
                                      - entity: person.vincent
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        background: var(--my_color2);
                                        color: lightgrey;
                                      }
                                  - aspect_ratio: '1:1'
                                    dark_mode: true
                                    default_zoom: 15
                                    entities:
                                      - entity: person.vincent
                                    hours_to_show: 12
                                    type: map
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        border-radius: 15px 15px 0px 0px ;
                                        border-top : px solid grey;
                                        border-left : px solid grey;
                                        border-right : px solid grey;
                                      }
                                  - header:
                                      title: 📱Phone ️
                                      show: true
                                      show_states: true
                                      colorize_states: true
                                    experimental:
                                      brush: true
                                    graph_span: 72h
                                    brush:
                                      selection_span: 12h
                                    apex_config:
                                      grid:
                                        show: false
                                      legend:
                                        fontSize: 12px
                                        height: 40
                                      dataLabels:
                                        enabled: false
                                      stroke:
                                        width: 3
                                        curve: smooth
                                      fill:
                                        type: gradient
                                        gradient:
                                          type: vertical
                                          shadeIntensity: 0.8
                                          inverseColors: false
                                          opacityFrom: 0.5
                                          opacityTo: 0
                                          stops:
                                            - - 0
                                              - 50
                                              - 100
                                      tooltip:
                                        enabled: true
                                      yaxis:
                                        - show: true
                                          decimalsInFloat: 0
                                          labels:
                                            style:
                                              colors: '#FFB62E'
                                              fontSize: 12px
                                          forceNiceScale: true
                                        - show: true
                                          decimalsInFloat: 0
                                          opposite: true
                                          labels:
                                            style:
                                              colors: '#2eb9ff'
                                              fontSize: 12px
                                          forceNiceScale: true
                                      xaxis:
                                        axisBorder:
                                          show: false
                                        labels:
                                          style:
                                            fontSize: 14px
                                    series:
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        show:
                                          extremas: false
                                        type: area
                                        color: grey
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a515f_battery_level
                                        name: Patricia
                                        show:
                                          extremas: false
                                        type: area
                                        color: purple
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        color: dodgerblue
                                        fill_raw: last
                                        type: area
                                        stroke_width: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                        show:
                                          in_brush: true
                                          in_chart: false
                                    card_mod:
                                      style: |
                                        ha-card {
                                        background-color: black;
                                        }
                                    type: custom:apexcharts-card
                        - type: custom:button-card
                          entity: person.patricia
                          name: Patricia
                          aspect_ratio: 1/1
                          show_entity_picture: true
                          show_icon: false
                          show_name: false
                          show_state: false
                          show_label: true
                          label: |
                            [[[
                              return states['device_tracker.sm_a515f'].state
                            ]]]
                          styles:
                            entity_picture:
                              - border-radius: 50%
                              - top: 5%
                              - left: 5%
                              - width: 40%
                              - color: gray
                              - opacity: 60%
                            name:
                              - top: 55%
                              - left: 8%
                              - position: absolute
                              - color: grey
                              - font-size: 85%
                            state:
                              - top: 79%
                              - left: 5%
                              - position: absolute
                            label:
                              - font-size: 85%
                              - font-weight: bold
                              - top: 58%
                              - left: 8%
                              - position: absolute
                              - color: |
                                  [[[
                                    if (states['person.Patricia'].state == "Maison")
                                      return 'darkgrey';
                                    if (states['person.Patricia'].state == "Ecole-Emma")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Travail")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Arthon-en-retz")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Pressing")
                                      return 'grey';
                                    if (states['person.Patricia'].state == "Appart-nanou")
                                      return 'grey';
                                    return 'red';
                                  ]]]
                            card:
                              - font-size: 100%
                              - border-color: rgba(152, 167, 185, 0.2)
                              - background-color: >
                                  [[[ return (entity.state === 'on' ||
                                  entity.state === 'Maison') ?
                                  'var(--my_color2)' :
                                  'var(--my_color_pastille)'; ]]]
                              - border-style: outset
                              - border-width: 1px
                              - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            custom_fields:
                              Patricia_heure:
                                - font-size: 85%
                                - top: 75%
                                - left: 8%
                                - color: grey
                                - position: absolute
                              circle:
                                - top: 10%
                                - left: 55%
                                - width: 35%
                                - position: absolute
                                - letter-spacing: 0.03vw
                                - stroke: |
                                    [[[
                                      if (states['sensor.sm_a515f_battery_level'].state < 40)
                                        return 'red';
                                     return 'grey';
                                    ]]]
                          extra_styles: |
                            @keyframes ball-scale {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                            @keyframes ball-scale2 {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                  - animation: ball-scale 0.2s
                                  - border-width: 1px
                            - value: 'off'
                              styles:
                                card:
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  - animation: ball-scale2 0.2s
                                  - border-width: 1px
                          custom_fields:
                            Patricia_heure: >
                              [[[ return states['sensor.Patricia_heure'].state
                              ]]]
                            circle: |
                              [[[ if (entity.state != 'unavailable' ) 
                              {
                                 ;
                                 const radius = 20.5; const circumference = radius * 2 * Math.PI; 
                                 return `<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="${radius}" stroke="grey" stroke-width="1" fill="none" style="
                                 transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: ${circumference}; stroke-dashoffset: ${circumference - states['sensor.sm_a515f_battery_level'].state / 100 * circumference};" />
                                 <text x="50%" y="54%" fill="grey" font-size="13" text-anchor="middle" alignment-baseline="middle">${states['sensor.sm_a515f_battery_level'].state}%<tspan font-size="10"></tspan></text></svg>`; } ]]]
                          double_tap_action:
                            action: more-info
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: Patricia
                              card:
                                type: custom:vertical-stack-in-card
                                cards:
                                  - type: picture
                                    style: |
                                      ha-card {
                                        border-radius: 10px;
                                        background: var(--my_color2);
                                      }
                                    image: /local/lovelace/images/patricia.png
                                    tap_action:
                                      action: none
                                    hold_action:
                                      action: none
                                  - type: entities
                                    entities:
                                      - entity: person.Patricia
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        background: var(--my_color2);
                                        color: lightgrey;
                                      }
                                  - aspect_ratio: '1:1'
                                    dark_mode: true
                                    default_zoom: 15
                                    entities:
                                      - entity: person.Patricia
                                    hours_to_show: 12
                                    type: map
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        border-radius: 15px 15px 0px 0px ;
                                        border-top : px solid grey;
                                        border-left : px solid grey;
                                        border-right : px solid grey;
                                      }
                                  - header:
                                      title: 📱Phone ️
                                      show: true
                                      show_states: true
                                      colorize_states: true
                                    experimental:
                                      brush: true
                                    graph_span: 72h
                                    brush:
                                      selection_span: 12h
                                    apex_config:
                                      grid:
                                        show: false
                                      legend:
                                        fontSize: 12px
                                        height: 40
                                      dataLabels:
                                        enabled: false
                                      stroke:
                                        width: 3
                                        curve: smooth
                                      fill:
                                        type: gradient
                                        gradient:
                                          type: vertical
                                          shadeIntensity: 0.8
                                          inverseColors: false
                                          opacityFrom: 0.5
                                          opacityTo: 0
                                          stops:
                                            - - 0
                                              - 50
                                              - 100
                                      tooltip:
                                        enabled: true
                                      yaxis:
                                        - show: true
                                          decimalsInFloat: 0
                                          labels:
                                            style:
                                              colors: '#FFB62E'
                                              fontSize: 12px
                                          forceNiceScale: true
                                        - show: true
                                          decimalsInFloat: 0
                                          opposite: true
                                          labels:
                                            style:
                                              colors: '#2eb9ff'
                                              fontSize: 12px
                                          forceNiceScale: true
                                      xaxis:
                                        axisBorder:
                                          show: false
                                        labels:
                                          style:
                                            fontSize: 14px
                                    series:
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        show:
                                          extremas: false
                                        type: area
                                        color: grey
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a515f_battery_level
                                        name: Patricia
                                        show:
                                          extremas: false
                                        type: area
                                        color: purple
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        color: dodgerblue
                                        fill_raw: last
                                        type: area
                                        stroke_width: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                        show:
                                          in_brush: true
                                          in_chart: false
                                    card_mod:
                                      style: |
                                        ha-card {
                                        background-color: black;
                                        }
                                    type: custom:apexcharts-card
                        - type: custom:button-card
                          entity: person.nanou
                          name: nanou
                          aspect_ratio: 1/1
                          show_entity_picture: true
                          show_icon: false
                          show_name: false
                          show_state: false
                          show_label: true
                          label: |
                            [[[
                              return states['device_tracker.sm_nanou'].state
                            ]]]
                          styles:
                            entity_picture:
                              - border-radius: 50%
                              - top: 5%
                              - left: 5%
                              - width: 40%
                              - color: gray
                              - opacity: 60%
                            name:
                              - top: 55%
                              - left: 8%
                              - position: absolute
                              - color: grey
                              - font-size: 85%
                            state:
                              - top: 79%
                              - left: 5%
                              - position: absolute
                            label:
                              - font-size: 85%
                              - font-weight: bold
                              - top: 58%
                              - left: 8%
                              - position: absolute
                              - color: |
                                  [[[
                                    if (states['person.nanou'].state == "Maison")
                                      return 'darkgrey';
                                    if (states['person.nanou'].state == "not_Maison")
                                      return 'red';
                                    return 'red';
                                  ]]]
                            card:
                              - font-size: 100%
                              - border-color: rgba(152, 167, 185, 0.2)
                              - background-color: >
                                  [[[ return (entity.state === 'on' ||
                                  entity.state === 'Maison') ?
                                  'var(--my_color2)' :
                                  'var(--my_color_pastille)'; ]]]
                              - border-style: outset
                              - border-width: 1px
                              - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                            custom_fields:
                              tom_heure:
                                - font-size: 85%
                                - top: 75%
                                - left: 8%
                                - color: grey
                                - position: absolute
                          extra_styles: |
                            @keyframes ball-scale {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                            @keyframes ball-scale2 {
                              from {
                                transform: scale(1);
                              }
                              to {
                                transform: scale(0.90);
                              }
                            }
                          state:
                            - value: 'on'
                              styles:
                                card:
                                  - box-shadow: ' outset -1px -1px 2px 0px rgb(12, 12, 14) '
                                  - animation: ball-scale 0.2s
                                  - border-width: 2px
                            - value: 'off'
                              styles:
                                card:
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                                  - animation: ball-scale2 0.2s
                                  - border-width: 1px
                          custom_fields:
                            nanou_heure: |
                              [[[ return states['sensor.nanou_heure'].state ]]]
                          double_tap_action:
                            action: more-info
                          tap_action:
                            action: fire-dom-event
                            browser_mod:
                              command: popup
                              title: tom
                              card:
                                type: custom:vertical-stack-in-card
                                cards:
                                  - type: picture
                                    style: |
                                      ha-card {
                                        border-radius: 10px;
                                        background: var(--my_color2);
                                      }
                                    image: /local/lovelace/images/Nanou.jpg
                                    tap_action:
                                      action: none
                                    hold_action:
                                      action: none
                                  - type: entities
                                    entities:
                                      - entity: person.nanou
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        background: var(--my_color2);
                                        color: lightgrey;
                                      }
                                  - aspect_ratio: '1:1'
                                    dark_mode: true
                                    default_zoom: 15
                                    entities:
                                      - entity: person.nanou
                                    hours_to_show: 12
                                    type: map
                                    style: |
                                      ha-card {
                                        border-radius: 15px ;
                                        border-radius: 15px 15px 0px 0px ;
                                        border-top : px solid grey;
                                        border-left : px solid grey;
                                        border-right : px solid grey;
                                      }
                                  - header:
                                      title: 📱Phone ️
                                      show: true
                                      show_states: true
                                      colorize_states: true
                                    experimental:
                                      brush: true
                                    graph_span: 72h
                                    brush:
                                      selection_span: 12h
                                    apex_config:
                                      grid:
                                        show: false
                                      legend:
                                        fontSize: 12px
                                        height: 40
                                      dataLabels:
                                        enabled: false
                                      stroke:
                                        width: 3
                                        curve: smooth
                                      fill:
                                        type: gradient
                                        gradient:
                                          type: vertical
                                          shadeIntensity: 0.8
                                          inverseColors: false
                                          opacityFrom: 0.5
                                          opacityTo: 0
                                          stops:
                                            - - 0
                                              - 50
                                              - 100
                                      tooltip:
                                        enabled: true
                                      yaxis:
                                        - show: true
                                          decimalsInFloat: 0
                                          labels:
                                            style:
                                              colors: '#FFB62E'
                                              fontSize: 12px
                                          forceNiceScale: true
                                        - show: true
                                          decimalsInFloat: 0
                                          opposite: true
                                          labels:
                                            style:
                                              colors: '#2eb9ff'
                                              fontSize: 12px
                                          forceNiceScale: true
                                      xaxis:
                                        axisBorder:
                                          show: false
                                        labels:
                                          style:
                                            fontSize: 14px
                                    series:
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        show:
                                          extremas: false
                                        type: area
                                        color: grey
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a515f_battery_level
                                        name: Patricia
                                        show:
                                          extremas: false
                                        type: area
                                        color: purple
                                        fill_raw: last
                                        float_precision: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                      - entity: sensor.sm_a705fn_battery_level
                                        name: Vincent
                                        color: dodgerblue
                                        fill_raw: last
                                        type: area
                                        stroke_width: 1
                                        group_by:
                                          duration: 10min
                                          func: avg
                                        show:
                                          in_brush: true
                                          in_chart: false
                                    card_mod:
                                      style: |
                                        ha-card {
                                        background-color: black;
                                        }
                                    type: custom:apexcharts-card
                      square: false
                      columns: 3
              - type: custom:button-card
                entity: sensor.temp_maison
                name: temperature
                template:
                  - chips
                label: |
                  [[[
                    if (entity.state == 'unavailable')
                      return "🌡 indispo" ;
                    if (entity.state == '° / °')
                      return "🌡 indispo" ;
                    return "🌡 " + (entity.state );
                  ]]]
                styles:
                  card:
                    - opacity: |
                        [[[
                          if (entity.state == 'unavailable')
                            return "50%" ;
                          if (entity.state == '°')
                            return "50%" ;
                          return "100%";
                        ]]]
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    command: popup
                    title: Température / Humidité
                    card:
                      type: vertical-stack
                      cards:
                        - type: grid
                          cards:
                            - type: custom:button-card
                              entity: sensor.weather_sdb_temperature
                              name: SdB
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              label: |
                                [[[
                                  if (states['sensor.illuminance_salon_illuminance'].state != 'unavailable')
                                    return (states['sensor.illuminance_salon_illuminance'].state ) + " lx" ;
                                  return "";
                                ]]]
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                            - type: custom:button-card
                              entity: sensor.weather_cuisine_temperature
                              name: Cuisine
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                            - type: custom:button-card
                              entity: sensor.weather_ch_parents_temperature
                              name: Parents
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                            - type: custom:button-card
                              entity: sensor.weather_ch_filles_temperature
                              name: Filles
                              aspect_ratio: 1/1
                              icon: mdi:thermometer
                              show_icon: false
                              show_name: true
                              show_state: true
                              show_label: true
                              show_last_changed: true
                              styles:
                                state:
                                  - font-size: 110%
                                  - color: |
                                      [[[
                                        if (entity.state < 20)
                                          return 'dodgerblue';
                                        if (entity.state > 23)
                                          return 'tomato';
                                        return 'lightgrey';
                                      ]]]
                                name:
                                  - font-size: 90%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-bottom: 15%
                                  - color: grey
                                label:
                                  - font-size: 70%
                                  - align-self: middle
                                  - justify-self: center
                                  - padding-top: 10%
                                  - color: grey
                                card:
                                  - font-size: 100%
                                  - border-color: rgba(152, 167, 185, 0.2)
                                  - background-color: var(--my_color2)
                                  - border-style: outset
                                  - border-width: 1px
                                  - box-shadow: 1px 1px 5px 0px rgb(12, 12, 14)
                              double_tap_action:
                                action: more-info
                              tap_action:
                                action: more-info
                          columns: 4
              - type: custom:button-card
                entity: sensor.weather_soleil_icon
                name: maison
                template:
                  - chips
                label: |
                  [[[ return (entity.state ) ;
                  ]]]
          - type: custom:button-card
            name: ALARME
            template:
              - header
          - type: vertical-stack
            cards:
              - card:
                  entity: alarm_control_panel.alarmo
                  states:
                    - arm_home
                  style:
                    .: |
                      ha-card > ha-label-badge{
                        --alarm-state-color: var(--google-green-500) !important;
                      }
                      ha-card{
                        padding-top: 16px;
                        padding-bottom: 12px !important;
                        border-radius: 21px;
                      }
                      ha-card > h1{
                         padding-top: 0;
                         color: transparent;
                      }
                      ha-card > h1::before{
                         content: "Désactivée";
                         color: green;
                         position: absolute;
                         font-variant: small-caps;
                      }
                      #alarmCode{
                        display: none;
                      }
                      #keypad{
                        display: none !important;
                      }
                    '#armActions':
                      mwc-button:
                        $: |
                          #button > span.slot-container{
                            color: transparent;
                            position: absolute;

                          }
                          #button{
                            width: 150px;
                            border-radius: 21px;
                          }
                          #button > span.slot-container::before{
                            color: var(--mdc-theme-primary, #6200ee);
                            content: "Activer";
                            margin: 0 0 0 50%;
                          }
                  title: Alarme
                  type: alarm-panel
                conditions:
                  - entity: alarm_control_panel.alarmo
                    state: disarmed
                type: conditional
              - card:
                  entity: alarm_control_panel.alarmo
                  states:
                    - arm_home
                  title: Alarme
                  type: alarm-panel
                  style:
                    .: |
                      ha-card > ha-label-badge{
                        --alarm-state-color: var(--google-red-500) !important;
                      }
                      ha-card{
                        padding-top: 16px;
                        padding-bottom: 12px !important;
                        border-radius: 21px;
                      }
                      ha-card > h1{
                         padding-top: 0;
                         color: transparent;
                      }
                      ha-card > h1::before{
                         content: "Activée";
                         color: var(--google-red-500);
                         position: absolute;
                         font-variant: small-caps;
                      }
                    '#armActions':
                      mwc-button:
                        $: |
                          #button > span.slot-container{
                            color: transparent;
                            position: absolute;    
                          }
                          #button{
                            width: 150px;
                            border-radius: 21px;
                          }
                          #button > span.slot-container::before{
                            color: var(--mdc-theme-primary, #6200ee);
                            content: "Désactiver";
                            margin: 0 0 0 50%;
                          }
                    '#keypad':
                      mwc-button:
                        $: |
                          #button{
                            border-radius: 12px
                          }
                conditions:
                  - entity: alarm_control_panel.alarmo
                    state_not: disarmed
                type: conditional
          - type: custom:button-card
            name: LOCALISATION
            template:
              - header
          - type: grid
            columns: 3
            square: false
            cards:
              - template:
                  - icon_info_bg
                  - personnes
                  - popup_map
                type: custom:button-card
                entity: person.patricia
                show_entity_picture: true
                variables:
                  gps: google_maps
              - template:
                  - icon_info_bg
                  - personnes
                  - popup_map
                type: custom:button-card
                entity: person.vincent
                show_entity_picture: true
                variables:
                  gps: google_maps
              - template:
                  - icon_info_bg
                  - personnes
                  - popup_map
                type: custom:button-card
                entity: person.emma
                show_entity_picture: true
                variables:
                  gps: google_maps
      - cards:
          - type: custom:button-card
            name: SURVEILLANCE VM
            template:
              - header
          - type: custom:apexcharts-card
            chart_type: radialBar
            header:
              show: true
              title: Système
              show_states: true
              colorize_states: true
            apex_config:
              plotOptions:
                radialBar:
                  offsetY: 0
                  startAngle: 0
                  endAngle: 270
                  hollow:
                    size: 30%
            series:
              - entity: sensor.disk_use_percent
                type: column
                float_precision: 0
                color: red
              - entity: sensor.processor_use
                type: column
                float_precision: 0
                color: orange
              - entity: sensor.memory_use_percent
                type: column
                color: blue
                float_precision: 0
              - entity: sensor.swap_use_percent
                float_precision: 0
                type: column
                color: green
          - type: custom:button-card
            name: SURVEILLANCE RESEAUX
            template:
              - header
          - type: grid
            cards:
              - type: custom:uptime-card
                icon: mdi:web
                name: Home assistant
                hours_to_show: 24
                status_adaptive_color: true
                average_text: '% uptime'
                alias:
                  ok: Online
                  ko: Offline
                blink:
                  effect: fade
                  target: card
                  speed: 1
                color:
                  icon: gray
                  ok: '#45C669'
                  ko: '#C6B145'
                  half: '#C66445'
                  none: '#C9C9C9'
                  title: gray
                show:
                  header: true
                  title: true
                  icon: true
                  footer: false
                  status: true
                  timeline: true
                  average: true
                tooltip:
                  animation: true
                icon_adaptive_color: true
                bar:
                  spacing: 4
                  height: 25
                  round: 7
                  amount: 24
                entity: binary_sensor.wan_status
                title_adaptive_color: true
                init:
                  animation: raise
                card_mod:
                  style: |
                    ha-card .name > span {
                      font-size: 1.3em;
                    }
                    ha-card .status > span {
                      font-size: 1.1em;
                      max-height: 1.1em;
                    }
                    ha-card .timeline {
                      padding-bottom: 2px;
                    }
                    ha-card {
                     background-color: ; /*DARKGRAY*/
                     border: 1px solid rgba(245,245,245,0.2); /*GRAY*/
                     border-radius: 10px;
                     }
              - type: custom:uptime-card
                icon: mdi:web
                name: Home assistant
                hours_to_show: 24
                status_adaptive_color: true
                average_text: '% uptime'
                alias:
                  ok: 'On'
                  ko: 'Off'
                blink:
                  effect: fade
                  target: card
                  speed: 1
                color:
                  icon: gray
                  ok: '#45C669'
                  ko: '#C6B145'
                  half: '#C66445'
                  none: '#C9C9C9'
                  title: gray
                show:
                  header: true
                  title: true
                  icon: true
                  footer: false
                  status: true
                  timeline: true
                  average: true
                tooltip:
                  animation: true
                icon_adaptive_color: true
                bar:
                  amount: 24
                  height: 25
                  round: 7
                  spacing: 4
                title_adaptive_color: true
                entity: binary_sensor.router
                init:
                  animation: raise
                card_mod:
                  style: |
                    ha-card .name > span {
                    font-size: 1.3em; }
                    ha-card .status > span {
                    font-size: 1.1em;
                    max-height: 1.1em;}
                    ha-card .timeline {padding-bottom: 2px; }
                    ha-card {
                      background-color: ; /*DARKGRAY*/
                      border: 1px solid rgba(245,245,245,0.2); /*GRAY*/
                      border-radius: 10px; }
              - type: custom:uptime-card
                icon: mdi:web
                name: Home assistant
                hours_to_show: 24
                status_adaptive_color: true
                average_text: '% uptime'
                alias:
                  ok: Online
                  ko: Offline
                blink:
                  effect: fade
                  target: card
                  speed: 1
                color:
                  icon: gray
                  ok: '#45C669'
                  ko: '#C6B145'
                  half: '#C66445'
                  none: '#C9C9C9'
                  title: gray
                show:
                  header: true
                  title: true
                  icon: true
                  footer: false
                  status: true
                  timeline: true
                  average: true
                tooltip:
                  animation: true
                icon_adaptive_color: true
                bar:
                  spacing: 4
                  height: 25
                  round: 7
                  amount: 24
                entity: binary_sensor.switch_linksys
                title_adaptive_color: true
                init:
                  animation: raise
                card_mod:
                  style: |
                    ha-card .name > span {
                      font-size: 1.3em;
                    }
                    ha-card .status > span {
                      font-size: 1.1em;
                      max-height: 1.1em;
                    }
                    ha-card .timeline {
                      padding-bottom: 2px;
                    }
                    ha-card {
                     background-color: ; /*DARKGRAY*/
                     border: 1px solid rgba(245,245,245,0.2); /*GRAY*/
                     border-radius: 10px;
                     }
                tooltip_adaptive_color: true
              - type: custom:uptime-card
                icon: mdi:web
                name: Home assistant
                hours_to_show: 24
                status_adaptive_color: true
                average_text: '% uptime'
                alias:
                  ok: 'On'
                  ko: 'Off'
                blink:
                  effect: fade
                  target: card
                  speed: 1
                color:
                  icon: gray
                  ok: '#45C669'
                  ko: '#C6B145'
                  half: '#C66445'
                  none: '#C9C9C9'
                  title: gray
                show:
                  header: true
                  title: true
                  icon: true
                  footer: false
                  status: true
                  timeline: true
                  average: true
                tooltip:
                  animation: true
                icon_adaptive_color: true
                bar:
                  amount: 24
                  height: 25
                  round: 7
                  spacing: 4
                title_adaptive_color: true
                init:
                  animation: raise
                entity: binary_sensor.roborock
                tap_action:
                  action: more-info
                alignment:
                  header: spaced
                  status: spaced
                card_mod:
                  style: |
                    ha-card .name > span {
                    font-size: 1.3em; }
                    ha-card .status > span {
                    font-size: 1.1em;
                    max-height: 1.1em;}
                    ha-card .timeline {padding-bottom: 2px; }
                    ha-card {
                      background-color: ; /*DARKGRAY*/
                      border: 1px solid rgba(245,245,245,0.2); /*GRAY*/
                      border-radius: 10px; }
            square: false
            columns: 2
        type: vertical-stack
      - cards:
          - type: custom:button-card
            name: SPEEDTEST
            template:
              - header
          - type: custom:mini-graph-card
            template: Bordure
            name: Speed Test
            show_icon: true
            hours_to_show: 72
            points_per_hour: 2
            animate: true
            hour24: true
            show:
              extrema: true
              name_adaptive_color: true
            color_thresholds:
              - value: 0
                color: '#BF4040'
              - value: 200
                color: '#F9C536'
              - value: 400
                color: '#80bf40'
            entities:
              - entity: sensor.speedtest_download
                name: Download
                show_state: true
                state_adaptive_color: true
              - entity: sensor.speedtest_upload
                name: Upload
                show_state: true
                state_adaptive_color: true
              - entity: sensor.speedtest_ping
                name: Ping
                show_state: true
                state_adaptive_color: true
                color: '#000080'
          - type: custom:button-card
            name: LOCALISATION CONNEXION
            template:
              - header
          - type: iframe
            template: Bordure
            url: >-
              https://geo.myip.ms/?colorBG=323232&colorBorder=323232&colorText=a0a0a0&colorLink=ffffff%20&icon=small&position=ver&map=1&mapType=2&mapHeight=100&mapZoom=4&timeType=24&lang=en&width=460&height=200
        type: vertical-stack
  - theme: Backend-selected
    title: Automations
    path: automations
    icon: mdi:wrench-clock
    visible:
      - user: 9b144cacffe2461babcefd46b46f3f61
      - user: 07b9552c7f0c4ede8e5301f34b654e91
      - user: c55ab7f969ff49d2bae763c5e3a363c9
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: SCENES
            template: header
          - entities:
              - card:
                  head:
                    label: Toutes les scenes
                    type: section
                  type: custom:fold-entity-row
                filter:
                  include:
                    - domain: scene
                show_empty: false
                type: custom:auto-entities
            template: Bordure
            show_header_toggle: true
            type: entities
            state_color: true
          - type: custom:button-card
            name: AUTOMATISATIONS
            template: header
          - entities:
              - card:
                  head:
                    label: Toutes les automatisation
                    type: section
                  type: custom:fold-entity-row
                filter:
                  include:
                    - domain: automation
                show_empty: false
                type: custom:auto-entities
                template: Bordure
            show_header_toggle: true
            type: entities
            state_color: true
          - type: custom:button-card
            name: SCRIPTS
            template: header
          - entities:
              - card:
                  head:
                    label: Tous les scripts
                    type: section
                  type: custom:fold-entity-row
                filter:
                  include:
                    - domain: script
                show_empty: false
                type: custom:auto-entities
                template: Bordure
            show_header_toggle: true
            type: entities
            state_color: true
          - type: custom:button-card
            name: PRISES
            template: header
          - entities:
              - card:
                  head:
                    label: Toutes les prises
                    type: section
                  type: custom:fold-entity-row
                filter:
                  include:
                    - domain: switch
                show_empty: false
                type: custom:auto-entities
                template: Bordure
            show_header_toggle: true
            type: entities
            state_color: true
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: ECLAIRAGES
            template: header
          - entities:
              - card:
                  head:
                    label: Tout les éclairages
                    type: section
                  type: custom:fold-entity-row
                filter:
                  include:
                    - domain: light
                show_empty: false
                type: custom:auto-entities
            template: Bordure
            show_header_toggle: true
            type: entities
            state_color: true
          - type: custom:button-card
            name: VIBRATION
            template: header
          - entities:
              - card:
                  head:
                    label: Tout les capteurs de vibration
                    type: section
                  type: custom:fold-entity-row
                filter:
                  include:
                    - domain: binary_sensor.vibration
                show_empty: false
                type: custom:auto-entities
            template: Bordure
            show_header_toggle: true
            type: entities
            state_color: true
          - type: custom:button-card
            name: ENCRE IMPRIMANTE
            template: header
          - cards:
              - columns: 4
                direction: up
                entities:
                  - color: MediumTurquoise
                    entity: sensor.lexmark_cs317dn_cyan
                    name: Cyan
                  - color: MediumOrchid
                    entity: sensor.lexmark_cs317dn_magenta
                    name: Magenta
                  - color: Gold
                    entity: sensor.lexmark_cs317dn_yellow
                    name: Jaune
                  - color: Black
                    entity: sensor.lexmark_cs317dn_black
                    name: Noir
                height: 200px
                max: 100
                min: 0
                padding: 2px
                type: custom:bar-card
                unit_of_measurement: '%'
                width: 100%
            type: custom:vertical-stack-in-card
            style: |
              ha-card {
               background-color: ; /*DARKGRAY*/
               border: 1px solid rgba(245,245,245,0.2); /*GRAY*/
               border-radius: 10px;
                }
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: NORMAL / VACANCES
            template: header
          - entities:
              - entity: input_select.house_mode
            type: glance
          - type: custom:button-card
            name: HASSIO
            template: header
          - type: entities
            show_header_toggle: false
            entities:
              - type: call-service
                icon: mdi:home-assistant
                name: Hassio
                action_name: Restart
                service: homeassistant.restart
              - type: call-service
                icon: mdi:home-assistant
                name: Hassio
                action_name: Reload Automation
                service: automation.reload
              - type: divider
          - type: custom:button-card
            name: RAPPEL MAINTENANCE
            template: header
          - entities:
              - entity: input_datetime.kitchen_fridge_last_maintenance_date
                name: Entretien réfrigerateur
                secondary: >-
                  {{
                  relative_time(strptime(state_attr('input_datetime.kitchen_fridge_last_maintenance_date','timestamp')
                  | timestamp_custom('%Y-%m-%d %H:%M:%S %z'), '%Y-%m-%d %H:%M:%S
                  %z')) }} ago
                state: >-
                  {% if as_timestamp(strptime(states('sensor.date'),
                  '%Y-%m-%d')) -
                  state_attr('input_datetime.kitchen_fridge_last_maintenance_date','timestamp')
                  > 86400 * 365 / 2 %}A prévoir{% else %}OK{% endif %}
              - entity: input_datetime.last_maintenance_aspi
                name: Entretien aspirateur
                secondary: >-
                  {{
                  relative_time(strptime(state_attr('input_datetime.last_maintenance_aspi','timestamp')
                  | timestamp_custom('%Y-%m-%d %H:%M:%S %z'), '%Y-%m-%d %H:%M:%S
                  %z')) }} ago
                state: >-
                  {% if as_timestamp(strptime(states('sensor.date'),
                  '%Y-%m-%d')) -
                  state_attr('input_datetime.last_maintenance_aspi','timestamp')
                  > 86400 * 365 / 2 %}A prévoir{% else %}OK{% endif %}
              - entity: input_datetime.last_maintenance_date_car
                name: Entretien voiture
                secondary: >-
                  {{
                  relative_time(strptime(state_attr('input_datetime.last_maintenance_date_car','timestamp')
                  | timestamp_custom('%Y-%m-%d %H:%M:%S %z'), '%Y-%m-%d %H:%M:%S
                  %z')) }} ago
                state: >-
                  {% if as_timestamp(strptime(states('sensor.date'),
                  '%Y-%m-%d')) -
                  state_attr('input_datetime.last_maintenance_date_car','timestamp')
                  > 86400 * 365 / 2 %}A prévoir{% else %}OK{% endif %}
              - entity: input_datetime.last_maintenance_chaudiere
                name: Entretien chaudiere
                secondary: >-
                  {{
                  relative_time(strptime(state_attr('input_datetime.last_maintenance_chaudiere','timestamp')
                  | timestamp_custom('%Y-%m-%d %H:%M:%S %z'), '%Y-%m-%d %H:%M:%S
                  %z')) }} ago
                state: >-
                  {% if as_timestamp(strptime(states('sensor.date'),
                  '%Y-%m-%d')) -
                  state_attr('input_datetime.last_maintenance_chaudiere','timestamp')
                  > 86400 * 365 / 2 %}A prévoir{% else %}OK{% endif %}
            type: entities
            style: |
              ha-card {
               background-color: ; /*DARKGRAY*/
               border: 1px solid rgba(245,245,245,0.2); /*GRAY*/
               border-radius: 10px;
               }
  - theme: Backend-selected
    title: Audio
    path: audio
    icon: mdi:music
    visible:
      - user: 9b144cacffe2461babcefd46b46f3f61
      - user: 07b9552c7f0c4ede8e5301f34b654e91
      - user: c55ab7f969ff49d2bae763c5e3a363c9
    badges: []
    cards:
      - type: custom:spotify-card
        limit: 10
        spotify_entity: media_player.spotify_vincentguillotte
        playlist_type: default
        account: default
        always_play_random_song: true
        display_style: list
        hide_warning: true
      - type: vertical-stack
        cards:
          - type: custom:mini-media-player
            icon: mdi:dots-horizontal-circle
            artwork: cover
            min_volume: '1'
            max_volume: '60'
            hide:
              power_state: false
              icon_state: false
              info: true
            entity: media_player.echo_salon
          - type: conditional
            conditions:
              - entity: media_player.echo_salon
                state_not: 'off'
            card:
              type: horizontal-stack
              cards:
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state: NRJ
                  card:
                    type: picture
                    image: /local/lovelace/images/radio/NRJ_selected.jpg?v=0.103
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state_not: NRJ
                  card:
                    type: picture
                    image: /local/lovelace/images/radio/NRJ.jpg?v=0.103
                    tap_action:
                      action: call-service
                      service: script.start_radio
                      service_data:
                        radio: NRJ
                        media: salon
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state: Fun
                  card:
                    type: picture
                    image: /local/lovelace/images/radio/Fun_selected.jpg?v=0.103
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state_not: Fun
                  card:
                    type: picture
                    image: /local/lovelace/images/radio/Fun.jpg?v=0.103
                    tap_action:
                      action: call-service
                      service: script.start_radio
                      service_data:
                        radio: Fun
                        media: salon
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state: BFM
                  card:
                    type: picture
                    image: /local/lovelace/images/radio/BFM_selected.jpg?v=0.103
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state_not: BFM
                  card:
                    type: picture
                    image: /local/lovelace/images/radio/BFM.jpg?v=0.103
                    tap_action:
                      action: call-service
                      service: script.start_radio
                      service_data:
                        radio: BFM
                        media: salon
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state: Skyrock
                  card:
                    type: picture
                    image: /local/lovelace/images/radio/Skyrock_selected.jpg?v=0.103
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state_not: Skyrock
                  card:
                    type: picture
                    image: /local/lovelace/images/radio/Skyrock.jpg?v=0.103
                    tap_action:
                      action: call-service
                      service: script.start_radio
                      service_data:
                        radio: Skyrock
                        media: salon
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state: Nostalgie
                  card:
                    type: picture
                    image: >-
                      /local/lovelace/images/radio/Nostalgie_selected.jpg?v=0.103
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state_not: Nostalgie
                  card:
                    type: picture
                    image: /local/lovelace/images/radio/Nostalgie.jpg?v=0.103
                    tap_action:
                      action: call-service
                      service: script.start_radio
                      service_data:
                        radio: Nostalgie
                        media: salon
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state: rireetchanson
                  card:
                    type: picture
                    image: >-
                      /local/lovelace/images/radio/rireetchanson_selected.jpeg?v=0.103
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state_not: rireetchanson
                  card:
                    type: picture
                    image: /local/lovelace/images/radio/rireetchanson.jpeg?v=0.103
                    tap_action:
                      action: call-service
                      service: script.start_radio
                      service_data:
                        radio: rireetchanson
                        media: salon
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state: franceinfo
                  card:
                    type: picture
                    image: >-
                      /local/lovelace/images/radio/franceinfo.jpeg_selected.jpg?v=0.103
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state_not: franceinfo
                  card:
                    type: picture
                    image: /local/lovelace/images/radio/franceinfo.jpeg?v=0.103
                    tap_action:
                      action: call-service
                      service: script.start_radio
                      service_data:
                        radio: franceinfo
                        media: salon
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state: francebleu
                  card:
                    type: picture
                    image: >-
                      /local/lovelace/images/radio/francebleu.jpeg_selected.jpg?v=0.103
                - type: conditional
                  conditions:
                    - entity: input_select.radio_station_salon
                      state_not: francebleu
                  card:
                    type: picture
                    image: /local/lovelace/images/radio/francebleu.jpeg?v=0.103
                    tap_action:
                      action: call-service
                      service: script.start_radio
                      service_data:
                        radio: francebleu
                        media: salon
      - type: custom:mini-media-player
        artwork: full-cover
        entity: media_player.echo_sdb
        icon: mdi:amazon
        tts:
          platform: alexa
          enity_id: media_player.echo_salon
      - type: custom:mini-media-player
        entity: media_player.echo_chambre_filles
        icon: mdi:amazon
        hide:
          icon: true
          source: true
          volume: true
          power_state: false
        speaker_group:
          platform: media_player
          show_group_count: true
          entities:
            - entity_id: media_player.echo_salon
              name: Echo Salon
            - entity_id: media_player.echo_cuisine
              name: Echo Cuisine
            - entity_id: media_player.echo_parents
              name: Echo chambre parents
            - entity_id: media_player.echo_filles
              name: Echo chambre filles
            - entity_id: media_player.echo_sdb
              name: Echo Sdb
        tts:
          platform: alexa
          enity_id: media_player.echo_salon
        source: full
        sound_mode: full
  - theme: Backend-selected
    title: Carte
    path: carte
    icon: mdi:map-search-outline
    type: panel
    visible:
      - user: 9b144cacffe2461babcefd46b46f3f61
      - user: 07b9552c7f0c4ede8e5301f34b654e91
      - user: c55ab7f969ff49d2bae763c5e3a363c9
    badges: []
    cards:
      - type: map
        entities:
          - entity: person.vincent
          - entity: person.patricia
          - entity: zone.arthon_en_retz
          - entity: zone.home
          - entity: zone.pressing
          - entity: zone.travail
          - entity: zone.ecole_emma
        dark_mode: false
        default_zoom: 13
        geo_location_sources: []
        view_layout:
          position: main
  - theme: Backend-selected
    title: test
    path: test
    visible:
      - user: c55ab7f969ff49d2bae763c5e3a363c9
    badges: []
    cards:
      - entity: switch.bf5445e17fcfd422bbyozt
        name: Ventilador
        icon: mdi:fan
        show_state: false
        size: 30%
        color: auto
        hold_action:
          action: more-info
        styles:
          card:
            - height: 100px
          name:
            - color: var(--button-card-light-color)
            - font-weight: 500
            - font-size: 12px
        state:
          - styles:
              card:
                - '-webkit-box-shadow': 0px 0px 9px 3px var(--button-card-light-color)
                - box-shadow: 0px 0px 2px 1px var(--button-card-light-color)
            value: 'on'
            spin: true
        type: custom:button-card
      - type: picture-elements
        image: local/lovelace/images/Air/ap_4.png
        title: Master Bedroom Air Purifier
        elements:
          - type: conditional
            conditions:
              - entity: sensor.master_bedroom_air_purifier_pm25_severity
                state: clean
              - entity: binary_sensor.master_bedroom_air_purifier_mode_off
                state: 'off'
            elements:
              - type: image
                entity: sensor.master_bedroom_air_purifier_pm25_severity
                title: PM2.5 severity level
                tap_action:
                  action: more-info
                state_image:
                  clean: local/lovelace/images/Air/ap_clean_4.png
                style:
                  top: 50%
                  left: 50%
                  width: 100%
          - type: conditional
            conditions:
              - entity: sensor.master_bedroom_air_purifier_severity
                state: polluted
              - entity: binary_sensor.purificatore_aria_salone_mode_off
                state: 'off'
            elements:
              - type: image
                entity: sensor.master_bedroom_air_purifier_pm25_severity
                title: PM2.5 severity level
                tap_action:
                  action: more-info
                state_image:
                  polluted: local/lovelace/images/Air/ap_polluted_4.png
                style:
                  top: 50%
                  left: 50%
                  width: 100%
          - type: conditional
            conditions:
              - entity: sensor.master_bedroom_air_purifier_severity
                state: critical
              - entity: binary_sensor.purificatore_aria_salone_mode_off
                state: 'off'
            elements:
              - type: image
                entity: sensor.master_bedroom_air_purifier_severity
                title: PM2.5 severity level
                tap_action:
                  action: more-info
                state_image:
                  critical: local/lovelace/images/Air/ap_critical_4.png
                style:
                  top: 50%
                  left: 50%
                  width: 100%
          - type: state-icon
            entity: binary_sensor.master_bedroom_air_purifier_mode_off
            title: 'Off'
            icon: mdi:power-standby
            tap_action:
              action: call-service
              service: fan.toggle
              service_data:
                entity_id: fan.master_bedroom_air_purifier
            style:
              top: 26%
              left: 24%
              '--paper-item-icon-color': rgb(128, 128, 128)
              '--paper-item-icon-active-color': rgb(255, 128, 0)
          - type: state-icon
            entity: fan.master_bedroom_air_purifier
            title: More Info
            icon: mdi:dots-vertical
            tap_action:
              action: more-info
            style:
              top: 26%
              left: 77%
              '--paper-item-icon-color': rgb(128, 128, 128)
              '--paper-item-icon-active-color': rgb(128, 128, 128)
          - type: conditional
            conditions:
              - entity: binary_sensor.master_bedroom_air_purifier_mode_off
                state: 'off'
            elements:
              - type: state-label
                entity: sensor.master_bedroom_air_purifier_air_quality_pm25
                title: PM2.5
                tap_action:
                  action: more-info
                style:
                  top: 36%
                  left: 50%
                  min-width: 40px
                  min-height: 40px
                  text-align: center
                  font-size: 350%
                  color: rgb(255,255,255)
              - type: state-label
                entity: sensor.master_bedroom_air_purifier_temperature
                title: Temperature
                tap_action:
                  action: more-info
                style:
                  top: 46%
                  left: 31%
                  min-width: 40px
                  min-height: 40px
                  text-align: center
                  font-size: 75%
                  color: rgb(255,255,255)
              - type: state-label
                entity: sensor.master_bedroom_air_purifier_humidity
                title: Humidity
                tap_action:
                  action: more-info
                style:
                  top: 46%
                  left: 42%
                  min-width: 40px
                  min-height: 40px
                  text-align: center
                  font-size: 75%
                  color: rgb(255,255,255)
              - type: state-icon
                entity: switch.master_bedroom_air_purifier_led
                title: Display
                tap_action:
                  action: toggle
                style:
                  top: 45%
                  left: 67%
                  '--paper-item-icon-color': rgb(128, 128, 128)
                  '--paper-item-icon-active-color': rgb(255, 128, 0)
              - type: state-icon
                entity: number.master_bedroom_air_purifier_volume
                title: Buzzer
                style:
                  top: 45%
                  left: 54%
                  '--paper-item-icon-color': rgb(128, 128, 128)
                  '--paper-item-icon-active-color': rgb(255, 128, 0)
              - type: state-icon
                entity: switch.master_bedroom_air_purifier_child_lock
                title: Child lock
                tap_action:
                  action: toggle
                style:
                  top: 36%
                  left: 37%
                  '--paper-item-icon-color': rgb(128, 128, 128)
                  '--paper-item-icon-active-color': rgb(255, 128, 0)
              - type: state-label
                entity: sensor.master_bedroom_air_purifier_filter_life_remaining
                title: Filter remaining
                tap_action:
                  action: more-info
                style:
                  top: 37%
                  left: 63%
                  min-width: 40px
                  min-height: 40px
                  text-align: center
                  font-size: 80%
                  color: rgb(128,128,128)
          - type: conditional
            conditions:
              - entity: binary_sensor.master_bedroom_air_purifier_mode_off
                state: 'on'
            elements:
              - type: state-label
                entity: sensor.master_bedroom_air_purifier_air_quality_pm25
                title: PM2.5
                tap_action:
                  action: more-info
                style:
                  top: 36%
                  left: 50%
                  min-width: 40px
                  min-height: 40px
                  text-align: center
                  font-size: 350%
                  color: rgb(128, 128, 128)
              - type: state-label
                entity: sensor.master_bedroom_air_purifier_temperature
                title: Temperature
                tap_action:
                  action: more-info
                style:
                  top: 46%
                  left: 31%
                  min-width: 40px
                  min-height: 40px
                  text-align: center
                  font-size: 75%
                  color: rgb(128, 128, 128)
              - type: state-label
                entity: sensor.master_bedroom_air_purifier_humidity
                title: Humidity
                tap_action:
                  action: more-info
                style:
                  top: 46%
                  left: 42%
                  min-width: 40px
                  min-height: 40px
                  text-align: center
                  font-size: 75%
                  color: rgb(128, 128, 128)
          - type: state-icon
            entity: binary_sensor.master_bedroom_air_purifier_mode_auto
            title: Auto
            icon: mdi:autorenew
            tap_action:
              action: call-service
              service: fan.set_preset_mode
              service_data:
                entity_id: fan.master_bedroom_air_purifier
                preset_mode: Auto
            style:
              top: 53%
              left: 31%
              '--paper-item-icon-color': rgb(192, 192, 192)
              '--paper-item-icon-active-color': rgb(255, 128, 0)
          - type: state-icon
            entity: binary_sensor.master_bedroom_air_purifier_mode_silent
            title: Silent
            icon: mdi:power-sleep
            tap_action:
              action: call-service
              service: fan.set_preset_mode
              service_data:
                entity_id: fan.master_bedroom_air_purifier
                preset_mode: Silent
            style:
              top: 53%
              left: 43%
              '--paper-item-icon-color': rgb(192, 192, 192)
              '--paper-item-icon-active-color': rgb(255, 128, 0)
          - type: state-icon
            entity: binary_sensor.master_bedroom_air_purifier_mode_favorite
            title: Fan
            icon: mdi:fan
            tap_action:
              action: call-service
              service: fan.set_preset_mode
              service_data:
                entity_id: fan.master_bedroom_air_purifier
                preset_mode: Favorite
            style:
              top: 53%
              left: 54%
              '--paper-item-icon-color': rgb(192, 192, 192)
              '--paper-item-icon-active-color': rgb(255, 128, 0)
          - type: state-icon
            entity: binary_sensor.master_bedroom_air_purifier_mode_favorite
            title: Favorite
            icon: mdi:heart
            tap_action:
              action: call-service
              service: fan.set_preset_mode
              service_data:
                entity_id: fan.master_bedroom_air_purifier
                preset_mode: Favorite
            style:
              top: 53%
              left: 67%
              '--paper-item-icon-color': rgb(192, 192, 192)
              '--paper-item-icon-active-color': rgb(255, 128, 0)
          - type: conditional
            conditions:
              - entity: binary_sensor.master_bedroom_air_purifier_mode_favorite
                state: 'on'
            elements:
              - type: state-icon
                entity: binary_sensor.master_bedroom_air_purifier_mode_fan_1
                title: Fan level 1
                icon: mdi:fan-speed-1
                tap_action:
                  action: call-service
                  service: number.set_value
                  service_data:
                    entity_id: number.master_bedroom_air_purifier_favorite_level
                    value: 3
                style:
                  top: 61%
                  left: 41%
                  '--paper-item-icon-color': rgb(192, 192, 192)
                  '--paper-item-icon-active-color': rgb(255, 128, 0)
              - type: state-icon
                entity: binary_sensor.master_bedroom_air_purifier_mode_fan_2
                title: Fan level 2
                icon: mdi:fan-speed-2
                tap_action:
                  action: call-service
                  service: number.set_value
                  service_data:
                    entity_id: number.master_bedroom_air_purifier_favorite_level
                    value: 8
                style:
                  top: 61%
                  left: 50%
                  '--paper-item-icon-color': rgb(192, 192, 192)
                  '--paper-item-icon-active-color': rgb(255, 128, 0)
              - type: state-icon
                entity: binary_sensor.master_bedroom_air_purifier_mode_fan_3
                title: Fan level 3
                icon: mdi:fan-speed-3
                tap_action:
                  action: call-service
                  service: number.set_value
                  service_data:
                    entity_id: number.master_bedroom_air_purifier_favorite_level
                    value: 15
                style:
                  top: 61%
                  left: 59%
                  '--paper-item-icon-color': rgb(192, 192, 192)
                  '--paper-item-icon-active-color': rgb(255, 128, 0)
          - type: conditional
            conditions:
              - entity: binary_sensor.purificatore_aria_salone_mode_favorite
                state: 'on'
            elements:
              - type: state-label
                entity: sensor.master_bedroom_air_purifier_level
                title: Favorite level
                tap_action:
                  action: none
                style:
                  top: 62%
                  left: 42%
                  min-width: 40px
                  min-height: 40px
                  text-align: center
                  font-size: 200%
                  color: rgb(255, 128, 0)
              - type: icon
                icon: mdi:plus
                title: Favorite level +
                tap_action:
                  action: call-service
                  service: script.favorite_up
                  service_data:
                    entity_id: fan.master_bedroom_air_purifier
                    step: 2
                style:
                  top: 63%
                  left: 55.5%
                  min-width: 40px
                  min-height: 40px
                  color: rgb(192, 192, 192)
                  color_off: rgb(255, 128, 0)
              - type: icon
                icon: mdi:minus
                title: Favorite level -
                tap_action:
                  action: call-service
                  service: script.favorite_down
                  service_data:
                    entity_id: fan.master_bedroom_air_purifier
                    step: 1
                style:
                  top: 63%
                  left: 33%
                  min-width: 40px
                  min-height: 40px
                  color: rgb(192, 192, 192)
                  color_off: rgb(255, 128, 0)
              - type: state-label
                entity: input_select.master_bedroom_air_purifier_coverage
                title: Coverage
                tap_action:
                  action: none
                style:
                  top: 61.7%
                  left: 67%
                  min-width: 40px
                  min-height: 40px
                  text-align: center
                  font-size: 90%
                  color: rgb(255, 128, 0)
      - type: glance
        entities:
          - entity: input_boolean.stop_rain_notification
            style: |
              state-badge{
                {% if is_state('input_boolean.stop_rain_notification', 'off') %}
                  filter:  brightness(50%) grayscale(100%);
                {% endif %}
              }
              div:nth-child(3){
                {% if is_state('input_boolean.stop_rain_notification', 'off') %}
                  font-weight: 600;
                  animation: pulsation 1.3s ease infinite;
                  -webkit-animation: pulsation 1.3s ease infinite;
                {% endif %}
              }
              @-webkit-keyframes pulsation {
                0% {
                  background: transparent;
                  color: white
                }
                50% {
                  transform: scale(1);
                  background: transparent;
                  color: white
                }      
                25%,75% {
                  transform: scale(1.2);
                  background: radial-gradient(circle, rgba(131,58,180,0.6485252808988764) 0%, rgba(253,29,29,0.8114466292134832) 0%, rgba(252,54,54,0.8) 30%, rgba(252,176,69,0) 50%);;
                  color: white
                  
                }    
                100% {
                  background: transparent;
                  transform: scale(1);
                  color: white
                }
              }
              @keyframes pulsation {
                0% {
                  background: transparent;
                  color: white
                }
                50% {
                  transform: scale(1);
                  background: transparent;
                  color: white
                }      
                25%,75% {
                  transform: scale(1.2);
                  background: radial-gradient(circle, rgba(131,58,180,0.6485252808988764) 0%, rgba(253,29,29,0.8114466292134832) 0%, rgba(252,54,54,0.8) 30%, rgba(252,176,69,0) 50%);;
                  color: white
                  
                }    
                100% {
                  background: transparent;
                  transform: scale(1);
                  color: white
                }
              }
          - entity: input_boolean.stop_rain_notification
            style: |
              .name{
                {% if is_state('input_boolean.stop_rain_notification', 'off') %}
                  color: red;
                  font-weight: 600;
                  animation: blink 2s infinite;
                  -webkit-animation: blink 2s infinite
                {% endif %}
              }
              state-badge{
                {% if is_state('input_boolean.stop_rain_notification', 'off') %}
                  filter:  brightness(50%) grayscale(100%);
                {% endif %}
              }
              @-webkit-keyframes blink {
                0%,
                50%,
                100% {
                  opacity: 1;
                  font-size: 1.5em;
                }
                25%,
                75% {
                  opacity: 0;
                  font-size: 1em;

                }
              }
              @keyframes blink {
                0%,
                50%,
                100% {
                  opacity: 1;
                  font-size: 1.5em;
                }
                25%,
                75% {
                  opacity: 0;
                  font-size: 1em;
                }
              }
          - entity: input_boolean.stop_rain_notification
            style: |
              .name{
                {% if is_state('input_boolean.stop_rain_notification', 'off') %}
                  font-weight: 600;
                  color: red;
                  text-transform: uppercase;
                {% endif %}
              }
              state-badge{
                {% if is_state('input_boolean.stop_rain_notification', 'off') %}
                  animation: jump 1.2s cubic-bezier(0,1.03,1,.01) 0s infinite normal;
                  -webkit-animation: jump 1.2s cubic-bezier(0,1.03,1,.01) 0s infinite normal;
                {% endif %}
              }
              div:nth-child(3){
                {% if is_state('input_boolean.stop_rain_notification', 'off') %}
                  font-weight: 600;
                  color: red;
                  text-transform: uppercase;
                {% endif %}
              }
              @-webkit-keyframes jump{
                0%,12%,100%{ transform:rotate(0); filter: brightness(1); }
                4%,8%{ transform:rotate(40deg) translateX(-0px);filter: brightness(10);}
                6%,10%{ transform:rotate(-40deg)translateX(0px);filter: brightness(10); }
              }

              @keyframes jump{
                0%,12%,100%{ transform:rotate(0); filter: brightness(1); }
                4%,8%{ transform:rotate(40deg) translateX(-0px);filter: brightness(10);}
                6%,10%{ transform:rotate(-40deg)translateX(0px);filter: brightness(10); }
              }
          - entity: input_boolean.stop_rain_notification
            style: |
              .name{
                {% if is_state('input_boolean.stop_rain_notification', 'off') %}
                  font-weight: 600;
                  color: red;
                  text-transform: uppercase;
                {% endif %}
              }
              state-badge{
                {% if is_state('input_boolean.stop_rain_notification', 'off') %}
                  filter:  brightness(50%) grayscale(100%);
                  animation: jump 1s ease-in-out 0s infinite normal;
                  -webkit-animation: jump 1s ease-in-out 0s infinite normal;
                {% endif %}
              }
              div:nth-child(3){
                {% if is_state('input_boolean.stop_rain_notification', 'off') %}
                  font-weight: 600;
                  color: red;
                  text-transform: uppercase;
                {% endif %}
              }
              @-webkit-keyframes jump{
              @keyframes jump{
                0%,20%,50%,80%,100%{ transform:translateY(0); }
                40%{ transform:translateY(-30px); }
                60%{ transform:translateY(-15px); }
              }
              }

              @keyframes jump{
                0%,20%,50%,80%,100%{ transform:translateY(0); }
                40%{ transform:translateY(-30px); }
                60%{ transform:translateY(-15px); }
              }
      - image: local/lovelace/images/plants.png
        elements:
          - style:
              top: 7%
              '--ha-label-badge-font-size': 1em
              left: 2%
              transform: none
            type: state-badge
            entity: sensor.small_chili_moisture
          - style:
              top: 7%
              '--ha-label-badge-font-size': 1em
              left: 17%
              transform: none
            type: state-badge
            entity: sensor.big_chili_moisture
          - style:
              top: 7%
              '--ha-label-badge-font-size': 1em
              left: 32%
              transform: none
            type: state-badge
            entity: sensor.herbs_moisture
          - style:
              top: 12%
              '--ha-label-badge-font-size': 1em
              left: 92%
            type: state-label
            entity: sensor.greenhouse_temperature
        type: picture-elements
      - type: custom:mini-media-player
        entity: media_player.echo_salon
        hide:
          power: true
          icon: true
          source: true
        speaker_group:
          platform: media_player
          show_group_count: true
          entities:
            - entity_id: media_player.echo_salon
              name: Echo Salon
            - entity_id: media_player.echo_cuisine
              name: Echo Cuisine
            - entity_id: media_player.echo_parents
              name: Echo chambre parents
            - entity_id: media_player.echo_filles
              name: Echo chambre filles
            - entity_id: media_player.echo_sdb
              name: Echo Sdb
        tts:
          platform: alexa
          enity_id: media_player.echo_salon
      - type: entities
        entities:
          - entity: sensor.disk_use_percent
          - entity: sensor.disk_use
          - entity: sensor.disk_free
          - entity: sensor.memory_use_percent
          - entity: sensor.memory_use
          - entity: sensor.memory_use_percent
          - entity: sensor.swap_use_percent
          - entity: sensor.swap_use
          - entity: sensor.swap_free
          - entity: sensor.network_in_ens192
          - entity: sensor.network_out_ens192
          - entity: sensor.packets_in_ens192
          - entity: sensor.packets_out_ens192
          - entity: sensor.ipv4_address_ens192
          - entity: sensor.last_boot
          - entity: sensor.home_assistant_log_size
          - entity: sensor.home_assistant_v2_db_size
          - entity: sensor.hacs
            icon: mdi:update
            name: Community Store
      - type: custom:mini-graph-card
        entities:
          - sensor.speedtest_download
        show:
          labels: true
        style: |
          ha-card .states.flex::after {
            color: blue;
            content: "Upload: {{states('sensor.speedtest_upload')}} Mbit/s \A Download: {{states('sensor.speedtest_download')}} Mbit/s";
            white-space: pre;
            background-color: rgba(50,50,50,0.1);
            padding: 5px 5px 5px 5px;
            border-radius: 5px;
          }
      - type: custom:button-card
        entity: sensor.speedtest_download
        name: Internet Speed
        variables:
          red_state: |
            [[[
              return states['sensor.network_in_ens192'].state == '0.0'
            ]]]
          percent: |
            [[[
              return states['sensor.speedtest_download'].state;
            ]]]
        double_tap_action:
          action: call-service
          service: speedtestdotnet.speedtest
          service_data: {}
        tap_action:
          action: fire-dom-event
          browser_mod:
            command: popup
            title: Internet
            large: false
            hide_header: true
            card:
              type: vertical-stack
              cards:
                - type: grid
                  cards:
                    - hours_to_show: 24
                      graph: line
                      type: sensor
                      entity: sensor.speedtest_download
                      detail: 1
                      name: Down
                      unit: ''
                    - hours_to_show: 24
                      graph: line
                      type: sensor
                      entity: sensor.speedtest_upload
                      detail: 1
                      name: Up
                      unit: ''
                    - type: sensor
                      entity: sensor.speedtest_ping
                      graph: line
                      detail: 1
                      name: Ping
      - type: custom:button-card
        entity: sensor.speedtest_download
        name: Internet Speed
        variables:
          red_state: |
            [[[
              return states['sensor.network_in_ens192'].state == '0.0'
            ]]]
          percent: |
            [[[
              return states['sensor.speedtest_download'].state;
            ]]]
        tap_action:
          action: fire-dom-event
          browser_mod:
            command: popup
            title: Internet
            large: false
            hide_header: true
            card:
              type: vertical-stack
              cards:
                - type: custom:mini-graph-card
                  template: Bordure
                  name: Speed Test
                  show_icon: true
                  hours_to_show: 72
                  points_per_hour: 2
                  animate: true
                  hour24: true
                  show:
                    extrema: true
                    name_adaptive_color: true
                  color_thresholds:
                    - value: 0
                      color: '#F5C10D'
                    - value: 200
                      color: '#F9C536'
                    - value: 400
                      color: '#80bf40'
                  entities:
                    - entity: sensor.speedtest_download
                      name: Download
                      show_state: true
                      state_adaptive_color: true
                    - entity: sensor.speedtest_upload
                      name: Upload
                      show_state: true
                      state_adaptive_color: true
                    - entity: sensor.speedtest_ping
                      name: Ping
                      show_state: true
                      state_adaptive_color: true
                      color: '#000080'
                - type: grid
                  cards:
                    - hours_to_show: 24
                      graph: line
                      type: sensor
                      entity: sensor.speedtest_download
                      detail: 1
                      name: Down
                      unit: ''
                    - hours_to_show: 24
                      graph: line
                      type: sensor
                      entity: sensor.speedtest_upload
                      detail: 1
                      name: Up
                      unit: ''
                    - type: sensor
                      entity: sensor.speedtest_ping
                      graph: line
                      detail: 1
                      name: Ping
